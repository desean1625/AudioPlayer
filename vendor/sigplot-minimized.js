/*

 File: tinycolor.js
 TinyColor v0.9.15+
 https://github.com/bgrins/TinyColor
 2013-02-24, Brian Grinstead, MIT License

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: spin.js
 Copyright (c) 2011-2013 Felix Gnass
 Licensed under the MIT license

 File: sigplot.layer1d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.layer2d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: license.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser 
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or 
 (at your option) any later version. This library is distributed in the hope that it will be useful, but 
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the 
 GNU Lesser General Public License along with SigPlot.

 Portions of SigPlot may utilize the following open-source software:

   loglevel.js          - MIT License; Copyright (c) 2014, Tim Perry
   typedarray.js        - MIT License; Copyright (c) 2010, Linden Research, Inc.
   tinycolor.js         - MIT License; Copyright (c) 2013, Brian Grinstead
   CanvasInput.js       - MIT License; Copyright (c) 2013, James Simpson of GoldFire Studios
   spin.js              - MIT License; Copyright (c) 2011-2013 Felix Gnass
   Array.remove         - MIT License; Copyright (c) 2007, John Resig
   Firefox subarray fix - Public Domain; Copyright (c) 2011, Ryan Berdeen

 File: typedarray.js
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$

 Copyright (c) 2013, Michael Ihde - Added big-endian/little-endian support

 File: common.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: bluefile.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: m.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: mx.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.
*/
function dashOn(t,e,i){return t.setLineDash?(t.setLineDash([e,i]),!0):void 0!==t.mozDash?(t.mozDash=[e,i],!0):t.webkitLineDash&&0===t.webkitLineDash.length?(t.webkitLineDash=[e,i],!0):!1}function dashOff(t){t.setLineDash?t.setLineDash([]):t.mozDash?t.mozDash=null:t.webkitLineDash&&(t.webkitLineDash=[])}function getKeyCode(t){return t=window.event||t,t=t.charCode||t.keyCode}function setKeypressHandler(t){window.addEventListener?window.addEventListener("keypress",t,!1):window.attachEvent&&window.attachEvent("onkeypress",t)}var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;!function(){function t(){throw document&&document.createTextNode("").splitText(1),new RangeError("INDEX_SIZE_ERR")}function e(t){if(Object.getOwnPropertyNames&&Object.defineProperty){var e,i=Object.getOwnPropertyNames(t);for(e=0;e<i.length;e+=1)Object.defineProperty(t,i[e],{value:t[i[e]],writable:!1,enumerable:!1,configurable:!1})}}function i(t){function e(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(i){t._setter(e,i)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var i;for(i=0;i<t.length;i+=1)e(i)}}function n(t){return[255&t]}function a(t){return P(t[0],8)}function r(t){return[255&t]}function o(t){return R(t[0],8)}function s(t){return[t>>8&255,255&t]}function l(t){return P(t[0]<<8|t[1],16)}function h(t){return[t>>8&255,255&t]}function d(t){return R(t[0]<<8|t[1],16)}function c(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function u(t){return P(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function x(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function f(t){return R(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function m(t){var e=[];for(t=t.join("");t.length;)e.push(parseInt(t.substring(0,8),2)),t=t.substring(8);return e}function p(t){var e,i,n=[];for(e=t.length;e;e-=1)for(b=t[e-1],i=8;i;i-=1)n.push(b%2?1:0),b>>=1;return n.reverse(),n}function y(t){return[255&t]}function g(t){return P(t[0],8)}function _(t){return[255&t]}function v(t){return R(t[0],8)}function w(t){return[255&t,t>>8&255]}function M(t){return P(t[1]<<8|t[0],16)}function k(t){return[255&t,t>>8&255]}function E(t){return R(t[1]<<8|t[0],16)}function S(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function A(t){return P(t[3]<<24|t[2]<<16|t[1]<<8|t[0],32)}function L(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function C(t){return R(t[3]<<24|t[2]<<16|t[1]<<8|t[0],32)}function z(t){var e=[];for(t=t.join("");t.length;)e.push(parseInt(t.substring(t.length-8,t.length),2)),t=t.substring(0,t.length-8);return e}function T(t){var e,i,n=[];for(e=0;e<t.length;e++)for(b=t[e],i=8;i;i-=1)n.push(b%2?1:0),b>>=1;return n.reverse(),n}function P(t,e){var i=32-e;return t<<i>>i}function R(t,e){var i=32-e;return t<<i>>>i}function B(t,e,i){var n,a,r,o=(1<<e-1)-1;for(isNaN(t)?(a=(1<<o)-1,o=Math.pow(2,i-1),n=0):1/0===t||-(1/0)===t?(a=(1<<o)-1,o=0,n=0>t?1:0):0===t?(o=a=0,n=-(1/0)===1/t?1:0):(n=0>t,t=Math.abs(t),t>=Math.pow(2,1-o)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=r+o,o=Math.round(t*Math.pow(2,i-r)-Math.pow(2,i))):(a=0,o=Math.round(t/Math.pow(2,1-o-i)))),t=[];i;i-=1)t.push(o%2?1:0),o=Math.floor(o/2);for(i=e;i;i-=1)t.push(a%2?1:0),a=Math.floor(a/2);return t.push(n?1:0),t.reverse(),Q(t)}function D(t,e,i){var n,a,r=[],r=tt(t);return n=r.join(""),t=(1<<e-1)-1,r=parseInt(n.substring(0,1),2)?-1:1,a=parseInt(n.substring(1,1+e),2),n=parseInt(n.substring(1+e),2),a===(1<<e)-1?0!==n?NaN:1/0*r:a>0?r*Math.pow(2,a-t)*(1+n/Math.pow(2,i)):0!==n?r*Math.pow(2,-(t-1))*(n/Math.pow(2,i)):0>r?-0:0}function G(t){return D(t,11,52)}function I(t){return B(t,11,52)}function N(t){return D(t,8,23)}function O(t){return B(t,8,23)}var F={ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(t,e,i){i.hasOwnProperty("get")&&t.__defineGetter__(e,i.get),i.hasOwnProperty("set")&&t.__defineSetter__(e,i.set)});var U=window.BIG_ENDIAN_ARRAYBUFFERS?n:y,H=window.BIG_ENDIAN_ARRAYBUFFERS?a:g,W=window.BIG_ENDIAN_ARRAYBUFFERS?r:_,Y=window.BIG_ENDIAN_ARRAYBUFFERS?o:v,X=window.BIG_ENDIAN_ARRAYBUFFERS?s:w,V=window.BIG_ENDIAN_ARRAYBUFFERS?l:M,Z=window.BIG_ENDIAN_ARRAYBUFFERS?h:k,K=window.BIG_ENDIAN_ARRAYBUFFERS?d:E,q=window.BIG_ENDIAN_ARRAYBUFFERS?c:S,j=window.BIG_ENDIAN_ARRAYBUFFERS?u:A,$=window.BIG_ENDIAN_ARRAYBUFFERS?x:L,J=window.BIG_ENDIAN_ARRAYBUFFERS?f:C,Q=window.BIG_ENDIAN_ARRAYBUFFERS?m:z,tt=window.BIG_ENDIAN_ARRAYBUFFERS?p:T;ArrayBuffer||function(){function n(n,a,r){var o;return o=function(n,a,r){var s,l,h;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===o)for(s=arguments[0],this.length=s.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),l=this.byteOffset=0;l<this.length;l+=1)this._setter(l,s._getter(l));else if("object"!=typeof arguments[0]||arguments[0]instanceof ArrayBuffer){if(!("object"==typeof arguments[0]&&arguments[0]instanceof ArrayBuffer))throw new TypeError("Unexpected argument type(s)");if(this.buffer=n,this.byteOffset=F.ToUint32(a),this.byteOffset>this.buffer.byteLength&&t(),this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");3>arguments.length?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&t(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=F.ToUint32(r),this.byteLength=this.length*this.BYTES_PER_ELEMENT),this.byteOffset+this.byteLength>this.buffer.byteLength&&t()}else for(s=arguments[0],this.length=F.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),l=this.byteOffset=0;l<this.length;l+=1)h=s[l],this._setter(l,Number(h));else{if(this.length=F.ToInt32(arguments[0]),0>r)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),this.byteOffset=0}this.constructor=o,e(this),i(this)},o.prototype=new ArrayBufferView,o.prototype.BYTES_PER_ELEMENT=n,o.prototype.emulated=!0,o.prototype._pack=a,o.prototype._unpack=r,o.BYTES_PER_ELEMENT=n,o.prototype._getter=function(t){if(1>arguments.length)throw new SyntaxError("Not enough arguments");if(t=F.ToUint32(t),!(t>=this.length)){var e,i,n=[];for(e=0,i=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,i+=1)n.push(this.buffer._bytes[i]);return this._unpack(n)}},o.prototype.get=o.prototype._getter,o.prototype._setter=function(t,e){if(2>arguments.length)throw new SyntaxError("Not enough arguments");if(t=F.ToUint32(t),!(t>=this.length)){var i,n,a=this._pack(e);for(i=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,n+=1)this.buffer._bytes[n]=a[i]}},o.prototype.set=function(e,i){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var n,a,r,o,s,l;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor)if(n=arguments[0],a=F.ToUint32(arguments[1]),a+n.length>this.length&&t(),l=this.byteOffset+a*this.BYTES_PER_ELEMENT,a=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(r=[],o=0,s=n.byteOffset;a>o;o+=1,s+=1)r[o]=n.buffer._bytes[s];for(o=0;a>o;o+=1,l+=1)this.buffer._bytes[l]=r[o]}else for(o=0,s=n.byteOffset;a>o;o+=1,s+=1,l+=1)this.buffer._bytes[l]=n.buffer._bytes[s];else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");for(n=arguments[0],r=F.ToUint32(n.length),a=F.ToUint32(arguments[1]),a+r>this.length&&t(),o=0;r>o;o+=1)s=n[o],this._setter(a+o,Number(s))}},o.prototype.subarray=function(t,e){t=F.ToInt32(t),e=F.ToInt32(e),1>arguments.length&&(t=0),2>arguments.length&&(e=this.length),0>t&&(t=this.length+t),0>e&&(e=this.length+e);var i=this.length;return t=0>t?0:t>i?i:t,i=this.length,i=(0>e?0:e>i?i:e)-t,0>i&&(i=0),new this.constructor(this.buffer,t*this.BYTES_PER_ELEMENT,i)},o}ArrayBuffer=function(t){if(t=F.ToInt32(t),0>t)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");for(this.byteLength=t,this._bytes=[],this._bytes.length=t,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;e(this)},ArrayBuffer.isNative=!1,ArrayBufferView=function(){},Int8Array=Int8Array||n(1,U,H),Uint8Array=Uint8Array||n(1,W,Y),Int16Array=Int16Array||n(2,X,V),Uint16Array=Uint16Array||n(2,Z,K),Int32Array=Int32Array||n(4,q,j),Uint32Array=Uint32Array||n(4,$,J),Float32Array=Float32Array||n(4,O,N),Float64Array=Float64Array||n(8,I,G)}(),DataView||function(){function i(t,e){return"function"==typeof t.get?t.get(e):t[e]}function n(e){return function(n,a){n=F.ToUint32(n),n+e.BYTES_PER_ELEMENT>this.byteLength&&t(),n+=this.byteOffset;var o,s=new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT),l=[];for(o=0;o<e.BYTES_PER_ELEMENT;o+=1)l.push(i(s,o));return Boolean(a)===Boolean(r)&&l.reverse(),i(new e(new Uint8Array(l).buffer),0)}}function a(e){return function(n,a,o){n=F.ToUint32(n),n+e.BYTES_PER_ELEMENT>this.byteLength&&t(),a=new e([a]),a=new Uint8Array(a.buffer);var s,l=[];for(s=0;s<e.BYTES_PER_ELEMENT;s+=1)l.push(i(a,s));Boolean(o)===Boolean(r)&&l.reverse(),new Uint8Array(this.buffer,n,e.BYTES_PER_ELEMENT).set(l)}}var r=function(){var t=new Uint16Array([4660]),t=new Uint8Array(t.buffer);return 18===i(t,0)}();DataView=function(i,n,a){if(!("object"==typeof i&&i instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=i,this.byteOffset=F.ToUint32(n),this.byteOffset>this.buffer.byteLength&&t(),this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:F.ToUint32(a),this.byteOffset+this.byteLength>this.buffer.byteLength&&t(),e(this)},ArrayBufferView&&(DataView.prototype=new ArrayBufferView),DataView.prototype.getUint8=n(Uint8Array),DataView.prototype.getInt8=n(Int8Array),DataView.prototype.getUint16=n(Uint16Array),DataView.prototype.getInt16=n(Int16Array),DataView.prototype.getUint32=n(Uint32Array),DataView.prototype.getInt32=n(Int32Array),DataView.prototype.getFloat32=n(Float32Array),DataView.prototype.getFloat64=n(Float64Array),DataView.prototype.setUint8=a(Uint8Array),DataView.prototype.setInt8=a(Int8Array),DataView.prototype.setUint16=a(Uint16Array),DataView.prototype.setInt16=a(Int16Array),DataView.prototype.setUint32=a(Uint32Array),DataView.prototype.setInt32=a(Int32Array),DataView.prototype.setFloat32=a(Float32Array),DataView.prototype.setFloat64=a(Float64Array)}()}(),window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(t,e){var i=new Uint8Array(this);void 0===e&&(e=i.length);for(var n=new ArrayBuffer(e-t),a=new Uint8Array(n),r=0;r<a.length;r++)a[r]=i[r+t];return n}),Array.prototype.remove=function(t,e){var i=this.slice((e||t)+1||this.length);return this.length=0>t?this.length+t:t,this.push.apply(this,i)},window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),window.cancelAnimFrame=function(t){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(t){window.clearTimeout(t)}}(),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(t,e,i){if(!(t instanceof ArrayBuffer))throw"Invalid type";var n=new DataView(t),a=[];for(t=(t.byteLength-e)/8,a.length=void 0===i?t:Math.min(i,t),i=0;i<a.length;i++)a[i]=n.getFloat64(8*i+e,!0);return a.subarray=function(t,e){return a.slice(t,e)},a}}()),function(){var t=function(){};if(window.console||(window.console={log:t,info:t,warn:t,debug:t,error:t}),new Int8Array([0,1,0]).subarray(1).subarray(1)[0]){var e=function(t,e){return 0===arguments.length?(t=0,e=this.length):(0>t&&(t+=this.length),t=Math.max(0,Math.min(this.length,t)),1===arguments.length?e=this.length:(0>e&&(e+=this.length),e=Math.max(t,Math.min(this.length,e)))),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,e-t)};[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(t){t.prototype.subarray=e})}}(),function(t,e){function i(e,i,o,s){e[n](r+i,"wheel"===a?o:function(e){!e&&(e=t.event);var i={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"===a?(i.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(i.deltaX=-.025*e.wheelDeltaX)):i.deltaY=e.detail,o(i)},s||!1)}var n,a,r="";t.addEventListener?n="addEventListener":(n="attachEvent",r="on"),a="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",t.addWheelListener=function(t,e,n){i(t,a,e,n),"DOMMouseScroll"===a&&i(t,"MozMousePixelScroll",e,n)}}(window,document),function(t){function e(t){if(t=new Uint8Array(t),d)return String.fromCharCode.apply(null,t);for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e}function i(t){if(this.file_name=this.file=null,this.offset=0,this.buf=t,null!=this.buf){t=new DataView(this.buf),this.version=e(this.buf.slice(0,4)),this.headrep=e(this.buf.slice(4,8)),this.datarep=e(this.buf.slice(8,12));var i="EEEI"===this.headrep,n="EEEI"===this.datarep;this.type=t.getUint32(48,i),this["class"]=this.type/1e3,this.format=e(this.buf.slice(52,54)),this.timecode=t.getFloat64(56,i),1===this["class"]?(this.xstart=t.getFloat64(256,i),this.xdelta=t.getFloat64(264,i),this.xunits=t.getInt32(272,i),this.yunits=t.getInt32(296,i),this.subsize=1):2===this["class"]&&(this.xstart=t.getFloat64(256,i),this.xdelta=t.getFloat64(264,i),this.xunits=t.getInt32(272,i),this.subsize=t.getInt32(276,i),this.ystart=t.getFloat64(280,i),this.ydelta=t.getFloat64(288,i),this.yunits=t.getInt32(296,i)),this.data_start=t.getFloat64(32,i),this.data_size=t.getFloat64(40,i),this.setData(this.buf,this.data_start,this.data_start+this.data_size,n)}}function n(t){var e=document.createElement("a");e.href=t;for(var i,n=e.protocol.replace(":",""),a=e.hostname,r=e.port,o=e.search,s={},l=e.search.replace(/^\?/,"").split("&"),h=l.length,d=0;h>d;d++)l[d]&&(i=l[d].split("="),s[i[0]]=i[1]);return{source:t,protocol:n,host:a,port:r,query:o,params:s,file:(e.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function a(t,e,i){i=i||1024;var n=0,a=new ArrayBuffer(t.length),r=new Uint8Array(a),o=function(){for(var s=n+i;s>n;n++)r[n]=255&t.charCodeAt(n);n>=t.length?e(a):setTimeout(o,0)};setTimeout(o,0)}function r(t){this.options=t}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var o=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),t=new Uint8Array(t);if(e[0]=3735928559,239===t[0])return"LE";if(222===t[0])return"BE";throw Error("unknown endianness")}(),s={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},l={P:.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},h={P:null,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},d=!0;try{var c=new Uint8Array(new ArrayBuffer(4));c[0]=66,c[1]=76,c[2]=85,c[3]=69,"BLUE"!==String.fromCharCode.apply(null,c)&&(d=!1)}catch(u){d=!1}i.prototype={setData:function(t,e,i,n){if(1===this["class"]?(this.spa=s[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this["class"]&&(this.spa=s[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa),void 0===n&&(n="LE"===o),"LE"===o&&!n)throw"Not supported "+o+" "+n;if("BE"===o&&this.littleEndianData)throw"Not supported "+o+" "+n;t?(this.dview=e&&i?this.createArray(t,e,(i-e)/this.bps):this.createArray(t),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},createArray:function(t,e,i){var n=h[this.format[1]];if(void 0===n)throw"unknown format "+this.format[1];return void 0===e&&(e=0),void 0===i&&(i=t.length||t.byteLength/l[this.format[1]]),t?new n(t,e,i):new n(i)}},r.prototype={readheader:function(t,e){var n=new FileReader,a=t.webkitSlice(0,512);n.onloadend=function(t){return function(a){a.target.error?e(null):(a=new i(n.result),a.file=t,e(a))}}(t),n.readAsArrayBuffer(a)},read:function(t,e){var n=new FileReader;n.onloadend=function(t){return function(a){a.target.error?e(null):(a=new i(n.result),a.file=t,a.file_name=t.name,e(a))}}(t),n.readAsArrayBuffer(t)},read_http:function(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.overrideMimeType("text/plain; charset=x-user-defined"),r.onload=function(o){if(4!==r.readyState||200!==r.status&&0!==r.status)e(null);else if(o=null,r.response){o=r.response,o=new i(o),n(t);var s=n(t);o.file_name=s.file,e(o)}else r.responseText&&a(r.responseText,function(a){a=new i(a),n(t);var r=n(t);a.file_name=r.file,e(a)})},r.onerror=function(t){e(null)},r.send(null)}},t.BlueHeader=t.BlueHeader||i,t.BlueFileReader=t.BlueFileReader||r}(this),function(t){function e(t,a){if(t=t?t:"",a=a||{},"object"==typeof t&&t.hasOwnProperty("_tc_id"))return t;var h=i(t),d=h.r,c=h.g,x=h.b,m=h.a,p=f(100*m)/100,y=a.format||h.format;return 1>d&&(d=f(d)),1>c&&(c=f(c)),1>x&&(x=f(x)),{ok:h.ok,format:y,_tc_id:u++,alpha:m,toHsv:function(){var t=r(d,c,x);return{h:360*t.h,s:t.s,v:t.v,a:m}},toHsvString:function(){var t=r(d,c,x),e=f(360*t.h),i=f(100*t.s),t=f(100*t.v);return 1==m?"hsv("+e+", "+i+"%, "+t+"%)":"hsva("+e+", "+i+"%, "+t+"%, "+p+")"},toHsl:function(){var t=n(d,c,x);return{h:360*t.h,s:t.s,l:t.l,a:m}},toHslString:function(){var t=n(d,c,x),e=f(360*t.h),i=f(100*t.s),t=f(100*t.l);return 1==m?"hsl("+e+", "+i+"%, "+t+"%)":"hsla("+e+", "+i+"%, "+t+"%, "+p+")"},toHex:function(t){return o(d,c,x,t)},toHexString:function(t){return"#"+o(d,c,x,t)},toRgb:function(){return{r:f(d),g:f(c),b:f(x),a:m}},toRgbString:function(){return 1==m?"rgb("+f(d)+", "+f(c)+", "+f(x)+")":"rgba("+f(d)+", "+f(c)+", "+f(x)+", "+p+")"},toPercentageRgb:function(){return{r:f(100*s(d,255))+"%",g:f(100*s(c,255))+"%",b:f(100*s(x,255))+"%",a:m}},toPercentageRgbString:function(){return 1==m?"rgb("+f(100*s(d,255))+"%, "+f(100*s(c,255))+"%, "+f(100*s(x,255))+"%)":"rgba("+f(100*s(d,255))+"%, "+f(100*s(c,255))+"%, "+f(100*s(x,255))+"%, "+p+")"},toName:function(){return 0===m?"transparent":_[o(d,c,x,!0)]||!1},toFilter:function(t){var i=o(d,c,x),n=i,r=Math.round(255*parseFloat(m)).toString(16),s=r,h=a&&a.gradientType?"GradientType = 1, ":"";return t&&(t=e(t),n=t.toHex(),s=Math.round(255*parseFloat(t.alpha)).toString(16)),"progid:DXImageTransform.Microsoft.gradient("+h+"startColorstr=#"+l(r)+i+",endColorstr=#"+l(s)+n+")"},toString:function(t){var e=!!t;t=t||this.format;var i=!1,e=!e&&1>m&&m>0&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return"rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),e?this.toRgbString():i||this.toHexString()}}}function i(t){var e={r:0,g:0,b:0},i=1,n=!1,r=!1;if("string"==typeof t)t:{t=t.replace(d,"").replace(c,"").toLowerCase();var o=!1;if(g[t])t=g[t],o=!0;else if("transparent"==t){t={r:0,g:0,b:0,a:0,format:"name"};break t}var l;t=(l=b.rgb.exec(t))?{r:l[1],g:l[2],b:l[3]}:(l=b.rgba.exec(t))?{r:l[1],g:l[2],b:l[3],a:l[4]}:(l=b.hsl.exec(t))?{h:l[1],s:l[2],l:l[3]}:(l=b.hsla.exec(t))?{h:l[1],s:l[2],l:l[3],a:l[4]}:(l=b.hsv.exec(t))?{h:l[1],s:l[2],v:l[3]}:(l=b.hex6.exec(t))?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16),format:o?"name":"hex"}:(l=b.hex3.exec(t))?{r:parseInt(l[1]+""+l[1],16),g:parseInt(l[2]+""+l[2],16),b:parseInt(l[3]+""+l[3],16),format:o?"name":"hex"}:!1}if("object"==typeof t){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))e=t.g,n=t.b,e={r:255*s(t.r,255),g:255*s(e,255),b:255*s(n,255)},n=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb";else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")){t.s=h(t.s),t.v=h(t.v);var r=t.h,o=t.s,e=t.v,r=6*s(r,360),o=s(o,100),e=s(e,100),n=x.floor(r),u=r-n,r=e*(1-o);l=e*(1-u*o),o=e*(1-(1-u)*o),n%=6,e={r:255*[e,l,r,r,o,e][n],g:255*[o,e,e,l,r,r][n],b:255*[r,r,o,e,e,l][n]},n=!0,r="hsv"}else t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=h(t.s),t.l=h(t.l),e=a(t.h,t.s,t.l),n=!0,r="hsl");t.hasOwnProperty("a")&&(i=t.a)}return i=parseFloat(i),(isNaN(i)||0>i||i>1)&&(i=1),{ok:n,format:t.format||r,r:m(255,p(e.r,0)),g:m(255,p(e.g,0)),b:m(255,p(e.b,0)),a:i}}function n(t,e,i){t=s(t,255),e=s(e,255),i=s(i,255);var n,a=p(t,e,i),r=m(t,e,i),o=(a+r)/2;if(a==r)n=r=0;else{var l=a-r,r=o>.5?l/(2-a-r):l/(a+r);switch(a){case t:n=(e-i)/l+(i>e?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:o}}function a(t,e,i){function n(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}if(t=s(t,360),e=s(e,100),i=s(i,100),0===e)i=e=t=i;else{var a=.5>i?i*(1+e):i+e-i*e,r=2*i-a;i=n(r,a,t+1/3),e=n(r,a,t),t=n(r,a,t-1/3)}return{r:255*i,g:255*e,b:255*t}}function r(t,e,i){t=s(t,255),e=s(e,255),i=s(i,255);var n,a=p(t,e,i),r=m(t,e,i),o=a-r;if(a==r)n=0;else{switch(a){case t:n=(e-i)/o+(i>e?6:0);break;case e:n=(i-t)/o+2;break;case i:n=(t-e)/o+4}n/=6}return{h:n,s:0===a?0:o/a,v:a}}function o(t,e,i,n){return t=[l(f(t).toString(16)),l(f(e).toString(16)),l(f(i).toString(16))],n&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function s(t,e){var i=t;return"string"==typeof i&&-1!=i.indexOf(".")&&1===parseFloat(i)&&(t="100%"),i="string"==typeof t&&-1!=t.indexOf("%"),t=m(e,p(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),1e-6>x.abs(t-e)?1:t%e/parseFloat(e)}function l(t){return 1==t.length?"0"+t:""+t}function h(t){return 1>=t&&(t=100*t+"%"),t}var d=/^[\s,#]+/,c=/\s+$/,u=0,x=Math,f=x.round,m=x.min,p=x.max,y=x.random;e.fromRatio=function(t,i){if("object"==typeof t){var n,a={};for(n in t)t.hasOwnProperty(n)&&(a[n]="a"===n?t[n]:h(t[n]));t=a}return e(t,i)},e.equals=function(t,i){return t&&i?e(t).toRgbString()==e(i).toRgbString():!1},e.random=function(){return e.fromRatio({r:y(),g:y(),b:y()})},e.desaturate=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s-=i/100,n.s=m(1,p(0,n.s)),e(n)},e.saturate=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s+=i/100,n.s=m(1,p(0,n.s)),e(n)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l+=i/100,n.l=m(1,p(0,n.l)),e(n)},e.darken=function(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l-=i/100,n.l=m(1,p(0,n.l)),e(n)},e.complement=function(t){return t=e(t).toHsl(),t.h=(t.h+180)%360,e(t)},e.triad=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+120)%360,s:i.s,l:i.l}),e({h:(n+240)%360,s:i.s,l:i.l})]},e.tetrad=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+90)%360,s:i.s,l:i.l}),e({h:(n+180)%360,s:i.s,l:i.l}),e({h:(n+270)%360,s:i.s,l:i.l})]},e.splitcomplement=function(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+72)%360,s:i.s,l:i.l}),e({h:(n+216)%360,s:i.s,l:i.l})]},e.analogous=function(t,i,n){i=i||6,n=n||30;var a=e(t).toHsl();for(n=360/n,t=[e(t)],a.h=(a.h-(n*i>>1)+720)%360;--i;)a.h=(a.h+n)%360,t.push(e(a));return t},e.monochromatic=function(t,i){i=i||6;for(var n=e(t).toHsv(),a=n.h,r=n.s,n=n.v,o=[],s=1/i;i--;)o.push(e({h:a,s:r,v:n})),n=(n+s)%1;return o},e.readability=function(t,i){var n=e(t).toRgb(),a=e(i).toRgb(),r=(299*n.r+587*n.g+114*n.b)/1e3,o=(299*a.r+587*a.g+114*a.b)/1e3,n=Math.max(n.r,a.r)-Math.min(n.r,a.r)+Math.max(n.g,a.g)-Math.min(n.g,a.g)+Math.max(n.b,a.b)-Math.min(n.b,a.b);return{brightness:Math.abs(r-o),color:n}},e.readable=function(t,i){var n=e.readability(t,i);return 125<n.brightness&&500<n.color},e.mostReadable=function(t,i){for(var n=null,a=0,r=!1,o=0;o<i.length;o++){var s=e.readability(t,i[o]),l=125<s.brightness&&500<s.color,s=s.brightness/125*3+s.color/500;(l&&!r||l&&r&&s>a||!l&&!r&&s>a)&&(r=l,a=s,n=e(i[o]))}return n};var g=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=e.hexNames=function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[t[e]]=e);return i}(g),b={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};t.tinycolor=e}(this),function(){var t=[];(window.CanvasInput=function(e){var i=this;e=e?e:{},i._canvas=e.canvas||null,i._ctx=i._canvas?i._canvas.getContext("2d"):null,i._x=e.x||0,i._y=e.y||0,i._extraX=e.extraX||0,i._extraY=e.extraY||0,i._fontSize=e.fontSize||14,i._fontFamily=e.fontFamily||"Arial",i._fontColor=e.fontColor||"#000",i._placeHolderColor=e.placeHolderColor||"#bfbebd",i._fontWeight=e.fontWeight||"normal",i._fontStyle=e.fontStyle||"normal",i._readonly=e.readonly||!1,i._maxlength=e.maxlength||null,i._width=e.width||150,i._height=e.height||i._fontSize,i._padding=0<=e.padding?e.padding:5,i._borderWidth=0<=e.borderWidth?e.borderWidth:1,i._borderColor=e.borderColor||"#959595",i._borderRadius=0<=e.borderRadius?e.borderRadius:3,i._backgroundImage=e.backgroundImage||"",i._boxShadow=e.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",i._innerShadow=e.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",i._selectionColor=e.selectionColor||"rgba(179, 212, 253, 0.8)",i._placeHolder=e.placeHolder||"",i._value=e.value||i._placeHolder,i._onsubmit=e.onsubmit||function(){},i._onkeydown=e.onkeydown||function(){},i._onkeyup=e.onkeyup||function(){},i._onfocus=e.onfocus||function(){},i._onblur=e.onblur||function(){},i._cursor=!1,i._cursorPos=0,i._hasFocus=!1,i._selection=[0,0],i._wasOver=!1,i._renderOnReturn=void 0!==e.renderOnReturn?e.renderOnReturn:!0,i._disableBlur=e.disableBlur||!1,i._tabToClear=e.tabToClear||!1,i.boxShadow(i._boxShadow,!0),i._calcWH(),i._renderCanvas=document.createElement("canvas"),i._renderCanvas.setAttribute("width",i.outerW),i._renderCanvas.setAttribute("height",i.outerH),i._renderCtx=i._renderCanvas.getContext("2d"),i._shadowCanvas=document.createElement("canvas"),i._shadowCanvas.setAttribute("width",i._width+2*i._padding),i._shadowCanvas.setAttribute("height",i._height+2*i._padding),i._shadowCtx=i._shadowCanvas.getContext("2d"),"undefined"!=typeof e.backgroundGradient?(i._backgroundColor=i._renderCtx.createLinearGradient(0,0,0,i.outerH),i._backgroundColor.addColorStop(0,e.backgroundGradient[0]),i._backgroundColor.addColorStop(1,e.backgroundGradient[1])):i._backgroundColor=e.backgroundColor||"#fff",i._canvas&&(i.mousemoveCanvasListener=function(t){t=t||window.event,i.mousemove(t,i)},i._canvas.addEventListener("mousemove",i.mousemoveCanvasListener,!1),i.mousedownCanvasListener=function(t){t=t||window.event,i.mousedown(t,i)},i._canvas.addEventListener("mousedown",i.mousedownCanvasListener,!1),i.mouseupCanvasListener=function(t){t=t||window.event,i.mouseup(t,i)},i._canvas.addEventListener("mouseup",i.mouseupCanvasListener,!1)),i.mouseupWindowListener=function(t){i._hasFocus&&!i._mouseDown&&i.blur()},window.addEventListener("mouseup",i.mouseupWindowListener,!0),i.keydownWindowListener=function(t){t=t||window.event,i._hasFocus&&i.keydown(t,i)},window.addEventListener("keydown",i.keydownWindowListener,!1),i.keyupWindowListener=function(t){t=t||window.event,i._hasFocus&&i._onkeyup(t,i)},window.addEventListener("keyup",i.keyupWindowListener,!1),i.pasteWindowListener=function(t){if(t=t||window.event,i._hasFocus){t=t.clipboardData.getData("text/plain");var e=i._value.substr(0,i._cursorPos),n=i._value.substr(i._cursorPos);i._value=e+t+n,i._cursorPos+=t.length,i.render()}},window.addEventListener("paste",i.pasteWindowListener,!1),t.push(i),i._inputsIndex=t.length-1,i.render()}).prototype={canvas:function(t){return"undefined"!=typeof t?(this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(t){return"undefined"!=typeof t?(this._x=t,
this.render()):this._x},y:function(t){return"undefined"!=typeof t?(this._y=t,this.render()):this._y},extraX:function(t){return"undefined"!=typeof t?(this._extraX=t,this.render()):this._extraX},extraY:function(t){return"undefined"!=typeof t?(this._extraY=t,this.render()):this._extraY},fontSize:function(t){return"undefined"!=typeof t?(this._fontSize=t,this.render()):this._fontSize},fontFamily:function(t){return"undefined"!=typeof t?(this._fontFamily=t,this.render()):this._fontFamily},fontColor:function(t){return"undefined"!=typeof t?(this._fontColor=t,this.render()):this._fontColor},placeHolderColor:function(t){return"undefined"!=typeof t?(this._placeHolderColor=t,this.render()):this._placeHolderColor},fontWeight:function(t){return"undefined"!=typeof t?(this._fontWeight=t,this.render()):this._fontWeight},fontStyle:function(t){return"undefined"!=typeof t?(this._fontStyle=t,this.render()):this._fontStyle},width:function(t){return"undefined"!=typeof t?(this._width=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(t){return"undefined"!=typeof t?(this._height=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(t){return"undefined"!=typeof t?(this._padding=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(t){return"undefined"!=typeof t?(this._borderWidth=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(t){return"undefined"!=typeof t?(this._borderColor=t,this.render()):this._borderColor},borderRadius:function(t){return"undefined"!=typeof t?(this._borderRadius=t,this.render()):this._borderRadius},backgroundColor:function(t){return"undefined"!=typeof t?(this._backgroundColor=t,this.render()):this._backgroundColor},backgroundGradient:function(t){return"undefined"!=typeof t?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,t[0]),this._backgroundColor.addColorStop(1,t[1]),this.render()):this._backgroundColor},boxShadow:function(t,e){if("undefined"==typeof t)return this._boxShadow;var i=t.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(i[0],10),y:"none"===this._boxShadow?0:parseInt(i[1],10),blur:"none"===this._boxShadow?0:parseInt(i[2],10),color:"none"===this._boxShadow?"":i[3]},this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x,this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y,this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),e?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(t){return"undefined"!=typeof t?(this._innerShadow=t,this.render()):this._innerShadow},selectionColor:function(t){return"undefined"!=typeof t?(this._selectionColor=t,this.render()):this._selectionColor},placeHolder:function(t){return"undefined"!=typeof t?(this._placeHolder=t,this.render()):this._placeHolder},value:function(t){return"undefined"!=typeof t?(this._value=t,this.focus()):this._value},onsubmit:function(t){return"undefined"!=typeof t?(this._onsubmit=t,this):void this._onsubmit()},onkeydown:function(t){return"undefined"!=typeof t?(this._onkeydown=t,this):void this._onkeydown()},onkeyup:function(t){return"undefined"!=typeof t?(this._onkeyup=t,this):void this._onkeyup()},focus:function(t){var e,i=this;if(!i._readonly){i._hasFocus||i._onfocus(i),i._selectionUpdated?delete i._selectionUpdated:i._selection=[0,0],i._cursorPos="number"==typeof t?t:i._clipText().length,i._placeHolder===i._value&&(i._value=""),i._hasFocus=!0,i._cursor=!0,i._cursorInterval&&clearInterval(i._cursorInterval),i._cursorInterval=setInterval(function(){i._cursor=!i._cursor,i.render()},500),t=navigator.userAgent.toLowerCase(),t=0<=t.indexOf("chrome")&&0<=t.indexOf("mobile")&&0<=t.indexOf("android");var n="undefined"!=typeof window.orientation;return n&&!t&&document&&document.createElement&&(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=i._x+i._extraX+(i._canvas?i._canvas.offsetLeft:0)+"px",e.style.top=i._y+i._extraY+(i._canvas?i._canvas.offsetTop:0)+"px",e.style.width=i._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",function(){i.blur(i)},!1)):n&&i.value(prompt(i._placeHolder)||""),i.render()}},blur:function(t){return t=t||this,t._disableBlur||(t._onblur(t),t._cursorInterval&&clearInterval(t._cursorInterval),t._hasFocus=!1,t._cursor=!1,t._selection=[0,0],""===t._value&&(t._value=t._placeHolder)),t.render()},disableBlur:function(t){(t||this)._disableBlur=!0},enableBlur:function(t){(t||this)._disableBlur=!1},keydown:function(e,i){var n,a=e.which,r=e.shiftKey,o=null;if(i._hasFocus){if(i._onkeydown(e,i),65===a&&(e.ctrlKey||e.metaKey))return i._selection=[0,i._value.length],e.preventDefault(),i.render();if(17===a||e.metaKey||e.ctrlKey)return i;if(e.preventDefault(),8===a)!i._clearSelection()&&0<i._cursorPos&&(r=i._value.substr(0,i._cursorPos-1),n=i._value.substr(i._cursorPos,i._value.length),i._value=r+n,i._cursorPos--);else if(37===a)0<i._cursorPos&&(i._cursorPos--,i._cursor=!0,i._selection=[0,0]);else if(39===a)i._cursorPos<i._value.length&&(i._cursorPos++,i._cursor=!0,i._selection=[0,0]);else if(13===a)i._onsubmit(e,i);else if(9===a)if(i._tabToClear)i._value="",i._cursorPos=0;else{var s=t[i._inputsIndex+1]?i._inputsIndex+1:0;s!==i._inputsIndex&&(i.blur(),setTimeout(function(){t[s].focus()},10))}else if(o=i._mapCodeToKey(r,a)){if(i._clearSelection(),i._maxlength&&i._maxlength<=i._value.length)return;r=i._value?i._value.substr(0,i._cursorPos):"",n=i._value?i._value.substr(i._cursorPos):"",i._value=r+o+n,i._cursorPos++}return 13==a&&i._renderOnReturn||13!==a?i.render():function(){}}},click:function(t,e){var i=e._mousePos(t),n=i.x,i=i.y;if(e._endSelection)delete e._endSelection,delete e._selectionUpdated;else{if(!(e._canvas&&e._overInput(n,i)||!e._canvas))return e.blur();if(e._mouseDown)return e._mouseDown=!1,e.click(t,e),e.focus(e._clickPos(n,i))}},mousemove:function(t,e){var i=e._mousePos(t),n=i.x,a=i.y;(i=e._overInput(n,a))&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1),e._hasFocus&&0<=e._selectionStart&&(a=e._clickPos(n,a),n=Math.min(e._selectionStart,a),a=Math.max(e._selectionStart,a),i?(e._selection[0]!==n||e._selection[1]!==a)&&(e._selection=[n,a],e.render()):(e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,e.render()))},mousedown:function(t,e){var i=e._mousePos(t),n=i.x,i=i.y,a=e._overInput(n,i);e._mouseDown=a,e._hasFocus&&a&&(e._selectionStart=e._clickPos(n,i))},mouseup:function(t,e){var i=e._mousePos(t),n=i.x,i=i.y,a=e._clickPos(n,i)!==e._selectionStart;e._hasFocus&&0<=e._selectionStart&&e._overInput(n,i)&&a?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart,e.click(t,e)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1),this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1),this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1),window.removeEventListener("keydown",this.keydownWindowListener,!1),window.removeEventListener("keyup",this.keyupWindowListener,!1),window.removeEventListener("mouseup",this.mouseupWindowListener,!0),window.removeEventListener("paste",this.pasteWindowListener,!1),clearInterval(this._cursorInterval),this._canvas.style.cursor="default";for(var e=0;e<t.length;e++)t[e]===this&&t.remove(e)},render:function(){var t=this,e=t._renderCtx,i=t.outerW,n=t.outerH,a=t._borderRadius,r=t._borderWidth,o=t.shadowW,s=t.shadowH;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowOffsetX=t._boxShadow.x,e.shadowOffsetY=t._boxShadow.y,e.shadowBlur=t._boxShadow.blur,e.shadowColor=t._boxShadow.color,0<t._borderWidth&&(e.fillStyle=t._borderColor,t._roundedRect(e,t.shadowL,t.shadowT,i-o,n-s,a),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),t._drawTextBox(function(){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0;var l=t._clipText(),h=t._padding+t._borderWidth+t.shadowT;if(0<t._selection[1]){var d=t._textWidth(l.substring(0,t._selection[0])),c=t._textWidth(l.substring(t._selection[0],t._selection[1]));e.fillStyle=t._selectionColor,e.fillRect(h+d,h,c,t._height)}if(e.fillStyle=t._placeHolder===t._value&&""!==t._value?t._placeHolderColor:t._fontColor,t._cursor&&(d=t._textWidth(l.substring(0,t._cursorPos)),e.fillRect(h+d,h,1,t._height)),d=t._padding+t._borderWidth+t.shadowL,h=Math.round(h+t._height/2),e.font=t._fontStyle+" "+t._fontWeight+" "+t._fontSize+"px "+t._fontFamily,e.textAlign="left",e.textBaseline="middle",e.fillText(l,d,h),c=t._innerShadow.split("px "),l="none"===t._innerShadow?0:parseInt(c[0],10),h="none"===t._innerShadow?0:parseInt(c[1],10),d="none"===t._innerShadow?0:parseInt(c[2],10),c="none"===t._innerShadow?"":c[3],d>0){var u=t._shadowCtx,x=u.canvas.width,f=u.canvas.height;u.clearRect(0,0,x,f),u.shadowBlur=d,u.shadowColor=c,u.shadowOffsetX=0,u.shadowOffsetY=h,u.fillRect(-1*i,-100,3*i,100),u.shadowOffsetX=l,u.shadowOffsetY=0,u.fillRect(x,-1*n,100,3*n),u.shadowOffsetX=0,u.shadowOffsetY=h,u.fillRect(-1*i,f,3*i,100),u.shadowOffsetX=l,u.shadowOffsetY=0,u.fillRect(-100,-1*n,100,3*n),t._roundedRect(e,r+t.shadowL,r+t.shadowT,i-2*r-o,n-2*r-s,a),e.clip(),e.drawImage(t._shadowCanvas,0,0,x,f,r+t.shadowL,r+t.shadowT,x,f)}return t._ctx&&(t._ctx.clearRect(t._x,t._y,e.canvas.width,e.canvas.height),t._ctx.drawImage(t._renderCanvas,t._x,t._y)),t})},_drawTextBox:function(t){var e=this,i=e._renderCtx,n=e.outerW,a=e.outerH,r=e._borderRadius,o=e._borderWidth,s=e.shadowW,l=e.shadowH;if(""===e._backgroundImage)i.fillStyle=e._backgroundColor,e._roundedRect(i,o+e.shadowL,o+e.shadowT,n-2*o-s,a-2*o-l,r),i.fill(),t();else{var h=new Image;h.src=e._backgroundImage,h.onload=function(){i.drawImage(h,0,0,h.width,h.height,o+e.shadowL,o+e.shadowT,n,a),t()}}},_clearSelection:function(){if(0<this._selection[1]){var t=this._selection[0],e=this._selection[1];return this._value=this._value.substr(0,t)+this._value.substr(e),this._cursorPos=t,this._cursorPos=0>this._cursorPos?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(t){t="undefined"==typeof t?this._value:t;var e=this._textWidth(t)/(this._width-this._padding);return(e>1?t.substr(-1*Math.floor(t.length/e)):t)+""},_textWidth:function(t){var e=this._renderCtx;return e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,e.textAlign="left",e.measureText(t).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var t=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,t,e)},_roundedRect:function(t,e,i,n,a,r){2*r>n&&(r=n/2),2*r>a&&(r=a/2),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+a-r),t.quadraticCurveTo(e+n,i+a,e+n-r,i+a),t.lineTo(e+r,i+a),t.quadraticCurveTo(e,i+a,e,i+a-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()},_overInput:function(t,e){var i=t<=this._x+this._extraX+this._width+2*this._padding,n=e>=this._y+this._extraY,a=e<=this._y+this._extraY+this._height+2*this._padding;return t>=this._x+this._extraX&&i&&n&&a},_clickPos:function(t,e){var i=this._value;this._value===this._placeHolder&&(i="");var i=this._clipText(i),n=0,a=i.length;if(t-(this._x+this._extraX)<this._textWidth(i))for(var r=0;r<i.length;r++)if(n+=this._textWidth(i[r]),n>=t-(this._x+this._extraX)){a=r;break}return a},_mousePos:function(t){var e=t.target,i=document.defaultView.getComputedStyle(e,void 0),n=parseInt(i.paddingLeft,10)||0,a=parseInt(i.paddingLeft,10)||0,r=parseInt(i.borderLeftWidth,10)||0,i=parseInt(i.borderLeftWidth,10)||0,o=document.body.parentNode.offsetTop||0,s=document.body.parentNode.offsetLeft||0,l=0,h=0;if("unefined"!=typeof e.offsetParent)do l+=e.offsetLeft,h+=e.offsetTop;while(e=e.offsetParent);return{x:t.pageX-(l+(n+r+s)),y:t.pageY-(h+(a+i+o))}},_mapCodeToKey:function(t,e){for(var i=[8,9,13,16,17,18,20,27,91,92],n="",n=0;n<i.length;n++)if(e===i[n])return;return"boolean"==typeof t&&"number"==typeof e?(i={32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},n=t?e>=65&&90>=e?String.fromCharCode(e):i[e]:e>=65&&90>=e?String.fromCharCode(e).toLowerCase():96===e?"0":97===e?"1":98===e?"2":99===e?"3":100===e?"4":101===e?"5":102===e?"6":103===e?"7":104===e?"8":105===e?"9":188===e?",":190===e?".":191===e?"/":192===e?"`":220===e?"\\":187===e?"=":189===e?"-":222===e?"'":186===e?";":219===e?"[":221===e?"]":String.fromCharCode(e)):void 0}}}(),function(t,e){t.Spinner=e()}(this,function(){function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var a=["opacity",e,~~(100*t),i,n].join("-");i=.01+i/n*100,n=Math.max(1-(1-t)/e*(100-i),t);var r=d.substring(0,d.indexOf("Animation")).toLowerCase();return u[a]||(x.insertRule("@"+(r&&"-"+r+"-"||"")+"keyframes "+a+"{0%{opacity:"+n+"}"+i+"%{opacity:"+t+"}"+(i+.01)+"%{opacity:1}"+(i+e)%100+"%{opacity:"+t+"}100%{opacity:"+n+"}}",x.cssRules.length),u[a]=1),a}function n(t,e){var i,n,a=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<c.length;n++)if(i=c[n]+e,void 0!==a[i])return i;return void 0!==a[e]?e:void 0}function a(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function r(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)void 0===t[i]&&(t[i]=n[i])}return t}function o(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=r(t||{},l.defaults,f))}function h(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}x.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,n){function r(){return a(i("group",{coordsize:h+" "+h,coordorigin:-l+" "+-l}),{width:h,height:h})}function o(t,o,h){e(c,e(a(r(),{rotation:360/n.lines*t+"deg",left:~~o}),e(a(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:h}),i("fill",{color:s(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l=n.length+n.width,h=2*l,d=2*-(n.width+n.length)+"px",c=a(r(),{position:"absolute",top:d,left:d});if(n.shadow)for(d=1;d<=n.lines;d++)o(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d=1;d<=n.lines;d++)o(d);return e(t,c)},l.prototype.opacity=function(t,e,i,n){t=t.firstChild,n=n.shadow&&n.lines||0,t&&e+n<t.childNodes.length&&(t=(t=(t=t.childNodes[e+n])&&t.firstChild)&&t.firstChild)&&(t.opacity=i)}}var d,c=["webkit","Moz","ms","O"],u={},x=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();var i,n,r=this,s=r.opts,l=r.el=a(t(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),h=s.radius+s.length+s.width;if(e&&(e.insertBefore(l,e.firstChild||null),n=o(e),i=o(l),a(l,{left:("auto"==s.left?n.x-i.x+(e.offsetWidth>>1):parseInt(s.left,10)+h)+"px",top:("auto"==s.top?n.y-i.y+(e.offsetHeight>>1):parseInt(s.top,10)+h)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!d){var c,u=0,x=(s.lines-1)*(1-s.direction)/2,f=s.fps,m=f/s.speed,p=(1-s.opacity)/(m*s.trail/100),y=m/s.lines;!function g(){u++;for(var t=0;t<s.lines;t++)c=Math.max(1-(u+(s.lines-t)*y)%m*p,s.opacity),r.opacity(l,t*s.direction+x,c,s);r.timeout=r.el&&setTimeout(g,~~(1e3/f))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,r){function o(e,i){return a(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*h+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,h=0,c=(r.lines-1)*(1-r.direction)/2;h<r.lines;h++)l=a(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:d&&i(r.opacity,r.trail,c+h*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,a(o("#000","0 0 4px #000"),{top:"2px"})),e(n,e(l,o(s(r.color,h),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=a(t("group"),{behavior:"url(#default#VML)"});return!n(m,"transform")&&m.adj?h():d=n(m,"animation"),l}),window.m=window.m||{},function(t,e){var i="undefined";!function(e){t.log=e()}(function(){function t(t,i){var a=t[i];if(a.bind!==e)return t[i].bind(t);if(Function.prototype.bind===e)return n(a,t);try{return Function.prototype.bind.call(t[i],t)}catch(r){return n(a,t)}}function n(t,e){return function(){Function.prototype.apply.apply(t,[e,arguments])}}function a(t){for(var e=0;e<d.length;e++)l[d[e]]=t(d[e])}function r(){return typeof window!==i&&window.document!==e&&window.document.cookie!==e}function o(){try{return typeof window!==i&&window.localStorage!==e}catch(t){return!1}}function s(t){var e,i,n=!1;for(i in l.levels)if(l.levels.hasOwnProperty(i)&&l.levels[i]===t){e=i;break}if(o())try{window.localStorage.mloglevel=e}catch(a){n=!0}else n=!0;n&&r()&&(window.document.cookie="mloglevel="+e+";")}var l={},h=function(){},d=["trace","debug","info","warn","error"],c=/mloglevel=([^;]+)/;return l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.setLevel=function(n){if("number"==typeof n&&n>=0&&n<=l.levels.SILENT)if(s(n),n===l.levels.SILENT)a(function(){return h});else{if(typeof console===i)return a(function(t){return function(){typeof console!==i&&(l.setLevel(n),l[t].apply(l,arguments))}}),"No console available for logging";a(function(a){return n<=l.levels[a.toUpperCase()]?typeof console===i?h:console[a]===e?console.log!==e?t(console,"log"):h:t(console,a):h})}else{if("string"!=typeof n||l.levels[n.toUpperCase()]===e)throw"log.setLevel() called with invalid level: "+n;l.setLevel(l.levels[n.toUpperCase()])}},l.enableAll=function(){l.setLevel(l.levels.TRACE)},l.disableAll=function(){l.setLevel(l.levels.SILENT)},function(){var t;o()&&(t=window.localStorage.mloglevel),t===e&&r()&&(t=(c.exec(window.document.cookie)||[])[1]),l.levels[t]===e&&(t="WARN"),l.setLevel(l.levels[t])}(),l})}(window.m),window.m=window.m||{},function(t,e){function i(t){return(10>t?"0":"")+t}var n={0:["None","U"],1:["Time","sec"],2:["Delay","sec"],3:["Frequency","Hz"],4:["Time code format",""],5:["Distance","m"],6:["Speed","m/s"],7:["Acceleration","m/sec^2"],8:["Jerk","m/sec^3"],9:["Doppler","Hz"],10:["Doppler rate","Hz/sec"],11:["Energy","J"],12:["Power","W"],13:["Mass","g"],14:["Volume","l"],15:["Angular power density","W/ster"],16:["Integrated power density","W/rad"],17:["Spatial power density","W/m^2"],18:["Integrated power density","W/m"],19:["Spectral power density","W/MHz"],20:["Amplitude","U"],21:["Real","U"],22:["Imaginary","U"],23:["Phase","rad"],24:["Phase","deg"],25:["Phase","cycles"],26:["10*Log","U"],27:["20*Log","U"],28:["Magnitude","U"],29:["Unknown","U"],30:["Unknown","U"],31:["General dimensionless",""],32:["Counts",""],33:["Angle","rad"],34:["Angle","deg"],35:["Relative power","dB"],36:["Relative power","dBm"],37:["Relative power","dBW"],38:["Solid angle","ster"],40:["Distance","ft"],41:["Distance","nmi"],42:["Speed","ft/sec"],43:["Speed","nmi/sec"],44:["Speed","knots=nmi/hr"],45:["Acceleration","ft/sec^2"],46:["Acceleration","nmi/sec^2"],47:["Acceleration","knots/sec"],48:["Acceleration","G"],49:["Jerk","G/sec"],50:["Rotation","rps"],51:["Rotation","rpm"],52:["Angular velocity","rad/sec"],53:["Angular velocity","deg/sec"],54:["Angular acceleration","rad/sec^2"],55:["Angular acceleration","deg/sec^2"],60:["Latitude","deg"],61:["Longitude","deg"],62:["Altitude","ft"],63:["Altitude","m"]};t.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]}]},t.PIPESIZE=1048576,t.initialize=function(i,n){var a=new BlueHeader(null);a.version="BLUE",a.size=0,a.type=1e3,a.format="SF",a.timecode=0,a.xstart=0,a.xdelta=1,a.xunits=0,a.subsize=1,a.ystart=0,a.ydelta=1,a.yunits=0,n||(n={});for(var r in n)a[r]=n[r];if(1<a.subsize&&(a.type=2e3),a["class"]=a.type/1e3,2===a["class"]&&n.subsize===e)throw"subsize must be provided with type 2000 files";return n.pipe?(a.pipe=!0,a.in_byte=0,a.out_byte=0,a.buf=new ArrayBuffer(n.pipesize||t.PIPESIZE),a.setData(a.buf),a.data_free=a.dview.length):a.setData(i),a},t.force1000=function(t){2===t["class"]&&(t.size=t.size&&!t.pipe?t.subsize*t.size:0,t.bpe/=t.subsize,t.ape=1)},t.grab=function(t,i,n,a){if(!t.dview)return 0;if("C"===t.format[0]&&(n*=2),a=Math.min(i.length,t.dview.length-n),i.set===e)for(var r=0;a>r;r++)i[r]=t.dview[n+r];else i.set(t.dview.subarray(n,n+a));return"C"===t.format[0]&&(a/=2),a},t.filad=function(t,e,i){if(t.data_free<e.length)throw"Pipe full";var n=t.in_byte/t.dview.BYTES_PER_ELEMENT,a=n+e.length;if(a>t.dview.length){var a=t.dview.length-n,r=e.length-a;e.subarray?(t.dview.set(e.subarray(0,a),n),t.dview.set(e.subarray(a,e.length),0)):(t.dview.set(e.slice(0,a),n),t.dview.set(e.slice(a,e.length),0)),t.in_byte=r*t.dview.BYTES_PER_ELEMENT}else t.dview.set(e,n),t.in_byte=a*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength;if(t.data_free-=e.length,t.onwritelisteners)for(e=0;e<t.onwritelisteners.length;e++)i?t.onwritelisteners[e]():window.setTimeout(t.onwritelisteners[e],0)},t.pavail=function(t){return t.dview.length-t.data_free},t.grabx=function(t,i,n,a){var r=t.dview.length-t.data_free;if(a===e&&(a=0),n){if(n>i.length-a)throw"m.grabx : nget larger then available buffer space"}else n=Math.min(i.length-a,r);if(0>n)throw"m.grabx : nget cannot be negative";if(n>r)return 0;var r=t.out_byte/t.dview.BYTES_PER_ELEMENT,o=r+n;if(o>=t.dview.length){var s=t.dview.length-r,o=o-t.dview.length;i.set(t.dview.subarray(r,t.dview.length),a),i.set(t.dview.subarray(0,o),a+s)}else i.set(t.dview.subarray(r,o),a);return t.out_byte=o*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength,t.data_free+=n,n},t.addPipeWriteListener=function(t,e){t.onwritelisteners||(t.onwritelisteners=[]),-1===t.onwritelisteners.indexOf(e)&&t.onwritelisteners.push(e)},t.units_name=function(t){return t=n[t],t[0]+" ("+t[1]+")"},t.trim_name=function(t){var e=t.indexOf("]");-1===e&&(e=t.indexOf("/")),-1===e&&(e=t.indexOf(":"));var i=t.substr(e+1,t.length).indexOf(".");return 0>i&&(i=t.length-e),t.substr(e+1,e+i+1)},t.label=function(t,i){var a=["Unknown","U"];"string"==typeof t?a=[t,null]:Array.isArray(t)?a=t:(a=n[t],a===e&&(a=["Unknown","U"]));var r="?";return 1==i?r="":10==i?r="da":.1==i?r="d":100==i?r="h":.01==i?r="c":1e3==i?r="K":.001==i?r="m":1e6==i?r="M":1e-6==i?r="u":1e9==i?r="G":1e-9==i?r="n":1e12==i?r="T":1e-12==i&&(r="p"),a[1]?a[0]+" ("+r+a[1]+")":a[0]};var a="F";t.vstype=function(t){a=t,"D"===a||"L"===a||"F"===a||"I"===a||"B"===a||alert("Unsupported vector type")},t.vlog10=function(t,i,n){i===e&&(i=1e-20),n===e&&(n=t);for(var a=0;a<t.length&&!(n.length<=a);a++)n[a]=Math.log(Math.max(t[a],i))/Math.log(10)},t.vlogscale=function(t,i,n,a){i===e&&(i=1e-20),n===e&&(n=1),a===e&&(a=t);for(var r=0;r<t.length&&!(a.length<=r);r++)a[r]=Math.log(Math.abs(Math.max(t[r],i)))/Math.log(10),a[r]*=n},t.cvmag2logscale=function(t,i,n,a){i===e&&(i=1e-20),n===e&&(n=1),a===e&&(a=t);for(var r=0,o=0;o<a.length&&(r=2*o+1,!(r>=t.length));o++)a[o]=t[r-1]*t[r-1]+t[r]*t[r],a[o]=Math.log(Math.abs(Math.max(a[o],i)))/Math.log(10),a[o]*=n},t.vsmul=function(t,i,n,a){n===e&&(n=t),a===e&&(a=n.length),a=Math.min(n.length,a),a=Math.min(t.length,a);for(var r=0;a>r&&!(n.length<=r);r++)n[r]=t[r]*i},t.vmxmn=function(t,e){var i=t[0],n=t[0],a=0,r=0;e=Math.min(e,t.length);for(var o=0;e>o;o++)t[o]>i&&(i=t[o],a=o),t[o]<n&&(n=t[o],r=o);return{smax:i,smin:n,imax:a,imin:r}},t.vmov=function(t,i,n,a,r){r===e&&(r=t.length),r=Math.min(t.length,r);for(var o=0;r>o;o++){var s=o*i,l=o*a;if(s>=t.length)break;if(l>=n.length)break;n[l]=t[s]}},t.vfill=function(t,i,n){n===e&&(n=t.length),n=Math.min(t.length,n);for(var a=0;n>a;a++)t[a]=i},t.vabs=function(t,i,n){n===e&&(n=t.length),i===e&&(i=t);for(var a=0;n>a;a++)i[a]=Math.abs(t[a])},t.cvmag=function(t,i,n){n===e&&(n=i.length),n=Math.min(i.length,n);for(var a=0;n>a;a++){var r=2*a+1;if(r>=t.length)break;i[a]=Math.sqrt(t[r-1]*t[r-1]+t[r]*t[r])}},t.cvmag2=function(t,i,n){n===e&&(n=i.length),n=Math.min(i.length,n);for(var a=0,r=0;n>r&&(a=2*r+1,!(a>=t.length));r++)i[r]=t[a-1]*t[a-1]+t[a]*t[a]},t.cvpha=function(t,i,n){n===e&&(n=i.length),n=Math.min(i.length,n);for(var a=0,r=0,o=a=0;n>o&&(a=2*o+1,!(a>=t.length));o++)r=t[a-1],a=t[a],0===r&&0===a&&(r=1),i[o]=Math.atan2(a,r)},t.cvphad=function(t,i,n){n===e&&(n=i.length),n=Math.min(i.length,n);for(var a=0,r=0,o=a=0;n>o&&(a=2*o+1,!(a>=t.length));o++)r=t[a-1],a=t[a],0===r&&0===a&&(r=1),i[o]=Math.atan2(a,r)*(180/Math.PI)},t.trunc=function(t){return t-t%1},t.sign=function(t,e){return e>=0?Math.abs(t):-Math.abs(t)},t.sec2tod=function(t,e){var n="",n=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var a=new Date,a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);if(t>=0?86400>t?(n=a.getTime()+1e3*t,a=new Date(n),n=i(a.getHours())+":"+i(a.getMinutes())+":"+i(a.getSeconds())):86400===t?n="24:00:00":31536e3>t?(n=t/86400,n=[n>0?Math.floor(n):Math.ceil(n)],a=new Date(1e3*t+a.getTime()),n=n.toString()+"::"+i(a.getHours())+":"+i(a.getMinutes())+":"+i(a.getSeconds())):(n=Math.floor(1e3*t)+n,a=new Date(n),n=a.getUTCFullYear()+":"+i(a.getUTCMonth()+1)+":"+i(a.getUTCDate())+"::"+i(a.getUTCHours())+":"+i(a.getUTCMinutes())+":"+i(a.getUTCSeconds())):t>-31536e3?(n=t/86400,n=0>=n?Math.ceil(n):Math.floor(n),a=new Date(Math.abs(1e3*t)+a.getTime()),n=0===n?"-0":n.toString(),n=n+"::"+i(a.getHours())+":"+i(a.getMinutes())+":"+i(a.getSeconds())):(n=Math.floor(1e3*t)+n,a=new Date(n),n=a.getUTCFullYear()+":"+i(a.getUTCMonth()+1)+":"+i(a.getUTCDate())+"::"+i(a.getUTCHours())+":"+i(a.getUTCMinutes())+":"+i(a.getUTCSeconds())),n=0===t%1?n+".000000":n+("."+Math.abs(t%1).toPrecision(6).slice(2,8)),e){var a=n.indexOf("."),r=-1;-1!==a&&(r=n.substr(a,n.length).indexOf("0")),-1!==r&&(n=n.substr(0,a+r))}return n},t.sec2tspec=function(e,i,n){return i=i||"",e>=0&&86400>=e?t.sec2tod(e,n):(e%=86400,"delta"!==i&&0>=e?t.sec2tod(e+86400,n):"delta"===i&&0>=e?"-"+t.sec2tod(-1*e,n):t.sec2tod(e,n))},t.sec2tod_j1970=function(t){var e="";return t>=0&&86400>t?(e=new Date(1e3*t),e=i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())):0>t&&t>-31536e3?(e=new Date(1e3*t),e=(t/86400*-1).toString()+"::"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())):(e=new Date(1e3*(t-631152e3)),e=e.getFullYear()+":"+i(e.getMonth())+":"+i(e.getDate())+"::"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())),0!==t%1&&(e+="."+(t%1).toPrecision(6).slice(2,8)),e},t.j1970toj1950=function(t){return t.getTime!==e?t.getTime()/1e3+631152e3:t+631152e3},t.j1950toj1970=function(t){return t-631152e3},t.throttle=function(t,e){var i=(new Date).getTime();return function(){var n=(new Date).getTime();n-i>=t&&(i=n,e.apply(null,arguments))}}}(window.m),window.mx=window.mx||{},function(t,e,i){function n(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0,this.mode=this.func=i}function a(e){this.root=e,this.parent=document.createElement("div"),this.parent.style.position="relative",this.parent.width=e.clientWidth,this.parent.height=e.clientHeight,e.appendChild(this.parent),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight,this.parent.appendChild(this.canvas),this.active_canvas=this.canvas,this.wid_canvas=document.createElement("canvas"),this.wid_canvas.style.position="absolute",this.wid_canvas.style.top="0px",this.wid_canvas.style.left="0px",this.wid_canvas.style.zIndex=1,this.wid_canvas.width=e.clientWidth,this.wid_canvas.height=e.clientHeight,this.parent.appendChild(this.wid_canvas),this.level=this.text_h=this.text_w=0,this.width=this.parent.width,this.height=this.parent.height,this.ymrk=this.xmrk=this.ypos=this.xpos=0,this.origin=1,this.stk=[new t.STKSTRUCT],t.setbgfg(this,"black","white"),this.warpbox=this.event_cb=i,this.rmode=!1,this.linewidth=1,this.style=i,this.xi=!1,this.l=this.state_mask=this.button_press=this.button_release=0,this.r=this.width,this.t=0,this.b=this.height,this.scrollbar_x=new t.SCROLLBAR,this.scrollbar_y=new t.SCROLLBAR,this.prompt=i,this.pixel=[],this._renderCanvas=document.createElement("canvas")}function r(t,e,i,n,a,r,o){return i>=a?o>i&&(n-e)*(o-i)-(r-e)*(a-i)>0&&(t+=1):i>=o&&0>(n-e)*(o-i)-(r-e)*(a-i)&&(t-=1),t}function o(e,n){n.animationFrameHandle||(n.animationFrameHandle=requestAnimFrame(t.withWidgetLayer(e,function(){t.erase_window(e),n.animationFrameHandle=i;var a=1.5*e.text_h;n.x=Math.max(n.x,0),n.y=Math.max(n.y,0),n.x=Math.min(n.x,e.width-n.w),n.y=Math.min(n.y,e.height-n.h);var r=n.x+v.GBorder+Math.max(0,v.sidelab),o=n.y+v.GBorder+v.toplab*(a+v.GBorder),s=n.w-2*v.GBorder-Math.abs(v.sidelab);t.widgetbox(e,n.x,n.y,n.w,n.h,r,o,s,n.h-2*v.GBorder-v.toplab*(a+v.GBorder),n.title);var l=e.wid_canvas.getContext("2d");l.lineWidth=1,l.strokeStyle=e.xwbs,l.beginPath(),l.moveTo(r,o-4+.5),l.lineTo(r+s-1,o-4+.5),l.stroke(),l.strokeStyle=e.xwts,l.beginPath(),l.moveTo(r,o-3+.5),l.lineTo(r+s-1,o-3+.5),l.stroke();for(var h=0;h<n.items.length;h++){var d=n.items[h],c=o+a*h;"separator"===d.style?(l.fillStyle=e.xwbs,l.fillRect(r,c,s,a),l.beginPath(),l.moveTo(r,c+.5),l.lineTo(r+s,c+.5),l.stroke(),l.textBaseline="middle",l.textAlign="left",l.fillStyle=e.xwfg,l.fillText(" "+d.text+" ",r+2*e.text_w,c+a/2)):(t.LEGACY_RENDER?(l.fillStyle=e.xwlo,l.fillRect(r,c,s,a),
l.beginPath(),l.moveTo(r,c+.5),l.lineTo(r+s,c+.5),l.stroke(),d.selected&&t.shadowbox(e,r-1,c,s+2,a,1,2,"",.75)):(l.save(),l.globalAlpha=.75,l.fillStyle=d.selected?e.xwts:e.xwlo,l.fillRect(r,c,s,a),l.restore(),l.strokeStyle=e.bg,l.beginPath(),l.moveTo(r,c+.5),l.lineTo(r+s,c+.5),l.stroke()),l.textBaseline="middle",l.textAlign="left",l.fillStyle=e.xwfg,"checkbox"===d.style?(l.fillText(" "+d.text+" ",r+2*e.text_w,c+a/2),l.strokeStyle=e.xwfg,l.strokeRect(r+1+e.text_w,c+(a-e.text_w)/2,e.text_w,e.text_w),d.checked&&(l.beginPath(),l.moveTo(r+1+e.text_w,c+(a-e.text_w)/2),l.lineTo(r+1+e.text_w+e.text_w,c+(a-e.text_w)/2+e.text_w),l.stroke(),l.beginPath(),l.moveTo(r+1+e.text_w+e.text_w,c+(a-e.text_w)/2),l.lineTo(r+1+e.text_w,c+(a-e.text_w)/2+e.text_w),l.stroke())):(l.fillText(" "+d.text+" ",r,c+a/2),d.checked&&(l.beginPath(),l.moveTo(r+1,c+e.text_h/4),l.lineTo(r+1+e.text_w-2,c+e.text_h/4+e.text_h/2),l.lineTo(r+1,c+e.text_h/4+e.text_h),l.lineTo(r+1,c+e.text_h/4),l.fill())))}})))}function s(e,n){t.onWidgetLayer(e,function(){t.erase_window(e)}),e.menu=i,e.widget=null;for(var a=0;a<n.items.length;a++){var r=n.items[a];if(r.selected){r.handler?r.handler():r.menu&&(a=r.menu,"function"==typeof r.menu&&(a=r.menu()),a.finalize=n.finalize,t.menu(e,a));break}}!e.menu&&n.finalize&&n.finalize()}function l(e,n){t.onWidgetLayer(e,function(){t.erase_window(e)}),e.menu=i,e.widget=null,!e.menu&&n.finalize&&n.finalize()}function h(t,e,i){var n,a=!0;return n=e/t,t>0?n>i.tL?a=!1:n>i.tE&&(i.tE=n):0>t?n<i.tE?a=!1:n<i.tL&&(i.tL=n):e>0&&(a=!1),a}function d(t,e,i,n,a,r,o,s){if(0>e&&(e=0),0>i&&(i=0),0>n&&(n=0),0>a&&(a=0),s&&(t.lineWidth=s),o&&(t.strokeStyle=o),1===t.lineWidth%2&&(e===n&&(n=e=Math.floor(e)+.5),i===a&&(a=i=Math.floor(i)+.5)),r&&r.mode){if("dashed"===r.mode){if(dashOn(t,r.on,r.off))t.beginPath(),t.moveTo(e,i),t.lineTo(n,a),t.stroke(),dashOff(t);else if(t.beginPath(),i===a)for(a=Math.min(e,n),n=Math.max(e,n);n>a;)t.moveTo(a,i),t.lineTo(a+r.on,i),t.stroke(),a+=r.on+r.off;else{if(e!==n)throw"Only horizontal or vertical dashed lines are supported";for(n=Math.min(i,a),a=Math.max(i,a);a>n;)t.moveTo(e,n),t.lineTo(e,n+r.on),t.stroke(),n+=r.on+r.off}t.beginPath()}else if("xor"===r.mode)if("undefined"==typeof Uint8ClampedArray)t.beginPath(),t.moveTo(e,i),t.lineTo(n,a),t.stroke(),t.beginPath();else{if(o=r=0,i===a)r=Math.abs(n-e),o=s,e=Math.min(e,n);else{if(e!==n)throw"Only horizontal and vertical lines can be drawn with XOR";r=s,o=Math.abs(a-i),i=Math.min(i,a)}if(0!==r&&0!==o){for(e=Math.floor(e),i=Math.floor(i),n=t.getImageData(e,i,r,o),a=n.data,r=0,s=a.length;s>r;r+=4)a[r]=255-a[r],a[r+1]=255-a[r+1],a[r+2]=255-a[r+2],a[r+3]=255;t.putImageData(n,e,i),t.clearRect(0,0,1,1)}}}else t.beginPath(),t.moveTo(e,i),t.lineTo(n,a),t.stroke(),t.beginPath()}function c(t,e,i,n,a){u(t,e,a),i&&(t.strokeStyle=i),n&&(t.fillStyle=n),t.fill(),t.closePath()}function u(t,e,i){if(!(1>e.length)){var n=e[0].x,a=e[0].y;for(t.lineWidth=i?i:1,t.beginPath(),t.moveTo(n,a),i=0;i<e.length;i++)n=e[i].x,a=e[i].y,t.lineTo(n,a)}}function x(t){return Math.floor(Math.round(t/100*255))}function f(t,e,i){return"rgb("+Math.round(t)+", "+Math.round(e)+", "+Math.round(i)+")"}function m(t,e){var i,n;if(".000000"===t.substring(5,8))i=4;else for(i=t.length-1;"0"===t[i];)i-=1;for(n=0;" "===t[n]&&(i-n+1>5||e);)n+=1;return i=t.substring(n,i+1),-1===i.indexOf(".")&&(i+="."),i}function p(e){e._animationFrameHandle=i;var n=e.warpbox;if(e.active_canvas.getContext("2d"),n&&e.xpos>=n.xmin&&e.xpos<=n.xmax&&e.ypos>=n.ymin&&e.ypos<=n.ymax){n.xl=e.xpos,n.yl=e.ypos;var a=Math.min(n.xo,n.xl),r=Math.min(n.yo,n.yl),o=Math.abs(n.xl-n.xo),s=Math.abs(n.yl-n.yo);0!==o&&0!==s&&("vertical"===n.mode?(a=e.l,o=e.r-e.l):"horizontal"===n.mode&&(r=e.t,s=e.b-e.t),t.onWidgetLayer(e,function(){t.erase_window(e),t.draw_box(e,"xor",a,r,o,s,n.style.opacity,n.style.fill_color)}))}}function y(t,e,i){return e>t?e:t>i?i:t}function g(t,e,n,a,r,o,s,l,h,d,c,u,x){d===i&&(d=0),c===i&&(c=0),u===i&&(u=n.width-d),x===i&&(x=n.height-c),t._renderCanvas.width=n.width,t._renderCanvas.height=n.height;for(var f=t._renderCanvas.getContext("2d"),m=f.createImageData(t._renderCanvas.width,t._renderCanvas.height),p=new Uint8Array(n),y=0;y<n.height;++y)for(var g=0;g<n.width;++g){var _=4*(y*n.width+g);m.data[_]=p[_],m.data[_+1]=p[_+1],m.data[_+2]=p[_+2],m.data[_+3]=255}f.putImageData(m,0,0),e.save(),e.globalAlpha=a,r||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,d,c,u,x,o,s,l,h),e.restore()}function _(t,e,n,a,r,o,s,l,h,d,c,u,x){if(d===i&&(d=0),c===i&&(c=0),u===i&&(u=n.width-d),x===i&&(x=n.height-c),32768>n.width&&32768>n.height){t._renderCanvas.width=n.width,t._renderCanvas.height=n.height;var f=t._renderCanvas.getContext("2d"),m=f.createImageData(t._renderCanvas.width,t._renderCanvas.height);n=new Uint8ClampedArray(n),m.data.set(n),f.putImageData(m,0,0)}else 32768>u&&32768>x?(t._renderCanvas.width=u,t._renderCanvas.height=x,b(t._renderCanvas,n,d,c,u,x)):(t._renderCanvas.width=Math.min(2*l,n.width),t._renderCanvas.height=Math.min(2*h,n.height),b(t._renderCanvas,n,d,c,u,x),u=t._renderCanvas.width,x=t._renderCanvas.height),c=d=0;e.save(),e.globalAlpha=a,r||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,d,c,u,x,o,s,l,h),e.restore()}function b(t,e,i,n,a,r){var o=new Uint32Array(e);a||(a=e.width),r||(r=e.height),i||(i=0),n||(n=0);var s=t.width,l=t.height;t=t.getContext("2d");var h=t.createImageData(s,l),d=new ArrayBuffer(h.data.length),c=new Uint8ClampedArray(d),d=new Uint32Array(d);a/=s,r/=l;for(var u=0,x=0,l=u=0;l<d.length;l++)u=Math.round(Math.floor(l%s)*a)+i,x=Math.round(Math.floor(l/s)*r)+n,u=Math.floor(x*e.width+u),d[l]=o[u];h.data.set(c),t.putImageData(h,0,0)}t.XW_INIT=-3,t.XW_DRAW=1,t.XW_EVENT=2,t.XW_UPDATE=3,t.XW_COMMAND=5,t.SB_EXPAND=1,t.SB_SHRINK=2,t.SB_FULL=3,t.SB_STEPINC=4,t.SB_STEPDEC=5,t.SB_PAGEINC=6,t.SB_PAGEDEC=7,t.SB_DRAG=8,t.SB_WHEELUP=9,t.SB_WHEELDOWN=10,t.L_ArrowLeft=1001,t.L_ArrowRight=1002,t.L_ArrowUp=1003,t.L_ArrowDown=1004,t.L_dashed=801,t.GBorder=3,t.L_RModeOff=900,t.L_RModeOn=901,t.L_PixelSymbol=1,t.L_CircleSymbol=2,t.L_SquareSymbol=3,t.L_PlusSymbol=4,t.L_XSymbol=5,t.L_TriangleSymbol=6,t.L_ITriangleSymbol=7,t.L_HLineSymbol=8,t.L_VLineSymbol=9,t.LEGACY_RENDER=!1,t.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0},t.SCROLLBAR=function(){this.repeat_count=this.origin=this.mxevent=this.arrow=this.a2=this.a1=this.soff=this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=null},t.open=function(e){return e=new a(e),e.wid_canvas.oncontextmenu=function(t){return t.preventDefault(),!1},this._ctx=e.active_canvas.getContext("2d"),e.onmousemove=function(e){return function(n){var a=n.target.getBoundingClientRect();e.x=n.x||n.clientX,e.y=n.y||n.clientY,e.xpos=n.offsetX===i?n.pageX-a.left-window.scrollX:n.offsetX,e.ypos=n.offsetX===i?n.pageY-a.top-window.scrollY:n.offsetY,e.warpbox&&(e.warpbox.style=(n.ctrlKey||n.metaKey)&&e.warpbox.alt_style!==i?e.warpbox.alt_style:e.warpbox.def_style,t.redraw_warpbox(e)),t.widget_callback(e,n)}}(e),e.onmouseup=function(e){return function(n){if(e.warpbox){t.onWidgetLayer(e,function(){t.erase_window(e)});var a=e.warpbox;if(e.warpbox=i,(1===n.which||3===n.which)&&a.func){var r=a.xo,o=a.yo,s=a.xl,l=a.yl;"vertical"===a.mode?(r=e.l,s=e.r):"horizontal"===a.mode&&(o=e.t,l=e.b),a.func(n,r,o,s,l,a.style.return_value,a.mode)}}t.widget_callback(e,n)}}(e),e.onmousedown=function(e){return function(i){return i.preventDefault(),t.widget_callback(e,i),!1}}(e),e.onkeydown=function(e){return function(i){if(e.warpbox){var n=getKeyCode(i);17!==n&&224!==n&&91!==n&&93!==n||e.warpbox.style===e.warpbox.alt_style||(e.warpbox.style=e.warpbox.alt_style,t.redraw_warpbox(e))}t.widget_callback(e,i)}}(e),e.onkeyup=function(e){return function(i){e.warpbox&&(i=getKeyCode(i),17!==i&&224!==i&&91!==i&&93!==i||e.warpbox.style===e.warpbox.def_style||(e.warpbox.style=e.warpbox.def_style,t.redraw_warpbox(e)))}}(e),e.ontouchend=function(t){return function(e){t.onmouseup({which:1})}}(e),e.ontouchmove=function(e){return function(n){var a=e.canvas,r=0,o=0;if(a.offsetParent!==i)do r+=a.offsetLeft,o+=a.offsetTop;while(a=a.offsetParent);e.xpos=n.targetTouches[0].pageX-r,e.ypos=n.targetTouches[0].pageY-o,t.redraw_warpbox(e)}}(e),t.enableListeners(e),e},t.enableListeners=function(e){t.addEventListener(e,"mousemove",e.onmousemove,!1),window.addEventListener("mouseup",e.onmouseup,!1),t.addEventListener(e,"mousedown",e.onmousedown,!1),window.addEventListener("keydown",e.onkeydown,!1),window.addEventListener("keyup",e.onkeyup,!1)},t.disableListeners=function(e){t.removeEventListener(e,"mousemove",e.onmousemove,!1),window.removeEventListener("mouseup",e.onmouseup,!1),t.removeEventListener(e,"mousedown",e.onmousedown,!1),window.removeEventListener("keydown",e.onkeydown,!1),window.removeEventListener("keyup",e.onkeyup,!1)},t.addEventListener=function(t,e,i,n){return t.wid_canvas.addEventListener(e,i,n)},t.removeEventListener=function(t,e,i,n){return t.wid_canvas.removeEventListener(e,i,n)},t.dispatchEvent=function(t,e){return t.wid_canvas.dispatchEvent(e)},t.onWidgetLayer=function(e,i){t.onCanvas(e,e.wid_canvas,i)},t.onCanvas=function(t,e,i){var n=t.active_canvas;t.active_canvas=e;try{if(i)return i()}finally{t.active_canvas=n}},t.withWidgetLayer=function(e,i){return function(){t.onWidgetLayer(e,i)}},t.render=function(t,e){if(e){var n=t.active_canvas;n._animationFrameHandle||(n._animationFrameHandle=requestAnimFrame(function(){n._animationFrameHandle=i,e()}))}},t.fullscreen=function(e,n){n===i&&(n=!e.fullscreen),n?(e.fullscreen={position:e.root.style.position,height:e.root.style.height,width:e.root.style.width,left:e.root.style.left,top:e.root.style.top,zIndex:e.root.style.zIndex},e.root.style.position="fixed",e.root.style.height="100%",e.root.style.width="100%",e.root.style.left="0px",e.root.style.top="0px",e.root.style.zIndex=16777271):(e.root.style.position=e.fullscreen.position,e.root.style.height=e.fullscreen.height,e.root.style.width=e.fullscreen.width,e.root.style.left=e.fullscreen.left,e.root.style.top=e.fullscreen.top,e.root.style.zIndex=e.fullscreen.zIndex,e.fullscreen=i),t.checkresize(e)},t.checkresize=function(t){var e=t.canvas;return e.height!==t.root.clientHeight||e.width!==t.root.clientWidth?(t.height=t.root.clientHeight,t.width=t.root.clientWidth,t.canvas.height=t.height,t.canvas.width=t.width,t.wid_canvas.height=t.height,t.wid_canvas.width=t.width,!0):!1},t.invertbgfg=function(e){t.setbgfg(e,e.fg,e.bg,!e.xi)},t.mixcolor=function(t,e,i){t=tinycolor(t).toRgb(),e=tinycolor(e).toRgb();var n=1-i;return e.r=t.r*n+e.r*i,e.g=t.g*n+e.g*i,e.b=t.b*n+e.b*i,tinycolor(e).toHexString(!0)},t.linear_gradient=function(t,e,i,n,a,r){var o=t.active_canvas.getContext("2d");for(t=1/r.length,e=o.createLinearGradient(e,i,n,a),i=0;i<r.length-1;i++)e.addColorStop(t*i,r[i]);return e.addColorStop(1,r[r.length-1]),e},t.setbgfg=function(e,i,n,a){e.bg=tinycolor(i).toHexString(),e.fg=tinycolor(n).toHexString(),e.xi=tinycolor(a).toHexString(),tinycolor.equals(e.bg,"black")&&tinycolor.equals(e.fg,"white")?(e.xwfg=e.fg,e.xwbg="rgb(35%,35%,30%)",e.xwts="rgb(60%,60%,55%)",e.xwbs="rgb(25%,25%,20%)",e.xwms=t.mixcolor(e.xwts,e.xwbs,.5),e.xwlo="rgb(15%,15%,10%)",e.hi=e.xwts):tinycolor.equals(e.bg,"white")&&tinycolor.equals(e.fg,"black")?(e.xwfg=e.fg,e.xwbg="rgb(60%,60%,55%)",e.xwts="rgb(80%,80%,75%)",e.xwbs="rgb(40%,40%,35%)",e.xwms=t.mixcolor(e.xwts,e.xwbs,.5),e.xwlo="rgb(70%,70%,65%)",e.hi=e.xwbs):(i=tinycolor(e.bg).toRgb(),127.5<Math.sqrt(.299*i.r*i.r+.587*i.g*i.g+.114*i.b*i.b)?(e.xwfg="black",e.xwbg="rgb(60%,60%,55%)",e.xwts="rgb(80%,80%,75%)",e.xwbs="rgb(40%,40%,35%)",e.xwms=t.mixcolor(e.xwts,e.xwbs,.5),e.xwlo="rgb(70%,70%,65%)",e.hi=e.xwts):(e.xwfg="white",e.xwbg="rgb(35%,35%,30%)",e.xwts="rgb(60%,60%,55%)",e.xwbs="rgb(25%,25%,20%)",e.xwms=t.mixcolor(e.xwts,e.xwbs,.5),e.xwlo="rgb(15%,15%,10%)",e.hi=e.xwbs))},t.settheme=function(t,e){t.bg=e.bg,t.fg=e.fg,t.xi=e.xi,t.xwfg=e.xwfg,t.xwbg=e.xwbg,t.xwts=e.xwts,t.xwbs=e.xwbs,t.xwlo=e.xwlo,t.hi=e.hi},t.close=function(t){var e=t.wid_canvas;e.removeEventListener("mousemove",t.onmousemove,!1),e.removeEventListener("mouseup",t.onmouseup,!1),t.parent&&t.parent.parentNode&&t.parent.parentNode.removeChild(t.parent)},t.scrollbar=function(e,n,a,r,o,s,l,h,d,c,u){var x,f,m,p=0,y=new t.SCROLLBAR;switch(x=n.flag!==i?n.flag:n,f=Math.abs(x),m=s-o>r-a?3>e.origin?2:4:2&e.origin?3:1,10>f&&(n=y),(10>f||0===n.action)&&(t.scroll(e,n,t.XW_INIT,i,u),n.flag=x,n.initial_pause=-1,t.scroll_loc(n,a,o,r-a+1,s-o+1,m,u)),n.srange=l.pe-l.ps,f){case 0:a=r=o=1;break;case 1:case 11:a=r=.9*n.srange,o=2;break;case 2:case 12:a=.1*n.srange,r=9*a,o=2;break;case 3:case 13:a=1,r=n.srange-1,o=1;break;default:return 0}return t.scroll_vals(n,l.ps,n.srange,h,d-h,a,r,o,u),0===x?t.scroll(e,n,t.XW_DRAW,i,i):t.scroll(e,n,t.XW_EVENT,c,u)&&(l.ps!==n.smin&&(l.ps=n.smin,p+=1),l.pe!==n.smin+n.srange&&(l.pe=n.smin+n.srange,p+=2)),p},t.scroll=function(e,n,a,r,o){var s;if(n===i)return!1;switch(a){case t.XW_INIT:t.scroll_loc(n,0,0,e.width,20,1,o),t.scroll_vals(n,0,10,0,100,1,10,1,o),n.flag=0,n.action=0,n.initial_pause=.25,n.repeat_pause=.05,n.mxevent=!0,n.repeat_count=0;break;case t.XW_EVENT:if(s=0,n.mxevent)s=e.button_release?-e.button_release:e.button_press;else if("mousedown"===r.type||"mouseup"===r.type){switch(r.which){case 1:s=1;break;case 2:s=2;break;case 3:s=3;break;case 4:s=4;break;case 5:s=5}"mouseup"===r.type&&(s=-s)}else("mousewheel"===r.type||"DOM-MouseScroll"===r.type)&&(r.wheelDelta&&0<r.wheelDelta?s=4:r.wheelDelta&&0>r.wheelDelta&&(s=5));if(0===n.action){if((4===s||5===s)&&(e.xpos=n.x),1!==s&&2!==s&&4!==s&&5!==s||e.xpos<n.x||e.ypos<n.y||e.xpos>n.x+n.w||e.ypos>n.y+n.h)return!1}else if(0>s){n.action=n.repeat_count=0;break}if(1&n.origin?(r=e.xpos-n.x,2&n.origin&&(r=n.w-r)):(r=e.ypos-n.y,2>=n.origin&&(r=n.h-r)),0===n.action){n.repeat_count=0;var l=t.scroll_real2pix(n);if(n.s1=o.s1=l.s1,n.sw=o.sw=l.sw,n.soff=o.soff=r-n.s1,0===n.trange)n.smin=o.smin=n.tmin,n.srange=o.srange=0;else switch(s){case 1:n.action=r>n.a1&&r<n.a2?0<n.soff?t.SB_PAGEINC:t.SB_PAGEDEC:0<n.soff?t.SB_STEPINC:t.SB_STEPDEC;break;case 4:n.action=t.SB_WHEELUP;break;case 5:n.action=t.SB_WHEELDOWN}}else switch(n.action){case t.SB_WHEELUP:case t.SB_WHEELDOWN:case t.SB_EXPAND:case t.SB_SHRINK:case t.SB_FULL:n.action=n.repeat_count=0}case t.XW_COMMAND:switch(s=n.smin,r=n.srange,n.action){case t.SB_STEPINC:s+=n.step;break;case t.SB_STEPDEC:s-=n.step;break;case t.SB_PAGEINC:s+=n.page;break;case t.SB_PAGEDEC:s-=n.page;break;case t.SB_FULL:s=n.tmin,r=n.trange;break;case t.SB_EXPAND:r*=n.scale,s=0>=s&&0<=s+n.srange?s*n.scale:s-(r-n.srange)/2;break;case t.SB_SHRINK:r/=n.scale,s=0>s&&0<=s+n.srange?s+r/n.scale:0===s&&0<=s+n.srange?r/n.scale:s+(n.srange-r)/2;break;case t.SB_WHEELUP:s-=n.page;break;case t.SB_WHEELDOWN:s+=n.page}0<n.trange?(s=Math.max(n.tmin,Math.min(s,n.tmin+n.trange-r)),r=Math.min(r,n.trange)):(s=Math.min(n.tmin,Math.max(s,n.tmin+n.trange-r)),r=Math.max(r,n.trange)),n.smin===s&&n.srange===r?n.action!==t.SB_DRAG&&(n.action=n.repeat_count=0):(n.smin=o.smin=s,n.srange=o.srange=r,n.repeat_count++),a===t.XW_COMMAND&&(t.scroll(e,n,t.XW_UPDATE,i),n.action=0);break;case t.XW_DRAW:case t.XW_UPDATE:t.redrawScrollbar(n,e,a)}return!0},t.scroll_loc=function(n,a,r,o,s,l,h){n!==i&&(n.x=h.x=a,n.y=h.y=r,n.w=h.w=o,n.h=h.h=s,n.origin=h.origin=Math.max(1,Math.min(4,l)),1&n.origin?(n.a2=h.a2=n.w,n.arrow=h.arrow=Math.min(e.trunc((n.w-e.trunc(2*t.GBorder))/3),n.h+t.GBorder)):(n.a2=h.a2=n.h,n.arrow=h.arrow=Math.min(e.trunc((n.h-e.trunc(2*t.GBorder))/3),n.w+t.GBorder)),n.a1=h.a1=n.arrow+t.GBorder,n.a2-=n.arrow+t.GBorder,h.a2-=n.arrow+t.GBorder,n.swmin=h.swmin=Math.min(10,n.a2-n.a1),n.s1=h.s1=0,n.sw=h.sw=0,n.action=h.action=0)},t.scroll_vals=function(t,e,n,a,r,o,s,l,h){t!==i&&(t.smin=h.smin=e,t.srange=h.srange=n,t.tmin=h.tmin=a,t.trange=h.trange=r,t.step=h.step=o,t.page=h.page=s,t.scale=h.scale=Math.max(l,1))},t.draw_symbol=function(i,n,a,r,o,s,l){for(var h=i.active_canvas.getContext("2d"),x=0,f=0,m=!1,p=[],f=0;4>f;f++)p[f]={x:0,y:0};if(f="",m=0>s,x=Math.abs(s),f=2*x,h.fillStyle=n,h.strokeStyle=n,"function"==typeof o)o(h,l,a,r);else switch(o){case t.L_CircleSymbol:h.beginPath(),m?(h.arc(a,r,x,0,360),h.fill()):(h.arc(a,r,x,0,360),h.stroke());break;case t.L_SquareSymbol:m?h.fillRect(a-x,r-x,f,f):h.strokeRect(a-x,r-x,f,f);break;case t.L_PixelSymbol:h.beginPath(),h.arc(a,r,1,0,2*Math.PI,!0),h.fill();break;case t.L_ITriangleSymbol:x=-x;case t.L_TriangleSymbol:for(f=e.trunc(1.5*x),a=e.trunc(.8*x),p[1].x=-a,p[1].y=f,p[2].x=2*a,p[2].y=0,p[3].x=-a,p[3].y=-f,i=[],f=0;4>f;f++)i[f]={x:0,y:0};m?(i[0].x=a,i[0].y=r-x,i[1].x=i[0].x+p[1].x,i[1].y=i[0].y+p[1].y,i[2].x=i[1].x+p[2].x,i[2].y=i[1].y+p[2].y,i[3].x=i[2].x+p[3].x,i[3].y=i[2].y+p[3].y,c(h,i)):(i[0].x=a,i[0].y=r-x,i[1].x=i[0].x+p[1].x,i[1].y=i[0].y+p[1].y,i[2].x=i[1].x+p[2].x,i[2].y=i[1].y+p[2].y,i[3].x=i[2].x+p[3].x,i[3].y=i[2].y+p[3].y,u(h,i,void 0),h.stroke(),h.closePath());break;case t.L_PlusSymbol:d(h,a,r+x,a,r-x),d(h,a+x,r,a-x,r);break;case t.L_HLineSymbol:d(h,a+x,r,a-x,r);break;case t.L_VLineSymbol:d(h,a,r+x,a,r-x);break;case t.L_XSymbol:d(h,a-x,r-x,a+x,r+x),d(h,a+x,r-x,a-x,r+x);break;default:f=o,x=e.trunc(i.text_w/2),m&&h.fillText(f.substring(0,2),a-x,r+x)}},t.draw_symbols=function(e,i,n,a,r,o,s,l){for(var h=0;r>h;h++)t.draw_symbol(e,i,n[h],a[h],o,s,h+l)},t.trace=function(n,a,o,s,l,d,c,u,x,f,m){if(o===i||s===i)throw"mx.trace requires xpoint and ypoint";if(c===i&&(c=1),u===i&&(u=1),x===i&&(x=0),f===i&&(f=0),m===i&&(m={}),0>=l)e.log.warn("No points to draw");else if(0===u&&0===x)e.log.warn("No line or symbol to draw");else{var p;m.dashed&&(p={mode:"dashed",on:4,off:4});var y=t.origin(n.origin,4,n.stk[n.level]);if(0!==y.xscl&&0!==y.yscl){var g=y.x1,_=y.y1,b=y.xmin,v=1/y.xscl,w=y.ymin,M=1/y.yscl;m.noclip||t.clip(n,g,_,y.x2-g+1,y.y2-_+1);var k=Math.abs(y.xmax-y.xmin),E=Math.abs(y.ymax-y.ymin),S=Math.min(y.xmin,y.xmax),y=Math.min(y.ymin,y.ymax),A=S+k,L=y+E,C=4*Math.ceil(2*o.length),z=new Int32Array(new ArrayBuffer(C)),C=new Int32Array(new ArrayBuffer(C)),T=0;if(0===u&&0!==x)for(var P=c-1;l>P;P+=c){var R=o[P],B=s[P],D=R>=S&&A>=R&&B>=y&&L>=B;D&&(z[0]=Math.round((R-b)*v)+g,C[0]=Math.round((B-w)*M)+_,t.draw_symbol(n,a,z[0],C[0],x,f,d+P))}else if(!0===m.vertsym&&0!==x)for(P=c-1;l>P;P+=c)R=o[P],B=s[P],R>=S&&A>=R&&(u=Math.round((R-b)*v)+g,t.draw_line(n,a,u,0,u,n.height),B>=y&&L>=B&&(z[0]=u,C[0]=Math.round((B-w)*M)+_,t.draw_symbol(n,a,z[0],C[0],x,f,d+P)));else if(!0===m.horzsym&&0!==x)for(P=c-1;l>P;P+=c)R=o[P],B=s[P],B>=y&&L>=B&&(u=Math.round((B-w)*M)+_,t.draw_line(n,a,0,u,n.width,u),R>=S&&A>=R&&(z[0]=Math.round((R-b)*v)+g,C[0]=u,t.draw_symbol(n,a,z[0],C[0],x,f,d+P)));else if(0!==u){var G;if(m&&m.highlight){for(G=[],P=0;P<m.highlight.length;P++)if(!(m.highlight[P].xstart>=A||m.highlight[P].xend<=S)&&(R=Math.max(m.highlight[P].xstart,S),B=Math.min(m.highlight[P].xend,A),B>R)){for(R=Math.round((R-b)*v)+g,B=Math.round((B-b)*v)+g,k=G.length-1;k>=0;k--)R<=G[k].start&&B>=G[k].end?G.splice(k,1):R>=G[k].start&&B<=G[k].end?(G.push({start:B,end:G[k].end,color:G[k].color}),G[k].end=R):R<=G[k].start&&B>=G[k].start?G[k].start=B:R<=G[k].end&&B>=G[k].end&&(G[k].end=R),G[k].end<=G[k].start&&G.splice(k,1);G.push({start:R,end:B,color:m.highlight[P].color})}G.push({start:g,color:a}),G.sort(function(t,e){return t.start-e.start})}else G=a;var I,N=(n.stk[n.level].xmax+n.stk[n.level].xmin)/2,O=(n.stk[n.level].ymax+n.stk[n.level].ymin)/2,R=o[0],B=s[0];I=r(0,N,O,n.stk[n.level].xmin,n.stk[n.level].ymin,R,B),(D=R>=S&&A>=R&&B>=y&&L>=B)?(z[T]=Math.round((R-b)*v)+g,C[T]=Math.round((B-w)*M)+_,T+=1,0!==x&&t.draw_symbols(n,a,z,C,1,x,f,d)):T=0;for(var F=0,U=!1,P=c;c*(l-1)>=P;P+=c)if(k=R,E=B,R=o[P],B=s[P],I=r(I,N,O,k,E,R,B),U=R>=S&&A>=R&&B>=y&&L>=B,D&&U)z[T]=Math.round((R-b)*v)+g,C[T]=Math.round((B-w)*M)+_,T+=1;else if(D=U,k-=R,E-=B,0!==k||0!==E){var H={tL:1,tE:0};h(k,S-R,H)&&h(-k,R-A,H)&&h(E,y-B,H)&&h(-E,B-L,H)&&(1>H.tL&&(z[T]=Math.round((R-b+H.tL*k)*v)+g,C[T]=Math.round((B-w+H.tL*E)*M)+_,T+=1),0<H.tE?(z[T]=Math.round((R-b+H.tE*k)*v)+g,C[T]=Math.round((B-w+H.tE*E)*M)+_,T+=1,t.draw_lines(n,G,z.subarray(F,T),C.subarray(F,T),T-F,u,p),0!==x&&T-F>2&&t.draw_symbols(n,a,z.subarray(F+1,T-1),C.subarray(F+1,T-1),T-F-2,x,f,d+P-(T-F-2)),F=T):(z[T]=Math.round((R-b)*v)+g,C[T]=Math.round((B-w)*M)+_,T+=1))}I=r(I,N,O,R,B,n.stk[n.level].xmax,n.stk[n.level].ymin),I=r(I,N,O,n.stk[n.level].xmax,n.stk[n.level].ymin,n.stk[n.level].xmin,n.stk[n.level].ymin),T-F>0&&(t.draw_lines(n,G,z.subarray(F,T),C.subarray(F,T),T-F,u,p),U&&(F+=1),0!==x&&T-F>1&&t.draw_symbols(n,a,z.subarray(F-1,T),C.subarray(F-1,T),T,x,f,P-T+d)),m.fillStyle&&(T>1||0!==I)&&t.fill_trace(n,m.fillStyle,z,C,T)}m.noclip||t.clip(n,0,0,0,0)}}},t.draw_mode=function(t,e,n){t.linewidth=e===i?1:e,t.style=n},t.draw_line=function(t,n,a,r,o,s,l,h){var c=t.active_canvas.getContext("2d");l===i&&(l=t.linewidth),h===i&&(h=t.style),"number"==typeof n&&(t.pixel&&0!==t.pixel.length?(n=Math.max(0,Math.min(t.pixel.length,n)),n=f(t.pixel[n].red,t.pixel[n].green,t.pixel[n].blue)):(e.log.warn("COLORMAP not initialized, defaulting to foreground"),n=t.fg)),d(c,a,r,o,s,h,n,l)},t.rubberline=function(t,e,i,n,a){t=t.active_canvas.getContext("2d"),d(t,e,i,n,a,{mode:"xor"},"white",1)},t.fill_trace=function(e,i,n,a,r){var o=e.active_canvas.getContext("2d");if(Array.isArray(i)?o.fillStyle=t.linear_gradient(e,0,0,0,e.b-e.t,i):o.fillStyle=i,1>r)o.fillRect(e.l,e.t,e.r-e.l,e.b-e.t);else if(i){i=n[0];var s=a[0];o.beginPath(),s===e.t?o.lineTo(e.l,e.t):o.lineTo(e.l,e.b),o.lineTo(i,s);for(var l=1;r>l;l++)i=n[l],s=a[l],o.lineTo(i,s);s===e.t&&o.lineTo(e.r,e.t),o.lineTo(e.r,e.b),a[0]===e.t&&o.lineTo(e.l,e.b),o.closePath(),o.fill()}},t.draw_lines=function(t,n,a,r,o,s,l){var h=t.active_canvas.getContext("2d");if(!(1>o)){var d=a[0],c=r[0];for(s===i&&(s=t.linewidth),l===i&&(l=t.style),l&&"dashed"===l.mode&&(dashOn(h,l.on,l.off)||e.log.warn("WARNING: Dashed lines aren't supported on your browser")),h.lineWidth=s,t=0,"string"==typeof n?n=[{start:0,color:n}]:n instanceof Array||(n.start===i&&(n.start=0),n=[n]),s=0;s<n.length;s++)null!=n[s].end&&n[s].end<d?n.remove(s):n[s].start<d&&(t=s);for(h.strokeStyle=n[t].color,h.beginPath(),h.moveTo(d,c),s=0;o>s;s++)if(d!==a[s]||c!==r[s]){if(d=a[s],c=r[s],l=!1,t>0&&null!=n[t].end&&n[t].end<d)for(l=!0;null!=n[t].end&&n[t].end<d&&(n.remove(t),t-=1,0!==t););if(t+1<n.length&&n[t+1].start<=d)for(l=!0;t+1<n.length&&n[t+1].start<=d;)t++;h.lineTo(d,c),l&&(h.stroke(),h.strokeStyle=n[t].color,h.beginPath(),h.lineTo(d,c))}h.stroke(),dashOff(h),h.beginPath()}},t.clip=function(t,e,i,n,a){t=t.active_canvas.getContext("2d"),0===e&&0===i&&0===n&&0===a?t.restore():(t.save(),t.beginPath(),t.rect(e,i,n,a),t.clip())},t.clear_window=function(t){var e=t.active_canvas.getContext("2d");e.fillStyle=t.bg,e.fillRect(0,0,t.width,t.height)},t.erase_window=function(t){t.active_canvas.getContext("2d").clearRect(0,0,t.width,t.height)},t.rubberbox=function(e,i,n,a,r){t.warpbox(e,e.xpos,e.ypos,e.xpos,e.ypos,0,e.width,0,e.height,i,n,a,r)},t.warpbox=function(t,e,i,a,r,o,s,l,h,d,c,u,x){u||(u={}),t.warpbox=new n,t.warpbox.xo=e,t.warpbox.yo=i,t.warpbox.xl=a,t.warpbox.yl=r,t.warpbox.xmin=o,t.warpbox.xmax=s,t.warpbox.ymin=l,t.warpbox.ymax=h,t.warpbox.func=d,t.warpbox.mode=c,t.warpbox.style=u,t.warpbox.def_style=u,t.warpbox.alt_style=x},t.origin=function(e,i,n){e=Math.max(1,e),i=Math.max(1,i);var a=new t.STKSTRUCT;if(a.xmin=n.xmin,a.xmax=n.xmax,a.ymin=n.ymin,a.ymax=n.ymax,a.xscl=n.xscl,a.yscl=n.yscl,a.x1=n.x1,a.y1=n.y1,a.x2=n.x2,a.y2=n.y2,e!==i){var r=Math.abs(i-e);e=i+e,(2===r||5!==e)&&(a.xmin=n.xmax,a.xmax=n.xmin,a.xscl=-n.xscl),(2===r||5===e)&&(a.ymin=n.ymax,a.ymax=n.ymin,a.yscl=-n.yscl)}return a},t.mult=function(t,e){var i=Math.max(Math.abs(t),Math.abs(e));if(0===i)return 1;var n=.1447648*Math.log(i),n=n|n;return 1>i&&(n-=1),0>n?1/Math.pow(10,-3*n):Math.pow(10,3*n)},t.widget_callback=function(t,e){t.prompt&&3===e.which&&t.prompt.input.onsubmit(),t.widget&&t.widget.callback(e)},t.prompt=function(e,n,a,r,o,s,l,h,d){if(s!==i&&(o=a(s),!o.valid))throw"Prompt default input value not valid due to '"+o.reason+"'";t.onWidgetLayer(e,function(){var o=e.active_canvas.getContext("2d"),c=o.font.indexOf("px"),u=c+3,c=o.font.substr(0,c),o=o.font.substr(u,o.font.length).toString(),o=new CanvasInput({height:e.text_h,fontFamily:o,fontSize:new Number(c),backgroundColor:e.bg,fontColor:e.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*e.text_w,value:s!==i?s.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),x=function(n,o){return function(){var s=this.value(),l=a(s);l.valid?(e.prompt=i,this.cleanup(),t.onWidgetLayer(e,function(){t.erase_window(e)}),r(s)):(t.message(e,"Value: '"+s+"' isn't valid due to '"+l.reason+"' - RETRY",i,n,o),setTimeout(function(){t.onWidgetLayer(e,function(){t.erase_window(e)}),e.widget=null},null!=d?d:4e3))}},u=function(e,i,n){return function(a,r){t.onWidgetLayer(e,function(){var o=(n.length+2)*e.text_w,s=o+31*e.text_w+6,l=2*e.text_h+6;a||(a=e.xpos),r||(r=e.ypos);var h=Math.max(0,Math.min(a,e.width-s)),d=Math.max(0,Math.min(r,e.height-l)),c=h+3,u=d+3,f=u+1.5*e.text_h,m=c+e.text_w;t.widgetbox(e,h,d,s,l,c,u,0,""),t.text(e,m,f,n),s=f-1.15*e.text_h,i.x(c+e.text_w+o-e.text_w),i.y(s),i.onsubmit(x(h,s-75)),i.canvas()?i.render():i.canvas(e.active_canvas)})}}(e,o,n);u(l,h),o.focus(),e.prompt={redraw:u,input:o}})},t.floatValidator=function(t,e){return(e!==i&&!1!==e||""!==t)&&isNaN(parseFloat(t))||!isFinite(t)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}},t.intValidator=function(t,e){return(e===i||!1===e)&&""===t||parseFloat(t)===parseInt(t,10)&&!isNaN(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}},t.message=function(e,i,n,a,r,o){t.onWidgetLayer(e,function(){t.render_message_box(e,i,a,r),e.widget={type:o||"ONESHOT",callback:function(i){("mousedown"===i.type||"keydown"===i.type)&&(e.widget=null,t.onWidgetLayer(e,function(){t.erase_window(e)}))}}})},t.render_message_box=function(e,i,n,a,r){var o,s=i.split(/\r\n|\r|\n/g),l=0;if(1===s.length){if(l=Math.min((e.width-6)/e.text_w-2,i.length),0>=l)return;for(;l>40&&2.5*e.text_h*i.length<e.height*l;)l-=5;var h=0,d=0,c=0,u=0,x=0,f=0,s=[];for(o=!0;d<i.length;){for(var x=d+l-1,f=x=Math.min(x,i.length-1),m=!1,h=d;x>=h&&!m;h++)switch(i[h]){case",":case";":case" ":case":":f=h;break;case"-":case"/":f!==h-1&&(f=h);break;case"@":case"\n":case"\r":o=!1,m=!0,f=h}h===i.length&&(f=x),m?s.push(i.substring(d,f)):(h=i.substring(d,f+1).replace(/^\s+/,""),s.push(h)),d=f+1,u=Math.max(u,s[c].length)}}else for(c=0;c<s.length;c++)l=Math.min((e.width-6)/e.text_w-2,Math.max(l,s[c].length));for(u=s.length,u>6&&(o=!1),h=0,c=Math.max(1,e.height/e.text_h),i=Math.min(u,h+c-1),l=(l+2)*e.text_w+6,u=(i-h+1)*e.text_h+6,n||(n=e.xpos),a||(a=e.ypos),n=Math.max(e.l,Math.min(n,e.r-l)),c=Math.max(e.t,Math.min(a,e.b-u)),a=n+3,f=c+3,t.widgetbox(e,n,c,l,u,a,f,0,""),u=f+e.text_h/3,c=a+e.text_w;i>h;)u+=e.text_h,o&&(c=n+l/2-s[h].length*e.text_w/2),t.text(e,c,u,s[h],r),h++},t.draw_round_box=function(t,e,n,a,r,o,s,l,h){t=t.active_canvas.getContext("2d"),h||(h=5),t.beginPath(),t.moveTo(n+h,a),t.lineTo(n+r-h,a),t.quadraticCurveTo(n+r,a,n+r,a+h),t.lineTo(n+r,a+o-h),t.quadraticCurveTo(n+r,a+o,n+r-h,a+o),t.lineTo(n+h,a+o),t.quadraticCurveTo(n,a+o,n,a+o-h),t.lineTo(n,a+h),t.quadraticCurveTo(n,a,n+h,a),t.closePath(),t.lineWidth=1,t.strokeStyle=e,t.stroke(),s!==i&&s>0&&(n=t.globalAlpha,t.globalAlpha=s,t.fillStyle=l?l:e,t.fill(),t.globalAlpha=n)},t.draw_box=function(t,e,n,a,r,o,s,l){var h=t.active_canvas.getContext("2d");if("xor"!==e)h.lineWidth=1,h.strokeStyle=e,h.strokeRect(n,a,r,o);else if("undefined"==typeof Uint8ClampedArray)h.lineWidth=1,h.strokeStyle=t.fg,h.strokeRect(n,a,r,o);else{n=Math.floor(n),a=Math.floor(a),r=Math.floor(r),o=Math.floor(o),t=t.canvas.getContext("2d");for(var d=t.getImageData(n,a,r,1),c=d.data,u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;for(h.putImageData(d,n,a),d=t.getImageData(n,a+o,r,1),c=d.data,u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;for(h.putImageData(d,n,a+o),d=t.getImageData(n,a,1,o),c=d.data,u=0;o>u;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;for(h.putImageData(d,n,a),d=t.getImageData(n+r,a,1,o),c=d.data,u=0;o>u;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;h.putImageData(d,n+r,a)}s!==i&&s>0&&(t=h.globalAlpha,h.globalAlpha=s,h.fillStyle=l?l:e,h.fillRect(n+1,a+1,r-1,o-1),h.globalAlpha=t)},t.set_font=function(t,e){var i=t.canvas.getContext("2d"),n=t.wid_canvas.getContext("2d");if(t.font&&t.font.width===e)i.font=t.font.font,n.font=t.font.font;else{var a=1;do{a+=1,i.font=a+"px Courier New, monospace",n.font=a+"px Courier New, monospace";var r=i.measureText("M");t.text_w=r.width,t.text_h=a}while(t.text_w<e);t.font={font:a+"px Courier New, monospace",width:e}}},t.textline=function(t,e,i,n,a,r){var o=t.active_canvas.getContext("2d");r||(r={}),r.color||(r.color=t.fg),r.width||(r.width=1),d(o,e,i,n,a,r,r.color,r.width)},t.tics=function(t,e,i,n){var a=1,r=t;return e===t?{dtic:1,dtic1:t}:(a=Math.abs(e-t)/i,i=Math.max(a,1e-36),i=Math.log(i)/Math.log(10),0>i?(i=Math.ceil(i),i-=1):i=Math.floor(i),a*=Math.pow(10,-i),i=Math.pow(10,i),r=a*i,n&&r>=5&&5140800>=r?(n=17.5>r?5:37.5>r?15:270>r?60:1050>r?300:2250>r?900:7200>r?3600:16200>r?10800:32400>r?21600:129600>r?43200:518400>r?86400:604800,a=Math.round(r/n)*n):a=1.75>a?i:2.25>a?2*i:3.5>a?2.5*i:7>a?5*i:10*i,0===a&&(a=1),e>=t?(n=Math.floor(t>=0?t/a+.995:t/a-.005),r=n*a):(n=Math.floor(t>=0?t/a+.005:t/a-.995),r=n*a,a*=-1),r+a===r&&(a=e-t),{dtic:a,dtic1:r})},t.drawaxis=function(n,a,r,o,s,l){var h=t.origin(n.origin,1,n.stk[n.level]),d=0,c=0,u=0,x=0,f=0,p=0;o=o===i?30:o,s=s===i?30:s,l.exactbox?(d=Math.floor(h.x1),c=Math.floor(h.y1),u=Math.floor(h.x2),x=Math.floor(h.y2),f=u-d,p=x-c):(d=Math.max(Math.floor(h.x1)-2,0),c=Math.max(Math.floor(h.y1)-2,0),u=Math.min(Math.floor(h.x2)+2,n.width),x=Math.min(Math.floor(h.y2)+2,n.height),f=u-d-4,p=x-c-4);var y=n.active_canvas.getContext("2d");l.fillStyle?Array.isArray(l.fillStyle)?y.fillStyle=t.linear_gradient(n,0,0,0,x-c,l.fillStyle):y.fillStyle=l.fillStyle:y.fillStyle=n.bg,y.fillRect(d,c,u-d,x-c),l.noaxisbox||(t.textline(n,d,c,u,c),t.textline(n,u,c,u,x),t.textline(n,u,x,d,x),t.textline(n,d,x,d,c));var g=!1;4===o&&(g=!0),y=!1,4===s&&(y=!0);var _={dtic:0,dtic1:0},b={dtic:0,dtic1:0};0>a?(_.dtic1=h.xmin,_.dtic=(h.xmin-h.xmax)/a):_=t.tics(h.xmin,h.xmax,a,g);var v=1;l.xmult?v=l.xmult:g||(v=t.mult(h.xmin,h.xmax)),0>r?(b.dtic1=h.ymin,b.dtic=(h.ymin-h.ymax)/r):b=t.tics(h.ymin,h.ymax,r,y),a=1,l.ymult?a=l.ymult:y||(a=t.mult(h.ymin,h.ymax));var w=!l.noxtlab;r=!l.noytlab;var M,k,E=Math.max(0,d-4*n.text_w),S=0,S=l.ontop?Math.min(n.height,Math.floor(x+1.5*n.text_h)):Math.max(n.text_h,Math.floor(c-.5*n.text_h));S>0&&(l.noyplab||(k=e.label(s,a)),l.noxplab||(M=e.label(o,v))),M&&k?t.text(n,E,S,k+" vs "+M):M?t.text(n,E,S,M):k&&t.text(n,E,S,k),o=5.5*n.text_w,s=0,s=l.ontop?l.inside?c+1*n.text_h:c-.2*n.text_h:l.inside?x-.5*n.text_h:x+1*n.text_h+2,f=h.xmin!==h.xmax?f/(h.xmax-h.xmin):f/1,v=0!==v?1/v:1,M=Math.min(12,Math.round(f*_.dtic)/n.text_w),k=1;var A="";if(w)if(g)A=e.sec2tod(_.dtic1),k=A.length*n.text_w<(u-d)/2;else for(var L,S=_.dtic1;S<=h.xmax;S+=_.dtic){if(A=t.format_f(S*v,M,M/2),A===L){k=0;break}L=A}for(0===_.dtic&&(_.dtic=h.xmax-_.dtic1+1),E=0,A="",S=_.dtic1;S<=h.xmax;S+=_.dtic)if(L=d+Math.round(f*(S-h.xmin))+2,!(d>L)&&(l.grid&&"y"!==l.grid?(l.gridStyle||(l.gridStyle=t.LEGACY_RENDER?{mode:"dashed",on:1,off:3}:{color:n.xwms,mode:"dashed",on:1,off:3}),t.textline(n,L,x,L,c,l.gridStyle)):(t.textline(n,L,x-2,L,x+2),t.textline(n,L,c-2,L,c+2)),w))if(k){if(A=null,g?L>E&&(A=e.sec2tod(S,!0),
E=L+n.text_w*(A.length+1)):(A=t.format_f(S*v,M,M/2),A=m(A,!0)),A){var C=Math.round(A.length/2)*n.text_w;l.inside&&(L=Math.max(d+C,L),L=Math.min(u-C,L)),L-C>=0&&t.text(n,L-C,s,A)}}else S===_.dtic1&&(g?(A=e.sec2tod(S,!0),l.inside&&(L=Math.floor(Math.max(d+o,L))),t.text(n,L-o,s,A+" + "+e.sec2tod(_.dtic))):(A=(_.dtic1*v).toString(),l.inside&&(L=Math.floor(Math.max(d+o,L))),t.text(n,L-o,s,A+" + "+_.dtic*v)));for(o=l.yonright?l.inside?Math.min(u-6*n.text_w,n.width-5*n.text_w):Math.min(u+n.text_w,n.width-5*n.text_w):l.inside?Math.max(0,d+n.text_w):Math.max(0,Math.floor(d-(n.l-.5)*n.text_w)),s=.4*n.text_h,f=h.ymin!==h.ymax?-p/(h.ymax-h.ymin):-p/1,v=0!==a?1/a:1,p=h.ymax>=h.ymin?function(t){return t<=h.ymax}:function(t){return t>=h.ymax},_=b.dtic1;p(_);_+=b.dtic)L=x+Math.round(f*(_-h.ymin))-2,L>x||(l.grid&&"x"!==l.grid?(l.gridStyle||(l.gridStyle={mode:"dashed",on:1,off:3}),t.textline(n,d,L,u,L,l.gridStyle)):(t.textline(n,d-2,L,d+2,L),t.textline(n,u-2,L,u+2,L)),!r||l.inside&&(L<c+n.text_h||L>x-2*n.text_h)||(y?(g=e.sec2tod(_),a=L+s-n.text_h,w=g.indexOf("::"),-1!==w&&(a>c&&x>a&&t.text(n,o,a,g.substring(0,w)),w+=1),t.text(n,o,Math.min(x,L+s),g.substring(w+1,w+6)),a=L+s+n.text_h,a>c&&x>a&&"00"!==g.substring(w+7,w+9)&&(g+=".00",t.text(n,o,a,g.substring(w+7,w+12)))):(g=t.format_f(_*v,12,6),g=m(g,l.inside),t.text(n,o,Math.min(x,L+s),g))))},t.inrect=function(t,e,i,n,a,r){return t>=i&&i+a>=t&&e>=n&&n+r>=e};var v={GBorder:3,sidelab:0,toplab:1};t.menu=function(e,n){var a=1.5*e.text_h;if(n){if(!e.widget){n.x=e.xpos,n.y=e.ypos,n.val=0,n.h=2*v.GBorder+a*n.items.length+v.toplab*(a+v.GBorder)-1,n.y=n.y-((v.toplab+Math.max(1,n.val)-.5)*a+(1+v.toplab)*v.GBorder)+1;for(var r=n.title.length,h=0,d=0;d<n.items.length;d++){var c=n.items[d],r=Math.max(r,c.text.length);"checkbox"===c.style&&(r+=2),"separator"===c.style&&(r+=2),c.checked&&"checkbox"!==c.style&&(h=a*d)}n.y-=h,r=(r+2)*e.text_w,n.w=2*v.GBorder+Math.abs(v.sidelab)+r-1,n.x-=n.w/2,e.menu=n,e.widget={type:"MENU",callback:function(a){var r=n;if(a===i)o(e,r);else if("mousemove"===a.type){r.drag_x!==i&&r.drag_y!==i&&2<Math.abs(e.xpos-r.drag_x)&&2<Math.abs(e.ypos-r.drag_y)&&(r.x+=e.xpos-r.drag_x,r.y+=e.ypos-r.drag_y,r.drag_x=e.xpos,r.drag_y=e.ypos);var h=r.x+v.GBorder+Math.max(0,v.sidelab),d=r.w-2*v.GBorder-Math.abs(v.sidelab),c=1.5*e.text_h,u=r.y+v.GBorder+v.toplab*(c+v.GBorder);for(a=0;a<r.items.length;a++){var x=u+c*a,f=r.items[a];f.selected=!1,t.inrect(e.xpos,e.ypos,h,x,d,c)&&(f.selected=!0)}o(e,r)}else if("mouseup"===a.type)r.drag_x=i,r.drag_y=i;else if("mousedown"===a.type)a.preventDefault(),1===a.which?e.xpos>r.x&&e.xpos<r.x+r.w&&e.ypos>r.y&&e.ypos<r.y+1.5*e.text_h?(r.drag_x=e.xpos,r.drag_y=e.ypos):s(e,r):l(e,r);else if("keydown"===a.type&&e.menu)if(r=e.menu,a.preventDefault(),a=getKeyCode(a),13===a)s(e,r);else if(38===a){for(a=0;a<r.items.length;a++){if(f=r.items[a],f.selected){f.selected=!1,r.items[a-1]!==i&&(r.items[a-1].selected=!0);break}a===r.items.length-1&&(f.selected=!0)}o(e,r)}else if(40===a){for(a=0;a<r.items.length;a++){if(f=r.items[a],f.selected){f.selected=!1,r.items[a+1]!==i&&(r.items[a+1].selected=!0);break}a===r.items.length-1&&(r.items[0].selected=!0)}o(e,r)}else if(a>=48&&57>=a||a>=65&&90>=a){for(a=String.fromCharCode(a).toUpperCase(),r.keypresses=r.keypresses===i?a:r.keypresses+a,a=h=0;a<r.items.length;a++)f=r.items[a],f.selected=!1,f.text&&0===f.text.toUpperCase().indexOf(r.keypresses)&&(0===h&&(f.selected=!0),h++);0===h?(r.keypresses=i,o(e,r)):1===h?s(e,r):o(e,r)}}}}o(e,n)}},t.widgetbox=function(e,i,n,a,r,o,s,l,h,d){t.shadowbox(e,i,n,a,r,1,2,"",.75),d&&(r=d.length,r=Math.min(r,a/e.text_w),r=Math.max(r,1),i+=(a-r*e.text_w)/2,n+=3,t.text(e,i,n+(s-n+.7*e.text_h)/2,d,e.xwfg)),l>0&&h>0&&(n=e.active_canvas.getContext("2d"),t.LEGACY_RENDER?(n.fillStyle=e.bg,n.fillRect(o,s,l,h)):(n.save(),n.globalAlpha=.1,n.fillStyle=e.bg,n.fillRect(o,s,l,h),n.restore()))},t.text=function(t,e,n,a,r){var o=t.active_canvas.getContext("2d");if(e=Math.max(0,e),n=Math.max(0,n),0>e||0>n)throw"On No!";o.textBaseline="bottom",o.textAlign="left",o.font=t.font.font,o.fillStyle=r===i?t.fg:r,o.fillText(a,e,n)},t.getcolor=function(t,e,i){for(t=0;6>t&&0===e[t+1].pos;t++);for(;i>e[t].pos&&6>t;)t++;if(0===t||i>=e[t].pos)return f(x(e[t].red),x(e[t].green),x(e[t].blue));i=x((i-e[t-1].pos)/(e[t].pos-e[t-1].pos)*100);var n=255-i;return f(e[t].red/100*i+e[t-1].red/100*n,e[t].green/100*i+e[t-1].green/100*n,e[t].blue/100*i+e[t-1].blue/100*n)},t.redraw_warpbox=function(t){t.warpbox&&(t._animationFrameHandle&&cancelAnimFrame(t._animationFrameHandle),t._animationFrameHandle=requestAnimFrame(function(){p(t)}))},t.format_g=function(e,i,n,a){Math.min(i,n+7),i=Math.abs(e).toString();var r=i.indexOf(".");-1===r&&(i+=".",r=i.length),a=0;var o=i.indexOf("e");-1!==o&&(a=parseInt(i.slice(o+1,i.length),10),i=i.slice(0,o));for(var o=Math.min(n-(i.length-r)+1,n),s=0;o>s;s++)i+="0";if(0!==e)if(1>Math.abs(e))if("0."===i.slice(0,2))for(s=2;s<i.length;s++){if("0"!==i[s]){i="0."+i.slice(s,s+n);break}a-=1}else i=i.slice(0,n+2);else r>n?(a=Math.max(0,r-1),i=i[0]+"."+i.slice(1,n+1)):i=i.slice(0,n+2);return 0===a?i+="    ":(n=t.pad(Math.abs(a).toString(),2,"0"),i=0>a?i+"E-"+n:i+"E+"+n),0>e?"-"+i:" "+i},t.format_f=function(e,i,n){return n=Math.max(Math.min(n,20),0),e=e.toFixed(n).toString(),e=t.pad(e,i+n," ")},t.pad=function(t,e,i){for(;t.length<e;)t=i+t;return t},t.legacy_shadowbox=function(i,n,a,r,o,s,l,h){for(var d=h.length,u=0,x=0,u=0,x=[],f=0;11>f;f++)x[f]={x:0,y:0};if(f=!(1===l||-1===l),0!==l&&0<t.GBorder&&(u=e.trunc(Math.min(r,o)/3),u=Math.max(1,Math.min(u,t.GBorder))),u>0){switch(x[0].x=x[1].x=n,x[8].x=x[9].x=n+r,x[1].y=x[8].y=a,x[0].y=x[9].y=a+o,s){case t.L_ArrowLeft:x[0].y=x[1].y=a+e.trunc(o/2),n+=2,--r;break;case t.L_ArrowRight:x[8].y=x[9].y=a+e.trunc(o/2),--n,--r;break;case t.L_ArrowUp:x[1].x=x[8].x=n+e.trunc(r/2),a+=2,--o;break;case t.L_ArrowDown:x[0].x=x[9].x=n+e.trunc(r/2),--a,--o}x[2]=x[8],x[10]=x[0],n+=u,a+=u,r-=2*u,o-=2*u}switch(x[4].x=x[5].x=n,x[3].x=x[6].x=n+r,x[3].y=x[4].y=a,x[5].y=x[6].y=a+o,s){case t.L_ArrowLeft:x[4].y=x[5].y=a+e.trunc(o/2);break;case t.L_ArrowRight:x[3].y=x[6].y=a+e.trunc(o/2);break;case t.L_ArrowUp:x[3].x=x[4].x=n+e.trunc(r/2);break;case t.L_ArrowDown:x[5].x=x[6].x=n+e.trunc(r/2)}x[7]=x[3],s=i.active_canvas.getContext("2d"),u>0&&(s.fillStyle=l>0?i.xwts:i.xwbs,c(s,x.slice(0,7)),s.fillStyle=0>l?i.xwts:i.xwbs,c(s,x.slice(5,11))),f&&(s.fillStyle=i.xwbg,c(s,x.slice(3,8))),s.fillStyle=i.xwfg,s.textBaseline="alphabetic",f&&d>0&&(d=Math.min(d,e.trunc(r/i.text_w)),d=Math.max(d,1),u=n+e.trunc((r-d*i.text_w)/2),x=a+e.trunc((o+.7*i.text_h)/2),s.fillText(h,u,x))},t.sigplot_shadowbox=function(i,n,a,r,o,s,l,h,d){var u=i.active_canvas.getContext("2d"),x=h.length,f=0>l?i.xwts:i.xwbs;d=d||1;for(var m=[],p=0;11>p;p++)m[p]={x:0,y:0};switch(s){case t.L_ArrowLeft:case t.L_ArrowRight:case t.L_ArrowUp:case t.L_ArrowDown:m=t.chevron(s,n,a,r,o),u.fillStyle=l>0?i.xwts:i.xwbs,c(u,m.slice(0,6));break;default:t.draw_round_box(i,f,n,a,r,o,d,i.xwbg,5,i.xwbs)}u.fillStyle=i.xwfg,u.textBaseline="alphabetic",1!==l&&-1!==l&&x>0&&(x=Math.min(x,e.trunc(r/i.text_w)),x=Math.max(x,1),n+=e.trunc((r-x*i.text_w)/2),i=a+e.trunc((o+.7*i.text_h)/2),u.fillText(h,n,i))},t.shadowbox=t.LEGACY_RENDER?t.legacy_shadowbox:t.sigplot_shadowbox,t.chevron=function(i,n,a,r,o,s){var l=Math.min(r,o);s||(s=.25*l);for(var h=[],d=0;6>d;d++)h[d]={x:0,y:0};var d=e.trunc((r-l)/2+l/4-s/2.828),c=e.trunc((o-l)/2+l/4-s/2.828);switch(i){case t.L_ArrowLeft:h[0].x=n+d,h[0].y=a+e.trunc(l/2),h[1].x=n+d+e.trunc(l/2),h[1].y=a,h[2].x=n+d+e.trunc(l/2+s/1.414),h[2].y=a+e.trunc(s/1.414),h[3].x=n+d+e.trunc(2*s/1.414),h[3].y=a+e.trunc(l/2),h[4].x=n+d+e.trunc(l/2+s/1.414),h[4].y=a+o-e.trunc(s/1.414),h[5].x=n+d+e.trunc(l/2),h[5].y=a+l;break;case t.L_ArrowRight:h[0].x=n+r-d,h[0].y=a+e.trunc(l/2),h[1].x=n+r-d-e.trunc(l/2),h[1].y=a,h[2].x=n+r-d-e.trunc(l/2+s/1.414),h[2].y=a+e.trunc(s/1.414),h[3].x=n+r-d-e.trunc(2*s/1.414),h[3].y=a+e.trunc(l/2),h[4].x=n+r-d-e.trunc(l/2+s/1.414),h[4].y=a+o-e.trunc(s/1.414),h[5].x=n+r-d-e.trunc(l/2),h[5].y=a+l;break;case t.L_ArrowUp:h[0].x=n+e.trunc(l/2),h[0].y=a+c,h[1].x=n,h[1].y=a+c+e.trunc(l/2),h[2].x=n+e.trunc(s/1.414),h[2].y=a+c+e.trunc(l/2+s/1.414),h[3].x=n+e.trunc(l/2),h[3].y=a+c+e.trunc(2*s/1.414),h[4].x=n+r-e.trunc(s/1.414),h[4].y=a+c+e.trunc(l/2+s/1.414),h[5].x=n+l,h[5].y=a+c+e.trunc(l/2);break;case t.L_ArrowDown:h[0].x=n+e.trunc(l/2),h[0].y=a+o-c,h[1].x=n,h[1].y=a+o-c-e.trunc(l/2),h[2].x=n+e.trunc(s/1.414),h[2].y=a+o-c-e.trunc(l/2+s/1.414),h[3].x=n+e.trunc(l/2),h[3].y=a+o-c-e.trunc(2*s/1.414),h[4].x=n+r-e.trunc(s/1.414),h[4].y=a+o-c-e.trunc(l/2+s/1.414),h[5].x=n+l,h[5].y=a+o-c-e.trunc(l/2)}return h},t.ifevent=function(t,e){t.button_press=0,t.button_release=0,t.state_mask=0;var n=e.target.getBoundingClientRect(),a=e.offsetX===i?e.pageX-n.left-window.scrollX:e.offsetX,n=e.offsetX===i?e.pageY-n.top-window.scrollY:e.offsetY;switch(e.type){case"mousedown":switch(t.xpos=y(a,0,t.width),t.ypos=y(n,0,t.height),e.which){case 1:t.button_press=1;break;case 2:t.button_press=2;break;case 3:t.button_press=3;break;case 4:t.button_press=4;break;case 5:t.button_press=5}break;case"mouseup":switch(t.xpos=y(a,0,t.width),t.ypos=y(n,0,t.height),e.which){case 1:t.button_release=1;break;case 2:t.button_release=2;break;case 3:t.button_release=3;break;case 4:t.button_release=4;break;case 5:t.button_release=5}}},t.scroll_real2pix=function(t){if(0===t.range)return{s1:t.a1,sw:t.a2-t.a1};var e,i;return e=(t.a2-t.a1)/t.trange,i=t.a1+Math.floor(.5+(t.smin-t.tmin)*e),e=i+Math.floor(.5+t.srange*e),i=i>t.a2-t.swmin?t.a2-t.swmin:Math.max(i,t.a1),e=e<t.a1+t.swmin?t.a1+t.swmin:Math.min(e,t.a2),{s1:i,sw:Math.max(e-i,t.swmin)}},t.redrawScrollbar=function(i,n,a){var r,o,s,l,h,d,c,u,x=n.active_canvas.getContext("2d");o=t.scroll_real2pix(i),c=o.s1,u=o.sw,d=c,o=i.x,s=i.y,l=i.w,h=i.h,1&i.origin?(r=s+h/2,2&i.origin&&(d=l-d-u),a===t.XW_DRAW&&(a=i.arrow,t.shadowbox(n,o,s,a,h-1,t.L_ArrowLeft,2,"",0),t.shadowbox(n,o+l-a,s,a-1,h,t.L_ArrowRight,2,"",0)),t.LEGACY_RENDER?(t.draw_line(n,n.fg,o+i.a1,r,o+i.a2,r),t.shadowbox(n,o+d,s,u+1,h,1,2,"",0)):(a=x.createLinearGradient(o+i.a1,0,o+i.a2,0),a.addColorStop(0,n.xwbs),a.addColorStop(.5,n.xwts),a.addColorStop(1,n.xwbs),t.draw_line(n,a,o+i.a1,r,o+i.a2,r,1),a=x.createLinearGradient(0,s,0,s+h),a.addColorStop(.1,n.xwts),a.addColorStop(.75,n.xwbs),t.draw_round_box(n,n.xwbg,o+d,s,u+1,h,1,a,8,n.xwbs))):(r=o+e.trunc(l/2),2>=i.origin&&(d=h-d-u),a===t.XW_DRAW&&(a=i.arrow,t.shadowbox(n,o,s,l-1,a,t.L_ArrowUp,2,"",0),t.shadowbox(n,o,s+h-a,l-1,a,t.L_ArrowDown,2,"",0)),t.LEGACY_RENDER?(t.draw_line(n,n.fg,r,s+i.a1,r,s+i.a2),t.shadowbox(n,o,s+d,l,u+1,1,2,"",0)):(a=x.createLinearGradient(0,s+i.a1,0,s+i.a2),a.addColorStop(0,n.xwbs),a.addColorStop(.5,n.xwts),a.addColorStop(1,n.xwbs),t.draw_line(n,a,r,s+i.a1,r,s+i.a2,1),a=x.createLinearGradient(o,0,o+l,0),a.addColorStop(.1,n.xwts),a.addColorStop(.75,n.xwbs),t.draw_round_box(n,n.xwbg,o-1,s+d,l,u+1,1,a,8,n.xwbs))),i.s1=c,i.sw=u},t.real_to_pixel=function(e,i,n,a){if(e=t.origin(e.origin,4,e.stk[e.level]),0===e.xscl||0===e.yscl)return{x:0,y:0};var r=e.x1,o=e.y1,s=e.xmin,l=1/e.xscl,h=e.ymin,d=1/e.yscl,c=!1,u=!1;return null!==i&&(c=i>e.xmax||i<e.xmin,a&&(i=Math.min(i,e.xmax),i=Math.max(i,e.xmin)),i=Math.round((i-s)*l)+r),null!==n&&(u=n>e.ymin||n<e.ymax,a&&(n=Math.min(n,e.ymin),n=Math.max(n,e.ymax)),n=Math.round((n-h)*d)+o),i=Math.round(i),n=Math.round(n),{x:i,y:n,clipped_x:c,clipped_y:u,clipped:c||u}},t.pixel_to_real=function(t,e,i){e=Math.min(t.r,Math.max(t.l,e)),i=Math.min(t.b,Math.max(t.t,i));var n=t.level;return{x:2!==t.origin&&3!==t.origin?t.stk[n].xmin+(e-t.stk[n].x1)*t.stk[n].xscl:t.stk[n].xmin+(t.stk[n].x2-e)*t.stk[n].xscl,y:2<t.origin?t.stk[n].ymin+(i-t.stk[n].y1)*t.stk[n].yscl:t.stk[n].ymin+(t.stk[n].y2-i)*t.stk[n].yscl}},t.colormap=function(t,e,i){t.pixel=Array(i);for(var n=Array(i),a=100/(Math.max(2,i)-1),r=0;i>r;r++)n[r]=a*r+.5;for(a=0;6>a&&0===e[a+1].pos;a++);for(r=0;i>r;r++){t.pixel[r]=0;for(var o=n[r];6>a&&Math.floor(o)>e[a].pos;)a++;if(0===a||o>=e[a].pos)t.pixel[r]={red:x(e[a].red),green:x(e[a].green),blue:x(e[a].blue)};else{var o=x((o-e[a-1].pos)/(e[a].pos-e[a-1].pos)*100),s=255-o;t.pixel[r]={red:e[a].red/100*o+e[a-1].red/100*s,green:e[a].green/100*o+e[a-1].green/100*s,blue:e[a].blue/100*o+e[a-1].blue/100*s}}}},t.colorbar=function(e,i,n,a,r){for(var o=1;r>o;o++)t.draw_line(e,Math.floor(e.pixel.length*(o-1)/r),i,n+r-o,i+a,n+r-o);t.draw_box(e,e.fg,i+.5,n,a,r)};var w="undefined"==typeof Uint8ClampedArray?g:_;t.shift_image_rows=function(t,e,i){return t=new Uint32Array(e),i>0?(i*=e.width,t.set(t.subarray(0,t.length-i),i)):0>i&&(i=Math.abs(i)*e.width,t.set(t.subarray(i))),e},t.update_image_row=function(t,e,i,n,a,r){n=new Uint32Array(e,n*e.width*4,e.width);var o=1;for(r!==a&&(o=t.pixel.length/Math.abs(r-a)),r=0;r<i.length;r++){var s=Math.floor((i[r]-a)*o),s=Math.max(0,Math.min(t.pixel.length-1,s));(s=t.pixel[s])&&(n[r]=-16777216|s.blue<<16|s.green<<8|s.red)}return e},t.create_image=function(i,n,a,r,o,s){i.active_canvas.getContext("2d"),i.pixel&&0!==i.pixel.length||(e.log.warn("COLORMAP not initialized, defaulting to foreground"),t.colormap(i,e.Mc.colormap[1].colors,16));var l=1;s!==o&&(l=i.pixel.length/Math.abs(s-o)),a=Math.ceil(a),r=Math.ceil(r),s=new ArrayBuffer(a*r*4),s.width=a,s.height=r;for(var h=new Uint32Array(s),d=0;d<h.length;d++){var c=Math.floor((n[(3===i.origin||4===i.origin?Math.floor(d/a):r-Math.floor(d/a)-1)*a+(1===i.origin||4===i.origin?Math.floor(d%a):a-Math.floor(d%a)-1)]-o)*l),c=Math.max(0,Math.min(i.pixel.length-1,c));(c=i.pixel[c])&&(h[d]=-16777216|c.blue<<16|c.green<<8|c.red)}return s},t.put_image=function(i,n,a,r,o,s,l,h,d,c,u){d=i.active_canvas.getContext("2d"),i.pixel&&0!==i.pixel.length||(e.log.warn("COLORMAP not initialized, defaulting to foreground"),t.colormap(i,e.Mc.colormap[1].colors,16)),a=Math.floor(o>0?a*o:-o),r=Math.floor(r*s),s=new ArrayBuffer(a*r*4),s.width=a,s.height=r,o=new Uint32Array(s);for(var x=0;x<o.length;x++){var f=Math.max(0,n[x]),f=Math.min(i.pixel.length-1,f);(f=i.pixel[f])&&(o[x]=-16777216|f.blue<<16|f.green<<8|f.red)}return w(i,d,s,c,u,l,h,a,r),s},t.draw_image=function(e,i,n,a,r,o,s,l){var h=Math.max(n,e.stk[e.level].xmin),d=Math.min(r,e.stk[e.level].xmax),c=Math.max(a,e.stk[e.level].ymin),u=Math.min(o,e.stk[e.level].ymax);if(!(1>=i.width||0===Math.abs(r-n)||1>=i.height||0===Math.abs(o-a))){r=i.width/(r-n);var x,f,m,p,y,g,_=i.height/(o-a),h=Math.floor(h*r)/r,d=Math.ceil(d*r)/r,c=Math.floor(c*_)/_,u=Math.ceil(u*_)/_;1===e.origin?(m=Math.max(0,Math.floor((o-u)*_)),g=Math.min(i.height-m,Math.floor((u-c)*_)),p=Math.max(0,Math.floor((h-n)*r)),y=Math.min(i.width-p,Math.floor((d-h)*r)),x=t.real_to_pixel(e,h,u),f=t.real_to_pixel(e,d,c)):2===e.origin?(m=Math.max(0,Math.floor((o-u)*_)),g=Math.min(i.height-m,Math.floor((u-c)*_)),p=Math.max(0,Math.ceil((h-n)*r)),y=Math.min(i.width-p,Math.floor((d-h)*r)),x=t.real_to_pixel(e,d,u),f=t.real_to_pixel(e,h,c)):3===e.origin?(m=Math.max(0,Math.ceil((c-a)*_)),g=Math.min(i.height-m,Math.floor((u-c)*_)),p=Math.max(0,Math.ceil((h-n)*r)),y=Math.min(i.width-p,Math.floor((d-h)*r)),x=t.real_to_pixel(e,d,c),f=t.real_to_pixel(e,h,u)):4===e.origin&&(m=Math.max(0,Math.ceil((c-a)*_)),g=Math.min(i.height-m,Math.floor((u-c)*_)),p=Math.max(0,Math.floor((h-n)*r)),y=Math.min(i.width-p,Math.floor((d-h)*r)),x=t.real_to_pixel(e,h,c),f=t.real_to_pixel(e,d,u)),n=f.x-x.x,f=f.y-x.y,y=Math.max(1,y),g=Math.max(1,g),"number"==typeof l&&(l=(e.r-e.l)/y<=l),a=e.active_canvas.getContext("2d"),a.save(),a.beginPath(),a.rect(e.l,e.t,e.r-e.l,e.b-e.t),a.clip(),w(e,a,i,s,l,x.x,x.y,n,f,p,m,y,g),a.restore()}}}(window.mx,window.m),function(t,e,i,n){t.Layer1D=function(t){this.plot=t,this.ybuf=this.xbuf=n,this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0,this.name="",this.cx=!1,this.hcb=n,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.ysub=this.xsub=this.skip=0,this.modified=this.xdata=!1,this.preferred_origin=this.opacity=1,this.pointbufsize=0,this.ypoint=this.xpoint=this.yptr=this.xptr=null,this.options={}},t.Layer1D.prototype={init:function(e,n){this.hcb=e,this.hcb.buf_type="D",this.ybufn=this.xbufn=this.size=this.offset=0,this.hcb.pipe?this.size=n.framesize:2===e["class"]?(i.force1000(e),this.size=e.subsize):this.size=e.size,2>=e["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===e.format[0]),this.skip=1,this.cx&&(this.skip=2),this.xstart=e.xstart,this.xdelta=e.xdelta;var a=e.xstart+e.xdelta*(this.size-1);if(this.xmin=Math.min(e.xstart,a),this.xmax=Math.max(e.xstart,a),this.xlab=e.xunits,this.ylab=e.yunits,this.hcb.pipe){this.drawmode="scrolling",this.position=0,this.tle=n.tl,this.ybufn=this.size*Math.max(this.skip*t.PointArray.BYTES_PER_ELEMENT,t.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn);var r=this;i.addPipeWriteListener(this.hcb,function(){r._onpipewrite()})}},_onpipewrite:function(){var e=new t.PointArray(this.ybuf),a=this.tle;if(a===n)a=Math.floor(i.pavail(this.hcb))/this.hcb.spa;else if(i.pavail(this.hcb)<a*this.hcb.spa)return;var r=a*this.hcb.spa;if("lefttoright"===this.drawmode)this.position=0,e.set(e.subarray(0,this.size-r),r);else if("righttoleft"===this.drawmode)this.position=this.size-a,e.set(e.subarray(r),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";a=Math.min(a,this.size-this.position),0!==i.grabx(this.hcb,e,a*this.hcb.spa,this.position*this.hcb.spa)&&(this.position=(this.position+a)%this.size,1<this.plot._Gx.autol&&this.plot.rescale())},get_data:function(t,e){var i,n=this.plot._Gx,a=this.hcb,r=this.skip;i=2===a["class"]?a.subsize:a.size;var o=0,s=0;n.index?(o=Math.floor(t),s=Math.floor(e+.5)):a.xdelta>=0?(o=Math.floor((t-a.xstart)/a.xdelta)-1,s=Math.floor((e-a.xstart)/a.xdelta+.5)):(o=Math.floor((e-a.xstart)/a.xdelta)-1,s=Math.floor((t-a.xstart)/a.xdelta+.5)),o=Math.max(0,o),s=Math.min(i,s);var l=Math.max(0,Math.min(s-o+1,n.bufmax));if(a.xdelta<0&&(o=s-l+1),o>=this.imin&&o+l<=this.imin+this.size&&void 0!==this.ybuf);else if(this.modified);else if(a["class"]<=2){var h=this.offset+o,d=s-o+1;d>n.bufmax&&(this.skip=parseInt(d/n.bufmax));var r=this.skip;this.ybufn=l*Math.max(r*sigplot.PointArray.BYTES_PER_ELEMENT,sigplot.PointArray.BYTES_PER_ELEMENT),(void 0===this.ybuf||this.ybuf.byteLength<this.ybufn)&&(this.ybuf=new ArrayBuffer(this.ybufn));var c=new sigplot.PointArray(this.ybuf),u=m.grab(a,c,h,l);this.imin=o,this.xstart=a.xstart+o*this.xdelta,this.size=u}},change_settings:function(e){if(e.index!==n)if(e.index)this.xmin=this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i)}e.drawmode!==n&&(this.drawmode=e.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*t.PointArray.BYTES_PER_ELEMENT,t.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(t,e){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var a=this.hcb.dview.length!==t.length||e;if(e)for(var r in e)this.hcb[r]=e[r],("xstart"===r||"xdelta"===r)&&(a=!0);this.hcb.setData(t),this.imin=0,this.xstart=n,this.size=0,r=this.xmin;var o=this.xmax;return a&&(2===this.hcb["class"]&&i.force1000(this.hcb),a=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,a),this.xmax=Math.max(this.hcb.xstart,a),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,o=r=n),{xmin:r,xmax:o}},push:function(e,n,a){if(n){for(var r in n)this.hcb[r]=n[r],"type"===r&&(this.hcb["class"]=n[r]/1e3);n.subsize&&2===this.hcb["class"]&&(i.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*t.PointArray.BYTES_PER_ELEMENT,t.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)),r=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,r),this.xmax=Math.max(this.hcb.xstart,r),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart}return i.filad(this.hcb,e,a),n?!0:!1},prep:function(e,n){var a=this.plot._Gx,r=this.plot._Mx,o=Math.ceil(this.size),s=this.skip;if(0===o)return{num:0,start:0,end:0};o*t.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=o*t.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new t.PointArray(this.xptr),this.ypoint=new t.PointArray(this.yptr));var l,h,d,c=new t.PointArray(this.ybuf),u=this.xmin,x=this.xmax;if(5===a.cmode||0<this.xsub)0>=o?(u=a.panxmin,x=a.panxmax):5!==a.cmode?this.xpoint=new t.PointArray(this.xbuf):this.cx?i.vmov(c,s,this.xpoint,1,o):0!==this.line?(d=i.vmxmn(c,o),this.xpoint[0]=d.smax,this.xpoint[1]=d.smin,l=0,o=h=2):this.xpoint=c,o>0&&(d=i.vmxmn(this.xpoint,o),x=d.smax,u=d.smin,l=0,h=o);else if(o>0){d=this.xstart;var f=this.xdelta;h=o,a.index?(l=0,h=o-1):f>=0?(l=Math.max(1,Math.min(h,Math.round((e-d)/f)))-1,h=Math.max(1,Math.min(h,Math.round((n-d)/f)+2))-1):(l=Math.max(1,Math.min(h,Math.round((n-d)/f)-1))-1,h=Math.max(1,Math.min(h,Math.round((e-d)/f)+2))-1),o=h-l+1,0>o&&(i.log.debug("Nothing to plot"),o=0),c=new t.PointArray(this.ybuf).subarray(l*s),d+=f*l;for(var m=0;o>m;m++)this.xpoint[m]=a.index?this.imin+m+1:d+m*f}if(a.panxmin>a.panxmax?(a.panxmin=u,a.panxmax=x):(a.panxmin=Math.min(a.panxmin,u),a.panxmax=Math.max(a.panxmax,x)),!(0>=o)){if(this.cx)1===a.cmode?i.cvmag(c,this.ypoint,o):2===a.cmode?25===a.plab?(i.cvpha(c,this.ypoint,o),i.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,o)):24!==a.plab?i.cvpha(c,this.ypoint,o):i.cvphad(c,this.ypoint,o):3===a.cmode?i.vmov(c,s,this.ypoint,1,o):6<=a.cmode?i.cvmag2(c,this.ypoint,o):4<=a.cmode&&i.vmov(c.subarray(1),s,this.ypoint,1,o);else if(5===a.cmode)i.vfill(this.ypoint,0,o);else if(1===a.cmode||6<=a.cmode)for(m=0;o>m;m++)this.ypoint[m]=Math.abs(c[m]);else for(m=0;o>m;m++)this.ypoint[m]=c[m];return 6<=a.cmode&&(i.vlog10(this.ypoint,a.dbmin,this.ypoint),u=10,7===a.cmode&&(u=20),0<a.lyr.length&&a.lyr[0].cx&&(u/=2),i.vsmul(this.ypoint,u,this.ypoint)),d=i.vmxmn(this.ypoint,o),x=d.smax,u=d.smin,s=x-u,0>s&&(x=u,u=x+s,s=-s),1e-20>=s?(u-=1,x+=1):(u-=.02*s,x+=.02*s),0===r.level&&(a.panymin>a.panymax?(a.panymin=u,a.panymax=x):(a.panymin=Math.min(a.panymin,u),a.panymax=Math.max(a.panymax,x)),1<a.autol&&(u=1/Math.max(a.autol,1),a.panymin=a.panymin*u+r.stk[0].ymin*(1-u),a.panymax=a.panymax*u+r.stk[0].ymax*(1-u))),{num:o,start:l,end:h}}i.log.debug("Nothing to plot")},draw:function(){var t=this.plot._Mx,e=this.plot._Gx,i=this.color,n=this.symbol,a=this.radius,r=0,o=0,s={};s.fillStyle=e.fillStyle,this.options&&(s.highlight=this.options.highlight,s.noclip=this.options.noclip),0===this.line?o=0:(o=1,this.thick>0?o=this.thick:this.thick<0&&(o=Math.abs(this.thick),s.dashed=!0),1===this.line&&(s.vertsym=!0),2===this.line&&(s.horzsym=!0));var l,h,d=e.segment&&5!==e.cmode&&this.xsub>0&&0===r,c=this.xdelta;if(this.xdata?(l=this.xmin,h=this.xmax):(l=Math.max(this.xmin,t.stk[t.level].xmin),h=Math.min(this.xmax,t.stk[t.level].xmax),l>=h&&(e.panxmin=Math.min(e.panxmin,this.xmin),e.panxmax=Math.max(e.panxmax,this.xmax))),!e.all){var u=(e.bufmax-1)*c;u>=-0?h=Math.min(h,l+u):l=Math.max(l,h+u)}if(0!==o||0!==n){for(;h>l;){this.hcb.pipe||this.get_data(l,h);var x=this.prep(l,h);x.num>0&&(d||mx.trace(t,i,new sigplot.PointArray(this.xptr),new sigplot.PointArray(this.yptr),x.num,x.start,this.skip,o,n,a,s)),e.all?0===this.size?l=h:e.index?l+=x.num:c>=0?l+=this.size*c:h+=this.size*c:l=h}if(this.position&&"scrolling"===this.drawmode){var f=mx.real_to_pixel(t,this.position*this.xdelta,0);f.x>t.l&&f.x<t.r&&mx.draw_line(t,"white",f.x,t.t,f.x,t.b)}}},add_highlight:function(t){this.options.highlight||(this.options.highlight=[]),t instanceof Array?this.options.highlight.push.apply(this.options.highlight,t):this.options.highlight.push(t),this.plot.refresh()},remove_highlight:function(t){if(this.options.highlight){for(var e=this.options.highlight.length;e--;)t!==this.options.highlight[e]&&t!==this.options.highlight[e].id||this.options.highlight.splice(e,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=n,this.plot.refresh())}};var a=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];t.Layer1D.overlay=function(r,o,s){var l=r._Gx,h=r._Mx;2===o["class"]&&i.force1000(o),o.buf_type="D";var d=1;2===o["class"]&&0<o.size&&(d=Math.min(o.size/o.subsize,16-l.lyr.length));var c=s.name;delete s.name;for(var u=0;d>u;u++){var x=new t.Layer1D(r);x.init(o,s),x.color=e.getcolor(h,i.Mc.colormap[3].colors,a[l.lyr.length%a.length]),2===o["class"]?(c!==n&&(Array.isArray(c)?x.name=c[u]:(x.name=c,x.name=x.name+"."+e.pad((u+1).toString(),3,"0"))),x.name||(x.name=o.file_name?i.trim_name(o.file_name):"layer_"+l.lyr.length,x.name=x.name+"."+e.pad((u+1).toString(),3,"0")),x.offset=u*o.subsize):(x.name=c!==n?c:o.file_name?i.trim_name(o.file_name):"layer_"+l.lyr.length,x.offset=0);for(var f in s)x[f]!==n&&(x[f]=s[f]);r.add_layer(x)}}}(window.sigplot=window.sigplot||{},mx,m),function(t,e,i,n){t.Layer2D=function(t){this.plot=t,this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0,this.name="",this.cx=!1,this.hcb=n,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.ysub=this.xsub=this.skip=0,this.modified=this.xdata=!1,this.preferred_origin=4,this.opacity=1,this.lpb=n,this.yc=1,this.options={}},t.Layer2D.prototype={init:function(e){var n=this.plot._Gx,a=this.plot._Mx;if(this.hcb=e,this.hcb.buf_type="D",this.hcb.pipe){var r=this;this.frame=this.position=0,this.lps=this.hcb.lps||Math.ceil(Math.max(1,a.b-a.t)),i.addPipeWriteListener(this.hcb,function(){r._onpipewrite()}),this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new t.PointArray(this.lps*this.hcb.subsize)}else this.lps=this.hcb.lps||Math.ceil(e.size);this.ybufn=this.xbufn=this.offset=0,this.drawmode="scrolling",2>=e["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===e.format[0]),this.skip=1,this.cx&&(this.skip=2),n.index?(this.xmin=this.xdelta=this.xstart=1,this.xmax=e.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=this.size):(this.xstart=e.xstart,this.xdelta=e.xdelta,n=e.xstart+e.xdelta*(e.subsize-1),this.xmin=Math.min(e.xstart,n),this.xmax=Math.max(e.xstart,n),this.ystart=e.ystart,this.ydelta=e.ydelta,n=e.ystart+e.ydelta*(this.lps-1),this.ymin=Math.min(e.ystart,n),this.ymax=Math.max(e.ystart,n)),this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,0===this.lpb&&(this.lpb=this.yframe),(!this.lpb||0>=this.lpb)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,this.xlab=e.xunits,this.ylab=e.yunits},_onpipewrite:function(){var n=this.plot._Gx,a=this.plot._Mx;if(!(i.pavail(this.hcb)<this.hcb.subsize*this.hcb.spa)){if("scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart),"falling"===this.drawmode)this.position=0,this.buf.set(this.buf.subarray(0,(this.lps-1)*this.hcb.subsize*this.hcb.spa),this.hcb.subsize*this.hcb.spa),this.img&&e.shift_image_rows(a,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.buf.set(this.buf.subarray(this.hcb.subsize*this.hcb.spa),0),this.img&&e.shift_image_rows(a,this.img,-1);else{if("scrolling"!==this.drawmode)throw"Invalid draw mode";this.position>=this.lps&&(this.position=0)}if(0===i.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa,this.position*this.hcb.subsize*this.hcb.spa))i.log.error("Internal error");else{var r=this.buf.subarray(this.position*this.hcb.subsize*this.hcb.spa,(this.position+1)*this.hcb.subsize*this.hcb.spa),o=new t.PointArray(this.hcb.subsize);this.cx?1===n.cmode?i.cvmag(r,o,o.length):2===n.cmode?25===n.plab?(i.cvpha(r,o,o.length),i.vsmul(o,1/(2*Math.PI),o,o.length)):24!==n.plab?i.cvpha(r,o,o.length):i.cvphad(r,o,o.length):3===n.cmode?i.vmov(r,this.skip,o,1,o.length):4===n.cmode?i.vmov(r.subarray(1),this.skip,o,1,o.length):5===n.cmode?i.vfill(o,0,o.length):6===n.cmode?i.cvmag2logscale(r,n.dbmin,10,o):7===n.cmode&&i.cvmag2logscale(r,n.dbmin,20,o):1===n.cmode?i.vabs(r,o):2===n.cmode?i.vfill(o,0,o.length):3===n.cmode?i.vmov(r,this.skip,o,1,o.length):4===n.cmode?i.vfill(o,0,o.length):5===n.cmode?i.vfill(o,0,o.length):6===n.cmode?i.vlogscale(r,n.dbmin,10,o):7===n.cmode&&i.vlogscale(r,n.dbmin,20,o);for(var r=o[0],s=o[0],l=0;l<o.length;l++)o[l]<r&&(r=o[l]),o[l]>s&&(s=o[l]);var h,d;1===n.autol?(h=r,d=s):1<n.autol&&(d=1/Math.max(n.autol,1),h=n.zmin*d+r*(1-d),d=n.zmax*d+s*(1-d)),0!==(1&n.autoz)&&(n.zmin=h),0!==(2&n.autoz)&&(n.zmax=d),this.img&&e.update_image_row(a,this.img,o,this.position,n.zmin,n.zmax),this.frame+=1,"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps),0===a.level&&(n.panymin=this.ymin,n.panymax=this.ymax,a.stk[0].ymin=this.ymin,a.stk[0].ymax=this.ymax)}}},get_data:function(){var e=this.hcb;this.buf||(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new t.PointArray(this.lps*this.hcb.subsize)),this.hcb.pipe||i.grab(e,this.buf,0,e.subsize)},get_z:function(t,e){return this.zbuf[Math.floor(e/this.hcb.ydelta)*this.hcb.subsize+Math.floor(t/this.hcb.xdelta)]},change_settings:function(e){var i=this.plot._Gx;e.cmode!==n&&(this.img=n,0!==(1&i.autoz)&&(i.zmin=n),0!==(2&i.autoz)&&(i.zmax=n)),(e.zmin!==n||e.zmax!==n||e.autoz!==n)&&(this.img=n),e.cmap!==n&&(this.img=n),e.drawmode!==n&&(this.drawmode=e.drawmode,this.frame=this.position=0,this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new t.PointArray(this.lps*this.hcb.subsize),this.img=n,this.preferred_origin="falling"===this.drawmode?this.plot._Mx.origin=1:this.plot._Mx.origin=4)},push:function(e,n,a){var r=!1,o=null;if(n){n.timestamp&&(o=n.timestamp,delete n.timestamp),n.subsize&&n.subsize!==this.hcb.subsize&&(this.hcb.subsize=n.subsize,this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new t.PointArray(this.lps*this.hcb.subsize),r=!0);for(var s in n)this.hcb[s]!==n[s]&&(this.hcb[s]=n[s],"type"===s&&(this.hcb["class"]=n[s]/1e3),r=!0);n.lps&&(this.lps=n.lps),r&&(n=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-1),this.xmin=Math.min(this.hcb.xstart,n),this.xmax=Math.max(this.hcb.xstart,n),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,n=this.hcb.ystart+this.hcb.ydelta*(this.lps-1),this.ymin=Math.min(this.hcb.ystart,n),this.ymax=Math.max(this.hcb.ystart,n))}return 1!==this.hcb.yunits&&4!==this.hcb.yunits||this.hcb.timecode||!o||(this.hcb.timecode=i.j1970toj1950(o),this.hcb.ystart=0,r=!0),i.filad(this.hcb,e,a),r},prep:function(t,a){var r,o=this.plot._Gx,s=this.plot._Mx,l=this.lps,h=this.xmin,d=this.xmax;if(this.get_data(t,a),!(5===o.cmode||0<this.xsub)&&l>0){var c=this.xstart,u=this.xdelta,x=l;o.index?(r=0,l-=1):u>=0?(r=Math.max(1,Math.min(x,Math.round((t-c)/u)))-1,l=Math.max(1,Math.min(x,Math.round((a-c)/u)+2))-1):(r=Math.max(1,Math.min(x,Math.round((a-c)/u)-1))-1,l=Math.max(1,Math.min(x,Math.round((t-c)/u)+2))-1),l=l-r+1,0>l&&(i.log.debug("Nothing to plot"),l=0)}if(o.panxmin>o.panxmax?(o.panxmin=h,o.panxmax=d):(o.panxmin=Math.min(o.panxmin,h),o.panxmax=Math.max(o.panxmax,d)),!(0>=l)){if(!(5===o.cmode||0<this.ysub)&&l>0&&(h=this.ystart,d=this.ydelta,x=l,o.index?(r=0,l-=1):d>=0?(r=Math.max(1,Math.min(x,Math.round((t-h)/d)))-1,l=Math.max(1,Math.min(x,Math.round((a-h)/d)+2))-1):(r=Math.max(1,Math.min(x,Math.round((a-h)/d)-1))-1,l=Math.max(1,Math.min(x,Math.round((t-h)/d)+2))-1),l=l-r+1,0>l&&(i.log.debug("Nothing to plot"),l=0)),o.panymin>o.panxmax?(o.panymin=this.ymin,o.panymax=this.ymax):(o.panymin=Math.min(o.panymin,this.ymin),o.panymax=Math.max(o.panymax,this.ymax)),this.cx?1===o.cmode?i.cvmag(this.buf,this.zbuf,this.zbuf.length):2===o.cmode?25===o.plab?(i.cvpha(this.buf,this.zbuf,this.zbuf.length),i.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==o.plab?i.cvpha(this.buf,this.zbuf,this.zbuf.length):i.cvphad(this.buf,this.zbuf,this.zbuf.length):3===o.cmode?i.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===o.cmode?i.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===o.cmode?i.vfill(this.zbuf,0,this.zbuf.length):6===o.cmode?i.cvmag2logscale(this.buf,o.dbmin,10,this.zbuf):7===o.cmode&&i.cvmag2logscale(this.buf,o.dbmin,20,this.zbuf):1===o.cmode?i.vabs(this.buf,this.zbuf):2===o.cmode?i.vfill(this.zbuf,0,this.zbuf.length):3===o.cmode?i.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===o.cmode?i.vfill(this.zbuf,0,this.zbuf.length):5===o.cmode?i.vfill(this.zbuf,0,this.zbuf.length):6===o.cmode?i.vlogscale(this.buf,o.dbmin,10,this.zbuf):7===o.cmode&&i.vlogscale(this.buf,o.dbmin,20,this.zbuf),
x=this.zbuf,this.hcb.pipe&&this.frame<this.lps&&(x="rising"===this.drawmode?this.zbuf.subarray(this.zbuf.length-this.frame*this.hcb.subsize):this.zbuf.subarray(0,this.frame*this.hcb.subsize)),d=h=0,0<x.length)for(h=x[0],d=x[0],r=0;r<x.length&&!(r/this.xframe>=this.lpb);r++)x[r]<h&&(h=x[r]),x[r]>d&&(d=x[r]);if(0!==(1&o.autoz)&&(o.zmin=o.zmin!==n?Math.min(o.zmin,h):h),0!==(2&o.autoz)&&(o.zmax=o.zmax!==n?Math.min(o.zmax,d):d),this.img=e.create_image(s,this.zbuf,this.hcb.subsize,this.lps,o.zmin,o.zmax),this.img.cmode=o.cmode,this.img.cmap=o.cmap,this.img.origin=s.origin,this.hcb.pipe&&this.frame<this.lps)if(o=new Uint32Array(this.img),"rising"===this.drawmode)for(r=0;r<o.length-this.frame*this.hcb.subsize;r++)o[r]=0;else for(r=this.frame*this.hcb.subsize;r<o.length;r++)o[r]=0;return l}i.log.debug("Nothing to plot")},draw:function(){var i=this.plot._Mx,n=this.plot._Gx,a=this.hcb;if(this.hcb.pipe){var r=this.hcb.lps||Math.ceil(Math.max(1,i.b-i.t));if(r!==this.lps&&this.buf){var o=this.hcb.createArray(null,0,r*this.hcb.subsize*this.hcb.spa),s=new t.PointArray(r*this.hcb.subsize);o.set(this.buf.subarray(0,o.length)),s.set(this.zbuf.subarray(0,s.length)),this.buf=o,this.zbuf=s,this.lps=r,this.position>=this.lps&&(this.position=0),r=a.ystart+a.ydelta*(this.lps-1),this.ymin=Math.min(a.ystart,r),this.ymax=Math.max(a.ystart,r),this.plot.rescale()}}if(r=Math.max(this.xmin,i.stk[i.level].xmin),o=Math.min(this.xmax,i.stk[i.level].xmax),r>=o)n.panxmin=Math.min(n.panxmin,this.xmin),n.panxmax=Math.max(n.panxmax,this.xmax);else{var l=Math.max(this.ymin,i.stk[i.level].ymin),h=Math.min(this.ymax,i.stk[i.level].ymax),s=Math.abs(o-r)+1,d=Math.abs(h-l)+1,s=Math.floor(s/a.xdelta),d=Math.floor(d/a.ydelta),s=Math.min(s,a.subsize),d=Math.min(d,a.size),a=e.real_to_pixel(i,r,l),h=e.real_to_pixel(i,o,h),d=(h.y-a.y)/d;n.xe=Math.max(1,Math.round((h.x-a.x)/s)),n.ye=Math.max(1,Math.round(d)),this.img?n.cmode===this.img.cmode&&n.cmap===this.img.cmap&&i.origin===this.img.origin||this.prep(r,o):this.prep(r,o),this.img&&e.draw_image(i,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,n.rasterSmoothing),null!==this.position&&"scrolling"===this.drawmode&&(n=e.real_to_pixel(i,0,this.position*this.ydelta),n.y>i.t&&n.y<i.b&&e.draw_line(i,"white",i.l,n.y,i.r,n.y))}}},t.Layer2D.overlay=function(e,n,a){var r=e._Gx;n.buf_type="D";var o=new t.Layer2D(e);o.init(n),o.name=n.file_name?i.trim_name(n.file_name):"layer_"+r.lyr.length,o.change_settings(a),e.add_layer(o)}}(window.sigplot=window.sigplot||{},mx,m),window.sigplot=window.sigplot||{},function(t,e,i){function n(){this.yptr=this.xptr=void 0,this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0,this.xmult=void 0,this.ymax=this.ymin=0,this.zmax=this.zmin=this.ymult=void 0,this.pmt=this.pyscl=this.pxscl=this.dbmin=0,this.format=this.note="",this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0,this.modified=!1,this.ydiv=this.xdiv=this.modmode=0,this.cross=this.expand=this.all=!1,this.grid=!0,this.gridBackground=void 0,this.index=!1,this.legend=this.specs=this.pan=!0,this.xdata=!1,this.show_readout=this.show_y_axis=this.show_x_axis=!0,this.autohide_panbars=this.autohide_readout=this.hide_note=!1,this.panning=void 0,this.panmode=0,this.hold=!1,this.isec=this.nsec=this.iysec=this.sections=0,this.ylab=this.xlab=void 0,this.default_rubberbox_action="zoom",this.default_rubberbox_mode="box",this.wheelscroll_mode_natural=!0,this.scroll_time_interval=10,this.stillPanning=this.repeatPanning=void 0,this.autol=-1,this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1,this.wheelZoomPercent=.2,this.inContinuousZoom=!1,this.lyr=[],this.HCB=[],this.plugins=[],this.plotData=document.createElement("canvas"),this.plotData.valid=!1}function a(t,n){var a=t._Gx,r=t._Mx;if(Array.isArray(n)){var o={name:"Custom",colors:n};"Custom"===i.Mc.colormap[i.Mc.colormap.length-1].name?i.Mc.colormap[i.Mc.colormap.length-1].colors=n:i.Mc.colormap.push(o),a.cmap=i.Mc.colormap.length-1}else if("string"==typeof n){for(a.cmap=-1,o=0;o<i.Mc.colormap.length;o++)if(i.Mc.colormap[o].name===n){a.cmap=o;break}}else a.cmap=n;0>a.ncolors&&(a.ncolors*=-1,a.cmap=Math.max(1,a.cmap)),(0>a.cmap||a.cmap>i.Mc.colormap.length)&&(a.cmap=2===a.cmode?2:1),e.colormap(r,i.Mc.colormap[a.cmap].colors,a.ncolors)}function r(t,i){var n=t._Mx;e.removeEventListener(n,"mousedown",t.onmousedown,!1),e.menu(n,{title:"SCROLLBAR",refresh:function(){t.refresh()},finalize:function(){e.addEventListener(n,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Expand Range",handler:function(){A(t,e.SB_EXPAND,i)}},{text:"Shrink Range",handler:function(){A(t,e.SB_SHRINK,i)}},{text:"Expand Full",handler:function(){A(t,e.SB_FULL,i)}}]})}function o(t){var n=t._Gx,a=t._Mx;e.removeEventListener(a,"mousedown",t.onmousedown,!1);for(var r={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===n.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===n.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===n.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===n.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===n.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},o={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===n.cmode,handler:function(){t.change_settings({cmode:1})}},{text:"Phase",checked:2===n.cmode,handler:function(){t.change_settings({cmode:2})}},{text:"Real",checked:3===n.cmode,handler:function(){t.change_settings({cmode:3})}},{text:"Imaginary",checked:4===n.cmode,handler:function(){t.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===n.cmode,handler:function(){t.change_settings({cmode:5})}},{text:"10*Log10",checked:6===n.cmode,handler:function(){t.change_settings({cmode:6})}},{text:"20*Log10",checked:7===n.cmode,handler:function(){t.change_settings({cmode:7})}}]}},s={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===n.autoy,handler:function(){n.autoy=0,_(t,"Y Axis Min:",e.floatValidator,function(e){parseFloat(e)!==a.stk[a.level].ymin?(""===e&&(e=0),L(t,parseFloat(e),a.stk[a.level].ymax,"Y")):t.refresh()},a.stk[a.level].ymin,void 0,void 0,function(){_(t,"Y Axis Max:",e.floatValidator,function(e){parseFloat(e)!==a.stk[a.level].ymax?(""===e&&(e=0),L(t,a.stk[a.level].ymin,parseFloat(e),"Y")):t.refresh()},a.stk[a.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===n.autoy,handler:function(){n.autoy=1}},{text:"Max Auto",checked:2===n.autoy,handler:function(){n.autoy=2}},{text:"Full Auto",checked:3===n.autoy,handler:function(){n.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===n.autox,handler:function(){n.autox=0,_(t,"X Axis Min:",e.floatValidator,function(e){parseFloat(e)!==a.stk[a.level].xmin?(""===e&&(e=0),L(t,parseFloat(e),a.stk[a.level].xmax,"X")):t.refresh()},a.stk[a.level].xmin,void 0,void 0,function(){_(t,"X Axis Max:",e.floatValidator,function(e){parseFloat(e)!==a.stk[a.level].xmax?(""===e&&(e=0),L(t,a.stk[a.level].xmin,parseFloat(e),"X")):t.refresh()},a.stk[a.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===n.autox,handler:function(){n.autox=1}},{text:"Max Auto",checked:2===n.autox,handler:function(){n.autox=2}},{text:"Full Auto",checked:3===n.autox,handler:function(){n.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:0===n.autoz,handler:function(){n.autoz=0,_(t,"Z Axis Min:",e.floatValidator,function(e){parseFloat(e)!==n.zmin&&(""===e&&(e=0),t.change_settings({zmin:e}))},n.zmin,void 0,void 0,function(){_(t,"Z Axis Max:",e.floatValidator,function(e){parseFloat(e)!==n.zmax&&(""===e&&(e=0),t.change_settings({zmax:e}))},n.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===n.autoz,handler:function(){t.change_settings({autoz:1})}},{text:"Max Auto",checked:2===n.autoz,handler:function(){t.change_settings({autoz:2})}},{text:"Full Auto",checked:3===n.autoz,handler:function(){t.change_settings({autoz:3})}}]}},l={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:n.all,style:"checkbox",handler:function(){t.change_settings({all:!n.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===n.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===n.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===n.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===n.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===n.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===n.default_rubberbox_action,handler:function(){n.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===n.default_rubberbox_action,handler:function(){n.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===n.default_rubberbox_action,handler:function(){n.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===n.default_rightclick_rubberbox_action,handler:function(){n.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===n.default_rightclick_rubberbox_action,handler:function(){n.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===n.default_rightclick_rubberbox_action,handler:function(){n.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===n.default_rubberbox_mode,handler:function(){n.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===n.default_rubberbox_mode,handler:function(){n.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===n.default_rubberbox_mode,handler:function(){n.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!n.cross,handler:function(){n.cross=!1}},{text:"On",checked:!0===n.cross,handler:function(){n.cross=!0}},{text:"Horizontal",checked:"horizontal"===n.cross,handler:function(){n.cross="horizontal"}},{text:"Vertical",checked:"vertical"===n.cross,handler:function(){n.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:n.wheelscroll_mode_natural,style:"checkbox",handler:function(){t.change_settings({wheelscroll_mode_natural:!n.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:n.cross,style:"checkbox",handler:function(){t.change_settings({cross:!n.cross})}},{text:"GRID",checked:n.grid,style:"checkbox",handler:function(){t.change_settings({grid:!n.grid})}},{text:"INDEX Mode",checked:n.index,style:"checkbox",handler:function(){t.change_settings({index:!n.index})}},{text:"LEGEND",checked:n.legend,style:"checkbox",handler:function(){t.change_settings({legend:!n.legend})}},{text:"PAN Scrollbars",checked:n.pan,style:"checkbox",handler:function(){t.change_settings({pan:!n.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===n.plab,handler:function(){t.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===n.plab,handler:function(){t.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===n.plab,handler:function(){t.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:n.specs,style:"checkbox",handler:function(){t.change_settings({specs:!n.specs})}},{text:"XDIVisions...",handler:function(){_(t,"X Divisions:",function(t){var n=e.intValidator(t),r=i.trunc(a.width/2);return n.valid&&t>r?{valid:!1,reason:"Exceeds maximum number of divisions ("+r+")."}:n},function(e){parseFloat(e)!==n.xdiv&&(""===e&&(e=1),n.xdiv=parseFloat(e)),t.refresh()},n.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){_(t,"X Units:",function(t){return console.log("The value is "+t),e.intValidator(t)},function(e){parseFloat(e)!==n.xlab&&(0>e&&(e=0),n.xlab=parseFloat(e)),t.refresh()},n.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){_(t,"Y Divisions:",function(t){var n=e.intValidator(t),r=i.trunc(a.height/2);return n.valid&&t>r?{valid:!1,reason:"Exceeds maximum number of divisions ("+r+")."}:n},function(e){parseFloat(e)!==n.ydiv&&(""===e&&(e=1),n.ydiv=parseFloat(e)),t.refresh()},n.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===a.origin,style:"checkbox",handler:function(){t.change_settings({yinv:4!==a.origin})}},{text:"YLABel...",handler:function(){_(t,"Y Units:",function(t){return e.intValidator(t)},function(e){parseFloat(e)!==n.ylab&&(0>e&&(e=0),n.ylab=parseFloat(e)),t.refresh()},n.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:n.show_x_axis,style:"checkbox",handler:function(){t.change_settings({show_x_axis:!n.show_x_axis})}},{text:"Y-axis",checked:n.show_y_axis,style:"checkbox",handler:function(){t.change_settings({show_y_axis:!n.show_y_axis})}},{text:"Readout",checked:n.show_readout,style:"checkbox",handler:function(){t.change_settings({show_readout:!n.show_readout})}},{text:"Invert Colors",checked:a.xi,style:"checkbox",handler:function(){e.invertbgfg(a)}}]}},h={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},d=function(e){t.change_settings({cmap:this.cmap})},c=0;c<i.Mc.colormap.length;c++)h.menu.items.push({text:i.Mc.colormap[c].name,cmap:c,checked:n.cmap===c,handler:d});var u=function(i){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var a=1;if(void 0!==i)a=Math.abs(t._Gx.lyr[i].thick);else{if(0===n.lyr.length)return;for(var a=Math.abs(t._Gx.lyr[0].thick),r=0;r<n.lyr.length;r++)if(a!==Math.abs(t._Gx.lyr[r].thick)){a=1;break}}_(t,"Line thickness:",e.intValidator,function(e){if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=-1*e,t._Gx.lyr[i].symbol=0;else for(var i=0;i<n.lyr.length;i++)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=-1*e,t._Gx.lyr[i].symbol=0},a)}},{text:"Dots...",handler:function(){var a=3;if(void 0!==i)a=Math.abs(t._Gx.lyr[i].radius);else{if(0===n.lyr.length)return;for(var r=0;r<n.lyr.length;r++)if(a!==Math.abs(t._Gx.lyr[r].radius)){a=3;break}}_(t,"Radius/Shape:",e.intValidator,function(e){var a;if(0>e?(a=3,e=Math.abs(e)):e>0?a=2:(a=1,e=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=e,t._Gx.lyr[i].symbol=a;else for(var r=0;r<n.lyr.length;r++)t._Gx.lyr[r].line=0,t._Gx.lyr[r].radius=e,t._Gx.lyr[r].symbol=a},a)}},{text:"Solid...",handler:function(){var a=1;if(void 0!==i)a=Math.abs(t._Gx.lyr[i].thick);else{if(0===n.lyr.length)return;for(var a=Math.abs(t._Gx.lyr[0].thick),r=0;r<n.lyr.length;r++)if(a!==Math.abs(t._Gx.lyr[r].thick)){a=1;break}}_(t,"Line thickness:",e.intValidator,function(e){if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=e,t._Gx.lyr[i].symbol=0;else for(var a=0;a<n.lyr.length;a++)t._Gx.lyr[a].line=3,t._Gx.lyr[a].thick=e,t._Gx.lyr[a].symbol=0},a)}},{text:"Toggle",style:void 0!==i?"checkbox":void 0,checked:void 0!==i?t._Gx.lyr[i].display:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].display=!t._Gx.lyr[i].display;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].display=!t._Gx.lyr[e].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=0,t._Gx.lyr[i].symbol=0;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=0,t._Gx.lyr[e].symbol=0}},{text:"Pixels",checked:void 0!==i?1===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=1,t._Gx.lyr[i].symbol=1;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=1,t._Gx.lyr[e].symbol=1}},{text:"Circles",checked:void 0!==i?2===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=2;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=2}},{text:"Squares",checked:void 0!==i?3===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=3;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=3}},{text:"Plusses",checked:void 0!==i?4===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=4;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=4}},{text:"X's",checked:void 0!==i?5===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=5;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=5}},{text:"Triangles",checked:void 0!==i?6===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=6;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=6}},{text:"Downward Triangles",checked:void 0!==i?7===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=7;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=0;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].line=0}},{text:"Verticals",checked:void 0!==i?1===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=1;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].line=1}},{text:"Horizontals",checked:void 0!==i?2===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=2;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].line=2}},{text:"Connecting",checked:void 0!==i?3===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=3;else for(var e=0;e<n.lyr.length;e++)t._Gx.lyr[e].line=3}}]}},{text:"Thickness...",handler:function(){var a=1;void 0!==i&&(a=t._Gx.lyr[i].thick),_(t,"Thickness",e.intValidator,function(e){if(""===e&&(e=1),e=Math.max(0,e),void 0!==i)t._Gx.lyr[i].thick=e;else for(var a=0;a<n.lyr.length;a++)t._Gx.lyr[a].thick=e},a,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var a=1;void 0!==i&&(a=t._Gx.lyr[i].opacity),_(t,"Opacity:",e.floatValidator,function(e){if(""===e&&(e=1),e=Math.max(0,e),e=Math.min(1,e),void 0!==i)t._Gx.lyr[i].opacity=e;else for(var a=0;a<n.lyr.length;a++)t._Gx.lyr[a].opacity=e},a,void 0,void 0,void 0)}}]}},d={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var t=[],e=0;e<n.plugins.length;e++){var i=n.plugins[e];i.impl.menu&&("function"==typeof i.impl.menu?t.push(i.impl.menu()):t.push(i.impl.menu))}return t}()}};e.menu(a,{title:"SIG-PLOT",finalize:function(){a.prompt||e.addEventListener(a,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Refresh"},r,o,s,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){t.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){A(t,e.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){A(t,e.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){A(t,e.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){A(t,e.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){A(t,e.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){A(t,e.SB_FULL,"XPAN")}}]}},{text:"Grid",handler:function(){t.change_settings({grid:!n.grid})}},l,h,{text:"Traces...",menu:function(){var e=t._Gx,i={title:"TRACE",items:[]};i.items.push({text:"All",menu:u()});for(var n=0;n<e.lyr.length;n++)i.items.push({text:e.lyr[n].name,menu:u(n)});return i}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var e=t._Gx,i={title:"DEOVERLAY",items:[]};i.items.push({text:"Deoverlay All",handler:function(){t.deoverlay()}});for(var n=0;n<e.lyr.length;n++){var a=function(e){return function(){t.deoverlay(e)}}(n);i.items.push({text:e.lyr[n].name,handler:a})}return i}}]}},d,{text:"Keypress Info",handler:function(){e.message(a,C)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/png"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".png",i.click()}},{text:"JPG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/jpg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".jpg",i.click()}},{text:"SVG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/svg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".svg",i.click()}}]}},{text:"Exit",handler:function(){var t=document.createEvent("Event");t.initEvent("sigplotexit",!0,!0),e.dispatchEvent(a,t)}}]})}function s(t,i){return function(n,a,r,o,s,l,h){var d=t._Mx,c=Math.min(a,o),u=Math.min(r,s),x=Math.abs(o-a),f=Math.abs(s-r),m=!1;n.which===i&&(m="horizontal"===h?x>2:"vertical"===h?f>2:x>2&&f>2),m?void 0===l||"zoom"===l?(t.pixel_zoom(a,r,o,s),t.refresh()):"select"===l&&(a=document.createEvent("Event"),a.initEvent("mtag",!0,!0),r=w(t,c,u),o=w(t,c+x,u+f),a.x=r.x,a.y=r.y,a.xpos=c,a.ypos=u,a.w=Math.abs(o.x-r.x),a.h=Math.abs(o.y-r.y),a.wpxl=x,a.hpxl=f,a.shift=n.shiftKey,e.dispatchEvent(d,a)):t.mouseup(n)}}function l(t,n){var r=t._Mx,o=t._Gx;o.xmin=void 0===n.xmin?0:n.xmin,o.xmax=void 0===n.xmax?0:n.xmax;var s=void 0!==n.xmin,l=void 0!==n.xmax,d=void 0===n.cmode?"":n.cmode.toUpperCase();o.ylab=n.ylab,o.ymin=void 0===n.ymin?0:n.ymin,o.ymax=void 0===n.ymax?0:n.ymax;var c=void 0!==n.ymin,u=void 0!==n.ymax;o.zmin=n.zmin,o.zmax=n.zmax;var x=void 0!==n.zmin,f=void 0!==n.zmax;void 0!==n.colors&&e.setbgfg(r,n.colors.bg,n.colors.fg,r.xi),void 0!==n.xi&&e.invertbgfg(r),o.forcelab=void 0===n.forcelab?!0:n.forcelab,o.all=void 0===n.all?!1:n.all,o.expand=void 0===n.expand?!1:n.expand,o.xlab=n.xlab,o.segment=void 0===n.segment?!1:n.segment,o.plab=24;var m=void 0===n.phunits?"D":n.phunits;"R"===m[0]?o.plab=23:"C"===m[0]&&(o.plab=25),o.xdiv=void 0===n.xdiv?5:n.xdiv,o.ydiv=void 0===n.ydiv?5:n.ydiv,r.origin=1,n.yinv&&(r.origin=4),o.pmt=void 0===n.pmt?1:n.pmt,o.bufmax=void 0===n.bufmax?32768:n.bufmax,o.sections=void 0===n.nsec?0:n.nsec,o.anno_type=void 0===n.anno_type?0:n.anno_type,o.xfmt=void 0===n.xfmt?"":n.xfmt,o.yfmt=void 0===n.yfmt?"":n.yfmt,o.index=void 0===n.index?!1:n.index,(m=o.index||"IN"===d.slice(0,2))&&(s&&1===o.xmin&&(s=!1),l&&1===o.xmin&&(l=!1)),o.xdata=!1,o.note="",o.hold=0,o.always_show_marker=n.always_show_marker||!1,i.vstype("D"),n.inputs||h(t,!1);var p=d.slice(0,2);("IN"===p||"AB"===p||"__"===p)&&(p=d.slice(2,4)),o.cmode=0<o.lyr.length&&o.lyr[0].cx?1:3,"MA"===p&&(o.cmode=1),"PH"===p&&(o.cmode=2),"RE"===p&&(o.cmode=3),"IM"===p&&(o.cmode=4),("LO"===p||"D1"===p)&&(o.cmode=6),("L2"===p||"D2"===p)&&(o.cmode=7),("RI"===p||"IR"===p)&&(o.index?alert("Imag/Real mode not permitted in INDEX mode"):o.cmode=5),o.basemode=o.cmode,t.change_settings({cmode:o.cmode}),o.dbmin=1e-20,6<=o.cmode&&(d=10,7===o.cmode&&(d=20),"L"===p[0]?0<o.lyr.length&&o.lyr[0].cx?(o.ymin=Math.max(o.ymin,1e-10),o.ymax=Math.max(o.ymax,1e-10)):(o.ymin=Math.max(o.ymin,1e-20),o.ymax=Math.max(o.ymax,1e-20)):0<o.lyr.length&&o.lyr[0].cx?(o.ymin=Math.max(-18*d,o.ymin),o.ymax=Math.max(-18*d,o.ymax),o.dbmin=1e-37):Math.min(o.ymin,o.ymax)<-20*d&&(o.ymin=Math.max(-37*d,o.ymin),o.ymax=Math.max(-37*d,o.ymax),o.dbmin=Math.pow(10,Math.min(o.ymin,o.ymax)/d))),r.level=0,m&&!o.index&&(s&&(o.xmin=o.xstart+o.xdelta*(o.xmin-1)),s&&(o.xmax=o.xstart+o.xdelta*(o.xmax-1))),o.xmult=n.xmult,o.ymult=n.xmult,o.autox=void 0===n.autox?-1:n.autox,0>o.autox&&(o.autox=0,s||(o.autox+=1),l||(o.autox+=2)),o.autoy=void 0===n.autoy?-1:n.autoy,0>o.autoy&&(o.autoy=0,c||(o.autoy+=1),u||(o.autoy+=2)),o.autoz=void 0===n.autoz?-1:n.autoz,0>o.autoz&&(o.autoz=0,x||(o.autoz+=1),f||(o.autoz+=2)),o.autol=void 0===n.autol?-1:n.autol,s||(o.xmin=void 0),l||(o.xmax=void 0),v(t,{get_data:!0},o.xmin,o.xmax,o.xlab,o.ylab),s||(o.xmin=r.stk[0].xmin),l||(o.xmax=r.stk[0].xmax),c||(o.ymin=r.stk[0].ymin),u||(o.ymax=r.stk[0].ymax),o.xmin>o.xmax&&(r.stk[0].xmin=o.xmax,o.xmax=o.xmin,o.xmin=r.stk[0].xmin),o.ymin>o.ymax&&(r.stk[0].ymin=o.ymax,o.ymax=o.ymin,o.ymin=r.stk[0].ymin),r.stk[0].xmin=o.xmin,r.stk[0].xmax=o.xmax,r.stk[0].ymin=o.ymin,r.stk[0].ymax=o.ymax,o.panxmin=Math.min(o.panxmin,o.xmin),o.panxmax=Math.max(o.panxmax,o.xmax),o.panymin=Math.min(o.panymin,o.ymin),o.panymax=Math.max(o.panymax,o.ymax),o.xmin=r.stk[0].xmin,o.ymin=r.stk[0].ymin,e.set_font(r,Math.min(7,r.width/64)),o.ncolors=void 0===n.ncolors?16:n.ncolors,o.cmap=null,o.cmap=n.cmap?n.cmap:void 0===n.xc?-1:n.xc,a(t,o.cmap),o.cntrls="leftmouse"===n.xcnt?1:"continuous"===n.xcnt?2:void 0===n.xcnt?1:n.xcnt,o.default_rubberbox_mode=void 0===n.rubberbox_mode?"box":n.rubberbox_mode,o.default_rubberbox_action=void 0===n.rubberbox_action?"zoom":n.rubberbox_action,o.default_rightclick_rubberbox_mode=void 0===n.rightclick_rubberbox_mode?"box":n.rightclick_rubberbox_mode,o.default_rightclick_rubberbox_action=void 0===n.rightclick_rubberbox_action?null:n.rightclick_rubberbox_action,o.cross=void 0===n.cross?!1:n.cross,o.grid=void 0===n.nogrid?!0:!n.nogrid,o.fillStyle=n.fillStyle,o.gridBackground=n.gridBackground,o.gridStyle=n.gridStyle,o.wheelZoom=n.wheelZoom,o.wheelZoomPercent=n.wheelZoomPercent,o.legend=void 0===n.legend?!1:n.legend,o.legendBtnLocation=null,o.pan=void 0===n.nopan?!0:!n.nopan,o.nomenu=void 0===n.nomenu?!1:n.nomenu,o.modmode=0,o.modlayer=-1,o.modsource=0,o.modified=n.mod&&0<o.lyr.length,o.nmark=0,o.iabsc=0,o.index&&(o.iabsc=1),o.specs=!n.nospecs,o.scroll_time_interval=void 0===n.scroll_time_interval?o.scroll_time_interval:n.scroll_time_interval,o.autohide_readout=n.autohide_readout,o.autohide_panbars=n.autohide_panbars,o.specs?(o.show_x_axis=!n.noxaxis,o.show_y_axis=!n.noyaxis,o.show_readout=!n.noreadout,o.specs=o.show_x_axis||o.show_y_axis||o.show_readout?!0:!1):(o.show_x_axis=!1,o.show_y_axis=!1,o.show_readout=!1),o.hide_note=n.hide_note||!1,o.xmrk=0,o.ymrk=0,n.nodragdrop||(e.addEventListener(r,"dragover",function(t){t.preventDefault()},!1),e.addEventListener(r,"drop",function(t){return function(e){var i=e.dataTransfer.files;0<i.length&&(e.preventDefault(),t.load_files(i))}}(t),!1))}function h(t,e){var i=t._Gx,n=t._Mx;if(e){var a=i.HCB[0];i.xstart=a.xstart,i.xdelta=a.xdelta}else i.xstart=0,i.xdelta=1,i.autol=-1;n.origin=1}function d(t){for(var e,i=t._Gx,n=t._Mx.canvas.getContext("2d"),a=0;a<i.plugins.length;)i.plugins[a].impl.refresh&&(e=i.plugins[a].canvas,e.width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),0!==e.height&&0!==e.width&&(e.width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),e.getContext("2d").clearRect(0,0,e.width,e.height),i.plugins[a].impl.refresh(e),n.drawImage(e,0,0))),a+=1}function c(t){if(t=t._Gx,0===t.HCB.length)t.note="";else if(void 0===t.HCB[0].plotnote){for(var e=[],i=0;i<t.HCB.length;i++)t.HCB[i].file_name&&e.push(t.HCB[i].file_name);t.note=e.join("|").toUpperCase()}}function u(t,i){var n=t._Mx,a=t._Gx;if(!(i>=a.lyr.length)&&a.lyr[i].display&&0===a.hold){a.lyr[i].draw();var r=document.createEvent("Event");r.initEvent("lyrdraw",!0,!0),r.index=i,r.name=a.lyr[i].name,r.layer=a.lyr[i],e.dispatchEvent(n,r)}}function x(t){var i=t._Gx;t=t._Mx,i.cross&&(("vertical"===i.cross||!0===i.cross)&&t.xpos>=t.l&&t.xpos<=t.r&&i.cross_xpos!==t.xpos&&(void 0!==i.cross_xpos&&e.rubberline(t,i.cross_xpos,t.t,i.cross_xpos,t.b),e.rubberline(t,t.xpos,t.t,t.xpos,t.b),i.cross_xpos=t.xpos),("horizontal"===i.cross||!0===i.cross)&&t.ypos>=t.t&&t.ypos<=t.b&&i.cross_ypos!==t.ypos&&(void 0!==i.cross_ypos&&e.rubberline(t,t.l,i.cross_ypos,t.r,i.cross_ypos),e.rubberline(t,t.l,t.ypos,t.r,t.ypos),i.cross_ypos=t.ypos))}function f(t){var i=t._Gx;if(t=t._Mx,null!==i.xmrk&&null!==i.ymrk){var n=e.real_to_pixel(t,i.xmrk,i.ymrk);if(!n.clipped){var a=t.active_canvas.getContext("2d");a.beginPath(),a.strokeStyle=t.xwfg,a.fillStyle=t.xwfg,a.arc(n.x,n.y,2,0,360),a.stroke(),a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle=t.fg,a.font=t.font.font;var r="x:"+e.format_g(i.xmrk,6,3,!0);a.fillText(r,n.x+5,n.y-5),r="y:"+e.format_g(i.ymrk,6,3,!0),a.fillText(r,n.x+5,n.y-5+t.text_h)}}}function m(t,e){var i=t._Mx,n=t._Gx;n.xdata=!1;for(var a=0;a<n.lyr.length;a++)n.lyr[a].xdata=5===e?!0:!1,n.lyr[a].xdata&&(n.xdata=!0);if(e!==n.cmode)if(5===e&&n.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=n.lyr.length)n.cmode=e,b(t);else if(e>0){a=n.cmode,n.cmode=e;var r=n.autox,o=n.autoy;if(n.autox=3,n.autoy=3,5===e||5===a)n.panxmin=1,n.panxmax=-1,n.panymin=1,n.panymax=-1,i.level=0,e===n.basemode?(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):5===e||5===n.basemode?v(t,{get_data:!0}):(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,v(t,{get_data:!0},n.xmin,n.xmax));else for(e===n.basemode?(n.panymin=1,n.panymax=-1,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):v(t,{},i.stk[i.level].xmin,i.stk[i.level].xmax),a=1;a<=i.level;a++)i.stk[a].ymin=i.stk[0].ymin,i.stk[a].ymax=i.stk[0].ymax;n.autox=r,n.autoy=o,t.refresh()}}function p(t){var i,n=t._Mx,a=t._Gx;if(a.pan&&!n.widget){i=n.level;var r={ps:n.stk[i].ymin,pe:n.stk[i].ymax},o=r.ps!==a.panymin||r.pe!==a.panymax,o=o&&0<n.level;!a.autohide_panbars||o&&t.mouseOnCanvas||a.panning?(e.scrollbar(n,0,a.pyl,a.pyl+a.pthk,n.t,n.b,r,a.panymin,a.panymax,void 0,n.scrollbar_y),n.stk[i].ymin=r.ps,n.stk[i].ymax=r.pe):(r=n.canvas.getContext("2d"),r.fillStyle=n.bg,r.fillRect(a.pyl,n.t,a.pyl+a.pthk,n.b-n.t)),a.pl<n.width&&(r={ps:n.stk[i].xmin,pe:n.stk[i].xmax},o=(o=r.ps!==a.panxmin||r.pe!==a.panxmax)&&(!a.all||0<n.level),!a.autohide_panbars||o&&t.mouseOnCanvas||a.panning?(e.scrollbar(n,0,a.pl,a.pr,a.pt,a.pt+a.pthk,r,a.panxmin,a.panxmax,void 0,n.scrollbar_x),n.stk[i].xmin=r.ps,n.stk[i].xmax=r.pe):(r=n.canvas.getContext("2d"),r.fillStyle=n.bg,r.fillRect(a.pl,a.pt-1,a.pr-a.pl,a.pthk+4)))}}function y(t,i,n,a){var r,o,s,l,h=t._Mx,d=t._Gx;l=new e.SCROLLBAR,o=new e.SCROLLBAR;var c=!1;return r=h.level,0<d.panmode?(l.flag=11,o.flag=11):(l.flag=-12,o.flag=-12),0===n&&(l.action=0,o.action=0),"Y"===i.substring(0,1)?(l=h.stk[r].ymin,n=h.stk[r].ymax,s=n-l,"YPAN"===i?(i=h.scrollbar_y,n={ps:l,pe:n},e.scrollbar(h,o,d.pyl,d.pyl+d.pthk,h.t,h.b,n,d.panymin,d.panymax,a,i),l=n.ps,n=n.pe,0!==o.action&&e.scroll(h,o,e.XW_UPDATE,void 0,i)):"YCENTER"===i&&(l-=s*(h.ypos-(h.t+h.b)/2)/(h.b-h.t),n=l+s),(l!==h.stk[r].ymin||n!==h.stk[r].ymax)&&(h.stk[r].ymin=l,h.stk[r].ymax=n,d.cmode===d.basemode&&1===h.level&&(d.ymin=Math.min(d.ymin,l),d.ymax=Math.max(d.ymax,n)),this.inPan=!0,a=document.createEvent("Event"),a.initEvent("ypan",!0,!0),a.level=h.level,a.xmin=h.stk[h.level].xmin,a.ymin=h.stk[h.level].ymin,a.xmax=h.stk[h.level].xmax,a.ymax=h.stk[h.level].ymax,e.dispatchEvent(h,a),this.inPan=!1,t.refresh(),c=!0)):(o=h.stk[r].xmin,n=h.stk[r].xmax,s=n-o,"XPAN"===i?(i=h.scrollbar_x,n={ps:o,pe:n},e.scrollbar(h,l,d.pl,d.pr,d.pt,d.pt+d.pthk,n,d.panxmin,d.panxmax,a,i),o=n.ps,n=n.pe,0!==l.action&&e.scroll(h,l,e.XW_UPDATE,void 0,i)):"XCENTER"===i&&(o+=s*(h.xpos-(h.l+h.r)/2)/(h.r-h.l),o!==h.stk[r].xmin&&(n=o+s)),(h.stk[r].xmin!==o||h.stk[r].xmax!==n)&&(h.stk[r].xmin=o,h.stk[r].xmax=n,d.xdata||1!==h.level||(d.xmin=h.stk[1].xmin,d.xmax=h.stk[1].xmax),this.inPan=!0,a=document.createEvent("Event"),a.initEvent("xpan",!0,!0),a.level=h.level,a.xmin=h.stk[h.level].xmin,a.ymin=h.stk[h.level].ymin,a.xmax=h.stk[h.level].xmax,a.ymax=h.stk[h.level].ymax,e.dispatchEvent(h,a),this.inPan=!1,t.refresh(),c=!0)),c}function g(t,i,n){var a,r,o,s=t._Mx,l=t._Gx;if("XPAN"===i)o=t._Mx.scrollbar_x;else{if("YPAN"!==i)throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";o=t._Mx.scrollbar_y}o.flag=-12,r=s.level,"XPAN"===i?(a=s.stk[r].xmin,r=s.stk[r].xmax):"YPAN"===i?(a=s.stk[r].ymin,r=s.stk[r].ymax):r=a=void 0;var h=o;if(h.action=e.SB_DRAG,"YPAN"===i){
var d=s.scrollbar_y.trange/s.scrollbar_y.h;4===h.origin&&(d*=-1),n=n.screenY-l.panning.ypos,n*=d,l.panning.ymin-n<l.panymin?(r=l.panymin+(r-a),a=l.panymin):l.panning.ymax-n>l.panymax?(a=l.panymax-(r-a),r=l.panymax):(a=l.panning.ymin-n,r=l.panning.ymax-n)}else"XPAN"===i&&(d=s.scrollbar_x.trange/s.scrollbar_x.w,3===h.origin&&(d*=-1),n=n.screenX-l.panning.xpos,n*=d,l.panning.xmin+n<l.panxmin?(r=l.panxmin+(r-a),a=l.panxmin):l.panning.xmax+n>l.panxmax?(a=l.panxmax-(r-a),r=l.panxmax):(a=l.panning.xmin+n,r=l.panning.xmax+n));o.smin=a,o.srange=r-a,e.redrawScrollbar(o,s,void 0),L(t,o.smin,o.smin+o.srange,i.slice(0,1)),this.inPan=!0,l=document.createEvent("Event"),"XPAN"===i?l.initEvent("xpan",!0,!0):"YPAN"===i&&l.initEvent("ypan",!0,!0),l.level=s.level,l.xmin=s.stk[s.level].xmin,l.ymin=s.stk[s.level].ymin,l.xmax=s.stk[s.level].xmax,l.ymax=s.stk[s.level].ymax,e.dispatchEvent(s,l),this.inPan=!1,o.action=0,t.refresh()}function _(t,i,n,a,r,o,s,l){var h=t._Mx;if(h.prompt)throw"Prompt already exists! Can only have one prompt at a time!";e.disableListeners(h),t.disable_listeners();var d=function(t,i){return function(n){i(n),e.enableListeners(h),t.enable_listeners(),t.refresh(),void 0!==l&&l()}},c=function(){t.refresh()};try{e.prompt(h,i,n,d(t,a),c,r,o,s,5e3)}catch(u){console.log("ERROR: Failed to set up prompt due to: "+u)}}function b(t){var n=t._Mx,a=t._Gx,r=n.canvas.getContext("2d");if(0===a.sections&&(a.isec=0),n.warpbox){var o=w(t,n.warpbox.xo,n.warpbox.yo),s=w(t,n.warpbox.xl,n.warpbox.yl);a.aretx=o.x,a.arety=o.y,a.dretx=s.x-o.x,a.drety=s.y-o.y}else a.aretx=a.retx,a.arety=a.rety,a.dretx=a.retx-a.xmrk,a.drety=a.rety-a.ymrk;if(5===a.cmode&&1===a.iabsc&&(a.iabsc=2),1===a.iabsc?(a.aretx=Math.round((a.aretx-a.xstart)/a.xdelta),a.index||(a.aretx+=1),a.dretx=Math.round(a.dretx/a.xdelta)):2===a.iabsc&&(0!==a.aretx&&(a.aretx=1/a.aretx),0!==a.arety&&(a.arety=1/a.arety),0!==a.dretx&&(a.dretx=1/a.dretx),0!==a.drety&&(a.drety=1/a.drety)),a.show_readout&&!n.widget&&(r.fillStyle=n.bg,s=Math.floor(n.height-2.5*n.text_h),r.fillRect(n.text_w,s,49*n.text_w,s+1.5*n.text_h),s=Math.floor(n.height-.5*n.text_h),o=Math.max(a.pr+n.text_w,n.width-2*n.text_w),r.fillStyle=n.bg,r.fillRect(o,s-n.text_h,n.text_w,n.text_h),!a.autohide_readout||t.mouseOnCanvas||a.panning)){var l;0===a.iabsc&&4===a.ylab?(s=(i.sec2tspec(a.arety)+"                ").substring(0,16),l=(i.sec2tspec(a.drety,"delta")+"                ").substring(0,16)):(s=e.format_g(a.arety,16,9,!0),l=e.format_g(a.drety,16,9)),0===a.iabsc&&4===a.xlab?(t=(i.sec2tspec(a.aretx)+"                ").substring(0,16),r=(i.sec2tspec(a.dretx,"delta")+"                ").substring(0,16)):(t=e.format_g(a.aretx,16,9,!0),r=e.format_g(a.dretx,16,9)),l="y: "+s+" dy: "+l+" L="+n.level+" "+T[a.cmode-1],t="x: "+t+" dx: "+r+" "+P[a.iabsc],3===a.iabsc&&(l=0===a.dretx?l.substr(0,20)+"sl: Inf             "+l.substr(40,l.length):l.substr(0,20)+"sl: "+e.format_g(a.drety/a.dretx,16,9)+l.substr(40,l.length)),s=Math.floor(n.height-1.5*n.text_h),e.text(n,n.text_w,s,l),s=Math.floor(n.height-.5*n.text_h),e.text(n,n.text_w,s,t),e.LEGACY_RENDER&&o<n.width&&(0<a.cntrls?e.text(n,o,s,"C"):e.text(n,o,s," ")),e.colorbar(n,49*n.text_w-3,n.height-2.5*n.text_h,n.text_w,2*n.text_h)}}function v(t,e,i,n,a,r){var o=t._Mx;t=t._Gx,e=!0===e.get_data,t.panxmin=1,t.panxmax=-1,t.panymin=1,t.panymax=-1;var s=void 0===i,l=void 0===n;if(0===t.lyr.length)t.panxmin=-1,t.panxmax=1,t.panymin=-1,t.panymax=1;else for(void 0===a&&(t.xlab=t.lyr[0].xlab),void 0===r&&(t.ylab=t.lyr[0].ylab),a=0;a<t.lyr.length;a++)if(s&&(i=t.lyr[a].xmin),l&&(n=t.lyr[a].xmax),t.xlab!==t.lyr[a].xlab&&(t.xlab=0),t.ylab!==t.lyr[a].ylab&&(t.ylab=0),e&&t.lyr[a].get_data(i,n),0<t.autox||0<t.autoy)for(;n>i;)t.lyr[a].get_data(i,n),r=t.lyr[a].prep(i,n),t.all&&t.expand?0===t.lyr[a].size?i=n:t.index?i+=r:0<=t.lyr[a].xdelta?i+=t.lyr[a].size*t.lyr[a].xdelta:n+=t.lyr[a].size*t.lyr[a].xdelta:i=n;else t.lyr[a].prep(1,-1);if(a=t.panxmax-t.panxmin,0>a&&(t.panxmax=t.panxmin,t.panxmin=t.panxmax+a,a=-a),1e-20>=a&&(t.panxmin-=1,t.panxmax+=1),0!==(1&t.autox)&&s&&(o.stk[0].xmin=t.panxmin),0!==(2&t.autox)&&l&&(o.stk[0].xmax=t.panxmax,!t.all&&!t.xdata))for(a=0;a<t.lyr.length;a++)n=Math.min(t.lyr[a].xmax,o.stk[0].xmax),r=Math.abs((n-t.lyr[a].xmin)/t.lyr[a].xdelta)-t.bufmax+1,r>0&&(o.stk[0].xmax=n-r*Math.abs(t.lyr[a].xdelta));0!==(1&t.autoy)&&(o.stk[0].ymin=t.panymin),0!==(2&t.autoy)&&(o.stk[0].ymax=t.panymax)}function w(t,i,n){var a=t._Gx;return t=e.pixel_to_real(t._Mx,i,n),a.index&&(t.x*=a.xdelta),t}function M(t,e,i,n,a,r){return t>=i&&i+a>=t&&e>=n&&n+r>=e}function k(t){var e=!1,n=t._Gx,a=t._Mx,r=a.xpos,o=a.ypos,s=" ";return t.mouseOnCanvas?(n.pan&&r>a.r&&o>=a.t&&o<=a.b?(s="YPAN",a.xpos=n.pyl+i.trunc(n.pthk/2),e=!0):n.pan&&r>=n.pl&&r<=n.pr&&(n.show_readout&&o>n.pt-2||!n.show_readout&&o<=n.pt+n.pthk+2)&&(s="XPAN",a.ypos=n.pt+i.trunc(n.pthk/2),e=!0),{inPanRegion:e,command:s}):!1}function E(t){var e=!1;t=t._Mx;var n=t.xpos,a=t.ypos,r=t.text_h,o=t.text_w,s=" ";return n<t.l-o&&a<=t.b&&a>=t.t?(s="YCENTER",e=!0):a>t.b+i.trunc(.5*o)&&a<=t.b+i.trunc(i.trunc(3*r)/2)&&n>=t.l&&n<=t.r&&(s="XCENTER",e=!0),{inCenterRegion:e,command:s}}function S(t,i){var n,a,r;return 1&i.origin?(r=t.x-i.x,2&i.origin&&(r=i.w-r)):(r=t.y-i.y,2>=i.origin&&(r=i.h-r)),a=e.scroll_real2pix(i),n=a.s1,a=a.sw,r>=n&&n+a>=r?!0:!1}function A(t,i,n){var a,r=t._Mx;"XPAN"===n?a=r.scrollbar_x:"YPAN"===n&&(a=r.scrollbar_y),a.action=i,a.step=.1*a.srange,a.page=9*a.step,a.scale=2,e.scroll(r,a,e.XW_COMMAND,void 0,a),L(t,a.smin,a.smin+a.srange,n.slice(0,1)),this.inPan=!0,t=document.createEvent("Event"),"XPAN"===n?t.initEvent("xpan",!0,!0):"YPAN"===n&&t.initEvent("ypan",!0,!0),t.level=r.level,t.xmin=r.stk[r.level].xmin,t.ymin=r.stk[r.level].ymin,t.xmax=r.stk[r.level].xmax,t.ymax=r.stk[r.level].ymax,e.dispatchEvent(r,t),this.inPan=!1}function L(t,e,i,n){var a=t._Mx,r=t._Gx,o=a.level;"X"===n?(a.stk[o].xmin!==e||a.stk[o].xmax!==i)&&(a.stk[o].xmin=e,a.stk[o].xmax=i,r.xdata||1!==a.level||(r.xmin=a.stk[1].xmin,r.xmax=a.stk[1].xmax),t.refresh()):"Y"!==n||e===a.stk[o].ymin&&i===a.stk[o].ymax||(a.stk[o].ymin=e,a.stk[o].ymax=i,r.cmode===r.basemode&&1===a.level&&(r.ymin=Math.min(r.ymin,e),r.ymax=Math.max(r.ymax,i)),t.refresh())}var C="Keypress Table:\n--------------\n?    - Main help box.\nA    - Toggle display x,y readouts:\n       (absc) -> (index) -> (1/absc) -> (time).\nB    - Toggle LM Drag Mode:\n       (box) -> (horizontal) -> (vertical).\nC    - Toggle controls.\nK    - Show Marker.\nL    - Toggle legend.\nM    - Pops up main menu\nR    - Toggle display specs (x/y readout)\nS    - Toggle display specs and axes.\nT    - Popup box with timecode value at mouse.\nX    - Popup box with X value at mouse.\nY    - Popup box with Y value at mouse.\nF    - Toggle fullscreen.\n";t.browserIsCompatible=function(){var t=document.createElement("canvas").getContext?!0:!1,e="ArrayBuffer"in window;return t&&e},navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"==typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?t.PointArray=Float32Array:t.PointArray=Float64Array,t.Plot=function(a,h){if(!t.browserIsCompatible())throw"Browser is not compatible";var d=this._Mx=e.open(a);return this._Gx=new n,this._Gx.parent=a,this.mouseOnCanvas=!1,h||(h={}),l(this,h),this._refresh(),this.onmousemove=function(t){return function(i){var n=t._Mx,a=t._Gx,r=i.target.getBoundingClientRect(),o=void 0===i.offsetX?i.pageX-r.left-window.scrollX:i.offsetX;i=void 0===i.offsetX?i.pageY-r.top-window.scrollY:i.offsetY,r=w(t,o,i),a.retx=r.x,a.rety=r.y,n.widget||(b(t),r=document.createEvent("Event"),r.initEvent("mmove",!0,!0),r.xpos=o,r.ypos=i,r.x=a.retx,r.y=a.rety,e.dispatchEvent(n,r)&&(a.cross&&(n.warpbox?(void 0!==a.cross_xpos&&e.rubberline(n,a.cross_xpos,n.t,a.cross_xpos,n.b),void 0!==a.cross_ypos&&e.rubberline(n,n.l,a.cross_ypos,n.r,a.cross_ypos),a.cross_xpos=void 0,a.cross_ypos=void 0):x(t)),2===a.cntrls&&(r=document.createEvent("Event"),r.initEvent("mtag",!0,!0),r.x=a.retx,r.y=a.rety,r.xpos=o,r.ypos=i,e.dispatchEvent(n,r))))}}(this),this.ontouchmove=function(t){return function(e){e.preventDefault(),t.onmousemove(e)}}(this),this.throttledOnMouseMove=i.throttle(this._Gx.scroll_time_interval,this.onmousemove),e.addEventListener(d,"mousemove",this.throttledOnMouseMove,!1),this.onmouseout=function(t){return function(e){e=t._Gx;var i=t._Mx;t.mouseOnCanvas&&(t.mouseOnCanvas=!1,e.autohide_readout&&b(t),e.autohide_panbars&&p(t),i.prompt&&i.prompt.input.enableBlur())}}(this),e.addEventListener(d,"mouseout",this.onmouseout,!1),this.onmouseover=function(t){return function(e){e=t._Gx;var i=t._Mx;t.mouseOnCanvas=!0,e.autohide_panbars&&p(t),i.prompt&&i.prompt.input.disableBlur()}}(this),e.addEventListener(d,"mouseover",this.onmouseover,!1),this.onmousedown=function(t){return function(i){i.preventDefault();var n=t._Mx,a=t._Gx;n.widget&&"ONESHOT"===n.widget.type&&(n.widget=null,t.refresh()),e.ifevent(n,i);var l=document.createEvent("Event");if(l.initEvent("mdown",!0,!0),l.xpos=n.xpos,l.ypos=n.ypos,l.x=a.retx,l.y=a.rety,l.which=i.which,!e.dispatchEvent(n,l))return!1;var h=k(t);if(h.inPanRegion){if(i.preventDefault()," "!==h.command){var d=null,l=null;if("XPAN"===h.command?d=n.scrollbar_x:"YPAN"===h.command&&(d=n.scrollbar_y),2===i.which)l={x:n.xpos,y:n.ypos},void 0!==d&&S(l,d)&&r(t,h.command);else if(" "!==h.command&&(l={x:n.xpos,y:n.ypos},!S(l,d)&&1===i.which)){y(t,h.command,0,i);var c=function(){S({x:n.xpos,y:n.ypos},d)?a.stillPanning&&(window.clearInterval(a.stillPanning),a.repeatPanning=void 0):y(t,h.command,0,i)};a.stillPanning=window.setTimeout(function(){a.repeatPanning=window.setInterval(c,50)},250)}}}else if(1===i.which||3===i.which)if(l=!1,a.legendBtnLocation&&(l=M(n.xpos,n.ypos,a.legendBtnLocation.x,a.legendBtnLocation.y,a.legendBtnLocation.width,a.legendBtnLocation.height)),l)t.change_settings({legend:!a.legend});else{b(t);var l={opacity:0,return_value:"zoom"},u={opacity:.4,fill_color:n.hi,return_value:"select"};1===i.which?"zoom"===a.default_rubberbox_action?e.rubberbox(n,s(t,i.which),a.default_rubberbox_mode,l,u):"select"===a.default_rubberbox_action&&e.rubberbox(n,s(t,i.which),a.default_rubberbox_mode,u,l):3===i.which&&("zoom"===a.default_rightclick_rubberbox_action?e.rubberbox(n,s(t,i.which),a.default_rightclick_rubberbox_mode,l,u):"select"===a.default_rightclick_rubberbox_action&&e.rubberbox(n,s(t,i.which),a.default_rightclick_rubberbox_mode,u,l))}else 2===i.which&&(a.nomenu||o(t));return!1}}(this),this.ontouchstart=function(t){return function(e){e.preventDefault(),t.onmousedown({which:1})}}(this),e.addEventListener(d,"mousedown",this.onmousedown,!1),this.docMouseUp=function(t){return function(e){var i=t._Gx;return 1===e.which&&(i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0),i.stillPanning&&(window.clearTimeout(i.stillPanning),i.stillPanning=void 0),i.repeatPanning&&(window.clearInterval(i.repeatPanning),i.repeatPanning=void 0),!1}}(this),document.addEventListener("mouseup",this.docMouseUp,!1),this.mouseup=function(t){return function(i){i.preventDefault();var n=t._Gx,a=t._Mx;if(!a.warpbox){e.ifevent(t._Mx,i);var r=document.createEvent("Event");if(r.initEvent("mup",!0,!0),r.xpos=a.xpos,r.ypos=a.ypos,r.x=n.retx,r.y=n.rety,r.which=i.which,r=e.dispatchEvent(a,r))if(1===i.which)r=E(t),r.inCenterRegion?" "!==r.command&&y(t,r.command,0,i):1===n.cntrls&&(n.xmrk=n.retx,n.ymrk=n.rety,r=document.createEvent("Event"),r.initEvent("mtag",!0,!0),r.x=n.xmrk,r.y=n.ymrk,r.xpos=i.x||i.clientX,r.ypos=i.y||i.clientY,r.w=void 0,r.h=void 0,r.shift=i.shiftKey,e.dispatchEvent(a,r),(n.always_show_marker||n.show_marker)&&t.redraw());else if(2===i.which){if(n.nomenu&&(r=document.createEvent("Event"),r.initEvent("showmenu",!0,!0),r.x=i.x||i.clientX,r.y=i.y||i.clientY,r=e.dispatchEvent(a,r))){i.stopPropagation&&i.stopPropagation(),i.cancelBubble=!0,e.removeEventListener(a,"mousedown",t.onmousedown,!1);var o=function(){try{var i=document.createEvent("Event");i.initEvent("hidemenu",!0,!0),e.dispatchEvent(a,i)&&e.addEventListener(a,"mousedown",t.onmousedown,!1)}finally{document.removeEventListener("mouseup",o,!1)}};document.addEventListener("mouseup",o,!1)}}else 3===i.which&&(i.preventDefault(),t.unzoom(1),t.refresh())}}}(this),this.ontouchend=function(t){return function(t){t.preventDefault()}}(this),e.addEventListener(d,"mouseup",this.mouseup,!1),this.mouseclick=function(t){return function(i){i.preventDefault();var n=t._Gx,a=t._Mx;e.ifevent(t._Mx,i);var r=document.createEvent("Event");return r.initEvent("mclick",!0,!0),r.xpos=a.xpos,r.ypos=a.ypos,r.x=n.retx,r.y=n.rety,r.which=i.which,e.dispatchEvent(a,r),!1}}(this),e.addEventListener(d,"click",this.mouseclick,!1),this.mousedblclick=function(t){return function(i){i.preventDefault();var n=t._Gx,a=t._Mx;e.ifevent(t._Mx,i);var r=document.createEvent("Event");return r.initEvent("mdblclick",!0,!0),r.xpos=a.xpos,r.ypos=a.ypos,r.x=n.retx,r.y=n.rety,r.which=i.which,e.dispatchEvent(a,r),!1}}(this),e.addEventListener(d,"dblclick",this.mousedblclick,!1),this.dragMouseDownHandler=function(t){return function(e){var i=t._Mx,n=t._Gx,a=k(t);if(a.inPanRegion&&(e.preventDefault()," "!==a.command)){var r;"XPAN"===a.command?r=i.scrollbar_x:"YPAN"===a.command&&(r=i.scrollbar_y);var o={x:i.xpos,y:i.ypos};void 0!==r&&S(o,r)&&1===e.which&&(n.panning={axis:a.command,xpos:e.screenX,ypos:e.screenY,xmin:i.stk[i.level].xmin,xmax:i.stk[i.level].xmax,ymin:i.stk[i.level].ymin,ymax:i.stk[i.level].ymax})}}}(this),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),this.dragMouseMoveHandler=function(t){return function(e){var i=t._Gx;if(void 0!==i.panning)try{g(t,i.panning.axis,e)}catch(n){console.log("Error: "+n)}}}(this),this.throttledDragOnMouseMove=i.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),this.dragMouseUpHandler=function(t){return function(e){var i=t._Gx;1===e.which&&(i.panning=void 0)}}(this),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),this.onresize=function(t){return function(i){e.checkresize(t._Mx)&&t.refresh()}}(this),this.wheelHandler=function(t){var n=t._Mx,a=t._Gx,r=i.throttle(100,function(i){var r;"XPAN"===i.command?r=n.scrollbar_x:"YPAN"===i.command&&(r=n.scrollbar_y),r.action=a.wheelscroll_mode_natural?0>event.deltaY?e.SB_WHEELDOWN:e.SB_WHEELUP:0>event.deltaY?e.SB_WHEELUP:e.SB_WHEELDOWN,r.step=.1*r.srange,r.page=9*r.step,e.scroll(n,r,e.XW_COMMAND,void 0,r),L(t,r.smin,r.smin+r.srange,i.command.slice(0,1))}),o=i.throttle(100,function(){var e=a.wheelZoomPercent||.2;a.wheelscroll_mode_natural?0<event.deltaY&&(e*=-1):0>event.deltaY&&(e*=-1),"x"===a.wheelZoom?t.percent_zoom(e,1,!0):"y"===a.wheelZoom?t.percent_zoom(1,e,!0):t.percent_zoom(e,e,!0)});return function(i){e.ifevent(n,i);var s=k(t);t.mouseOnCanvas&&(i.preventDefault(),s.inPanRegion?r(s):a.wheelZoom&&o())}}(this),window.addWheelListener(window,this.wheelHandler,!1),window.addEventListener("resize",this.onresize,!1),h.nokeypress||(this.onkeypress=function(t){return function(n){var a=t._Mx,r=t._Gx;if(t.mouseOnCanvas&&(!a.widget||"MENU"!==a.widget.type))if(a.widget&&"ONESHOT"===a.widget.type)a.widget=null,t.refresh();else{var s=getKeyCode(n),l=document.createEvent("Event");l.initEvent("plotkeypress",!0,!0),l.keyCode=s,l.shiftKey=n.shiftKey,l.ctrlKey=n.ctrlKey,l.altKey=n.altKey,l.metaKey=n.metaKey,(l=e.dispatchEvent(a,l))&&(97===s?(r.iabsc=(r.iabsc+1)%4,b(t)):108===s?t.change_settings({legend:!r.legend}):103===s?t.change_settings({grid:!r.grid}):98===s||2===s?a.warpbox&&(a.warpbox.mode="box"===a.warpbox.mode?"horizontal":"horizontal"===a.warpbox.mode?"vertical":"box",e.redraw_warpbox(a)):99===s?t.change_settings({xcnt:-1*r.cntrls}):114===s?t.change_settings({show_readout:!r.show_readout}):115===s?t.change_settings({specs:!r.specs}):120===s?(n=t._Gx,a=t._Mx,r=n.aretx.toString(),1===n.iabsc?e.message(a,"INDEX = "+r):2===n.iabsc?e.message(a,"1/X = "+r):e.message(a,"X = "+r)):121===s?(n=t._Gx,a=t._Mx,r=n.arety.toString(),2===n.iabsc?e.message(a,"1/Y = "+r):e.message(a,"Y = "+r)):122===s?(n=t._Gx,a=t._Mx,n.zmin&&n.zmax&&(r="",r=1===n.lyr.length?"Z = "+n.lyr[0].get_z(n.retx,n.rety).toString():"TODO",e.message(a,r))):116===s?(n=t._Gx,a=t._Mx,0<n.lyr.length&&(r=n.lyr[0].hcb,1!==r["class"]||1!==r.xunits&&4!==r.xunits?2!==r["class"]||1!==r.yunits&&4!==r.yunits?e.message(a,"Time = UNK"):e.message(a,"Time = "+i.sec2tod(r.timecode+n.rety),!0):e.message(a,"Time = "+i.sec2tod(r.timecode+n.retx),!0))):109===s?r.nomenu||(l=document.createEvent("Event"),l.initEvent("showmenu",!0,!0),l.x=a.x,l.y=a.y,(l=e.dispatchEvent(a,l))&&o(t)):63===s?e.message(a,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the by selecting 'Keypress Info' from the main menu."):102===s?(e.fullscreen(a),t.refresh()):9===s&&n.ctrlKey?t.change_settings({invert:null}):107===s&&(r.show_marker=!r.show_marker,t.redraw()))}}}(this),setKeypressHandler(this.onkeypress)),this},t.Plot.prototype={add_plugin:function(t,e){if(void 0===e&&(e=Number.MAX_VALUE),0>=e)throw"Invalid plugin zorder";t.init(this);var i=document.createElement("canvas");i.width=this._Mx.canvas.width,i.height=this._Mx.canvas.height,this._Gx.plugins.push({impl:t,zorder:e,canvas:i}),this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},remove_plugin:function(t){for(var e=this._Gx.plugins.length;e--;)this._Gx.plugins[e].impl===t&&(t.dispose&&t.dispose(),this._Gx.plugins[e].canvas.parentNode&&this._Gx.plugins[e].canvas.parentNode.removeElement(this._Gx.plugins[e].canvas),this._Gx.plugins.splice(e,1));this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},addListener:function(t,i){e.addEventListener(this._Mx,t,i,!1)},removeListener:function(t,i){e.removeEventListener(this._Mx,t,i,!1)},change_settings:function(t){for(var i=this._Gx,n=this._Mx,r=0;r<i.lyr.length;r++)i.lyr[r].change_settings(t);if(void 0!==t.grid&&(i.grid=null===t.grid?!i.grid:t.grid),void 0!==t.gridBackground&&(i.gridBackground=t.gridBackground),void 0!==t.gridStyle&&(i.gridStyle=t.gridStyle),void 0!==t.wheelZoom&&(i.wheelZoom=t.wheelZoom),void 0!==t.wheelZoomPercent&&(i.wheelZoomPercent=t.wheelZoomPercent),void 0!==t.autol&&(i.autol=t.autol),void 0!==t.index&&t.index!==i.index&&(i.index=null===t.index?!i.index:t.index,i.index&&1!==i.iabsc?i.iabsc=1:i.index||1!==i.iabsc||(i.iabsc=0),v(this,{get_data:!1},void 0,void 0),this.unzoom()),void 0!==t.all&&(i.all=null===t.all?!i.all:t.all),void 0!==t.show_x_axis&&(i.show_x_axis=null===t.show_x_axis?!i.show_x_axis:t.show_x_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_y_axis&&(i.show_y_axis=null===t.show_y_axis?!i.show_y_axis:t.show_y_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_readout&&(i.show_readout=null===t.show_readout?!i.show_readout:t.show_readout,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.specs&&(i.specs=null===t.specs?!i.specs:t.specs,i.specs?(i.show_x_axis=!0,i.show_y_axis=!0,i.show_readout=!0):(i.show_x_axis=!1,i.show_y_axis=!1,i.show_readout=!1)),void 0!==t.xcnt&&(i.cntrls="leftmouse"===t.xcnt?1:"continuous"===t.xcnt?2:"disable"===t.xcnt&&0<i.cntrls?-1*i.cntrls:"enable"===t.xcnt&&0>i.cntrls?-1*i.cntrls:t.xcnt),void 0!==t.legend&&(i.legend=null===t.legend?!i.legend:t.legend),void 0!==t.pan&&(i.pan=null===t.pan?!i.pan:t.pan),void 0!==t.cross&&(i.cross=null===t.cross?!i.cross:t.cross,i.cross?(i.cross_xpos=void 0,i.cross_ypos=void 0,x(this)):(void 0!==i.cross_xpos&&e.rubberline(n,i.cross_xpos,n.t,i.cross_xpos,n.b),void 0!==i.cross_ypos&&e.rubberline(n,n.l,i.cross_ypos,n.r,i.cross_ypos),i.cross_xpos=void 0,i.cross_ypos=void 0)),void 0!==t.cmode&&m(this,t.cmode),void 0!==t.phunits){var o=t.phunits,r=this._Gx,s=this._Mx,l=r.plab;if("R"===o?l=23:"D"===o&&(l=24),"C"===o&&(l=25),l!==r.plab&&(o=[Math.PI,180,.5],o=o[l-23]/o[r.plab-23],r.plab=l,2===r.cmode)){for(l=0;l<=s.level;l++)s.stk[l].ymin*=o,s.stk[l].ymax*=o,s.stk[l].yscl*=o;r.panymin*=o,r.panymax*=o,this.refresh()}}void 0!==t.rubberbox_action&&(i.default_rubberbox_action=t.rubberbox_action),void 0!==t.rubberbox_mode&&(i.default_rubberbox_mode=t.rubberbox_mode),void 0!==t.rightclick_rubberbox_action&&(i.default_rightclick_rubberbox_action=t.rightclick_rubberbox_action),void 0!==t.rightclick_rubberbox_mode&&(i.default_rightclick_rubberbox_mode=t.rightclick_rubberbox_mode),void 0!==t.wheelscroll_mode_natural&&(i.wheelscroll_mode_natural=t.wheelscroll_mode_natural),void 0!==t.colors&&(t.colors.fg||(t.colors.fg=n.fg),t.colors.bg||(t.colors.bg=n.bg),e.setbgfg(n,t.colors.bg,t.colors.fg,n.xi)),void 0!==t.cmap&&(i.cmap=null===t.cmap?2===i.cmode?2:1:t.cmap,a(this,i.cmap)),void 0!==t.yinv&&(n.origin=t.yinv?4:1),void 0!==t.rasterSmoothing&&(i.rasterSmoothing=null===t.rasterSmoothing?!i.rasterSmoothing:t.rasterSmoothing),void 0!==t.fillStyle&&(i.fillStyle=t.fillStyle),void 0!==t.invert&&(null===t.invert?e.invertbgfg(n):!0===t.invert?e.setbgfg(this,"white","black"):e.setbgfg(this,"black","white")),void 0!==t.nomenu&&(i.nomenu=null===t.nomenu?!i.nomenu:t.nomenu),void 0!==t.ymin&&L(this,t.ymin,n.stk[0].ymax,"Y"),void 0!==t.ymax&&L(this,n.stk[0].ymin,t.ymax,"Y"),void 0!==t.xmin&&L(this,t.xmin,n.stk[0].xmax,"X"),void 0!==t.xmax&&L(this,n.stk[0].xmin,t.xmax,"X"),void 0!==t.zmin&&(i.zmin=t.zmin,i.autoz&=2),void 0!==t.zmax&&(i.zmax=t.zmax,i.autoz&=1),void 0!==t.autoz&&(i.autoz=t.autoz,0!==(1&i.autoz)&&(i.zmin=void 0),0!==(2&i.autoz)&&(i.zmax=void 0)),void 0!==t.note&&(i.note=t.note),this.refresh(),void 0!==t.pan&&b(this)},reread:function(){for(var t=this._Gx,i=[],n=0;n<t.lyr.length;n++)i[n]=t.lyr[n];n=t.HCB.slice(),this.deoverlay();for(var a=0;a<n.length;a++)this.overlay_bluefile(n[a]);for(n=0;n<t.lyr.length;n++)t.lyr[n].symbol=i[n].symbol,t.lyr[n].radius=i[n].radius;this.refresh(),t=document.createEvent("Event"),t.initEvent("reread",!0,!0),e.dispatchEvent(this._Mx,t)},cleanup:function(){},reload:function(t,e,i,n){var a=this._Mx,r=this._Gx;0>t||t>=r.lyr.length||void 0===r.lyr[t].reload||(t=r.lyr[t].reload(e,i),0===a.level&&v(this,{get_data:!1},t.xmin,t.xmax),n?this._refresh():this.refresh())},rescale:function(){0===this._Mx.level&&v(this,{get_data:!1},void 0,void 0),this.refresh()},push:function(t,e,i,n,a){var r=this._Mx,o=this._Gx;0>t||t>=o.lyr.length||void 0===o.lyr[t].push||(t=o.lyr[t].push(e,i,n),0===r.level&&t&&v(this,{get_data:!1}),a?this._refresh():this.refresh())},overlay_array:function(t,e,n){return i.log.debug("Overlay array"),t=i.initialize(t,e),this.overlay_bluefile(t,n)},overlay_pipe:function(t,e){i.log.debug("Overlay pipe"),t||(t={}),t.pipe=!0;var n=i.initialize(null,t);return this.overlay_bluefile(n,e)},overlay_websocket:function(t,e,n){i.log.debug("Overlay websocket: "+t),t=new WebSocket(t,"plot-data"),t.binaryType="arraybuffer";var a=this;e||(e={}),e.pipe=!0;var r=i.initialize(null,e);r.ws=t;var o=this.overlay_bluefile(r,n);return t.onopen=function(t){},t.onmessage=function(t){return function(t){t.data instanceof ArrayBuffer?(t=r.createArray(t.data),a.push(o,t)):"string"==typeof t.data&&(a._Gx.lyr[o].hcb||i.log.warning("Couldn't find header for layer "+o),t=JSON.parse(t.data),a.push(o,[],t))}}(t),o},overlay_href:function(t,e,n){i.log.debug("Overlay href: "+t);try{this.show_spinner();var a=function(t,e){return function(i){try{if(i){var a=t.overlay_bluefile(i,n);e&&e(i,a)}else alert("Failed to load data")}finally{t.hide_spinner()}}}(this,e);(new BlueFileReader).read_http(t,a)}catch(r){console.log(r),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(z.color=this._Mx.xwfg,this._Gx.spinner=new Spinner(z).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop(),this._Gx.spinner=void 0},add_layer:function(t){var i=this._Gx,n=this._Mx,a=document.createEvent("Event");a.initEvent("lyradd",!0,!0),a.index=i.lyr.length,a.name=t.name,a.layer=t,e.dispatchEvent(n,a)&&i.lyr.push(t)},get_layer:function(t){var e=this._Gx;return t>=0&&t<e.lyr.length?e.lyr[t]:null},overlay_bluefile:function(e,n){i.log.debug("Overlay bluefile: "+e.file_name);var a=this._Mx,r=this._Gx;n=n||{};var o=0===r.HCB.length;r.HCB.push(e),1===r.HCB.length&&h(this,!0);var s=r.lyr.length;if(void 0===n.layerType?1===e["class"]?t.Layer1D.overlay(this,e,n):2===e["class"]&&t.Layer2D.overlay(this,e,n):"1D"===n.layerType?t.Layer1D.overlay(this,e,n):"2D"===n.layerType?t.Layer2D.overlay(this,e,n):n.layerType.overlay(this,e,n),m(this,r.cmode),o||n.expand)if(0===r.HCB.length)h(this,!1);else{r.basemode=r.cmode;var l,d;0===(r.autox&&1)&&(l=r.xmin),0===(r.autox&&2)&&(d=r.xmin),v(this,{get_data:!0},l,d),a.level=0,0!==(r.autox&&1)&&(r.xmin=a.stk[0].xmin),0!==(r.autox&&2)&&(r.xmax=a.stk[0].xmax),0!==(r.autoy&&1)&&(r.ymin=a.stk[0].ymin),0!==(r.autoy&&2)&&(r.ymax=a.stk[0].ymax),a.resize=!0,a.origin=r.lyr[0].preferred_origin?r.lyr[0].preferred_origin:1}else for(a=s;a<r.lyr.length;a++)u(this,a);return c(this),this.refresh(),r.HCB.length-1},load_files:function(t,e){for(var i=function(t){return function(i){t.overlay_bluefile(i,e)}}(this),n=0;n<t.length;n++){var a=t[n];(new BlueFileReader).read(a,i)}},deoverlay:function(t){var e=this._Gx;if(0<e.HCB.length)if(void 0===t)for(t=e.HCB.length-1;t>=0;t--)this.remove_layer(t);else if(0>t){if(t=e.HCB.length+t,0>t)return;this.remove_layer(t)}else t<e.HCB.length&&this.remove_layer(t);0===e.lyr.length&&(h(this,!1),v(this,{}))},remove_layer:function(t){var i=this._Gx,n="",a=null;if(t>=0&&t<i.HCB.length){for(n=i.HCB[t].file_name,a=i.HCB[t],i.HCB[t]=null;t<i.HCB.length-1;t++)i.HCB[t]=i.HCB[t+1];i.HCB.length-=1}for(t=i.lyr.length-1;t>=0;t--)if(i.lyr[t].hcb===a){var r=t,o=this._Gx,s=this._Mx,l=document.createEvent("Event");if(l.initEvent("lyrdel",!0,!0),l.index=r,l.name=o.lyr[r].name,l.layer=o.lyr[r],e.dispatchEvent(s,l)){if(o.lyr[r].ybufn=0,o.lyr[r].ybuf=null,r<o.lyr.length-1)for(;r<o.lyr.length-1;r++)o.lyr[r]=o.lyr[r+1];o.lyr.length-=1,0<o.HCB.length&&(o.panxmin=1,o.panxmax=-1,o.panymin=1,o.panymax=-1)}}c(this),this.refresh(),i=document.createEvent("Event"),i.initEvent("file_deoverlayed",!0,!0),""!==n&&(i.fileName=n),e.dispatchEvent(this._Mx,i)},pixel_zoom:function(t,e,i,n,a){t=w(this,t,e),i=w(this,i,n),this.zoom(t,i,a)},percent_zoom:function(t,e,i){var n=this._Mx,a=this._Gx,r=0;1>Math.abs(t)&&(r=Math.abs(n.stk[n.level].xmax-n.stk[n.level].xmin),r=r*t/2),t=0,1>Math.abs(e)&&(t=Math.abs(n.stk[n.level].ymax-n.stk[n.level].ymin),t=t*e/2),e={x:Math.max(n.stk[n.level].xmin+r,a.panxmin),y:Math.max(n.stk[n.level].ymin+t,a.panymin)},n={x:Math.min(n.stk[n.level].xmax-r,a.panxmax),y:Math.min(n.stk[n.level].ymax-t,a.panymax)},this.zoom(e,n,i)},zoom:function(t,i,n){var a=this._Mx,r=this._Gx;if(!(9<=a.level)){if(void 0===t.x&&(t.x=a.stk[a.level].xmin),void 0===t.y&&(t.y=a.stk[a.level].ymin),void 0===i.x&&(i.x=a.stk[a.level].xmax),void 0===i.y&&(i.y=a.stk[a.level].ymax),i.x<t.x){var o=i.x;i.x=t.x,t.x=o}i.y<t.y&&(o=i.y,i.y=t.y,t.y=o),o={},o.xscl=a.stk[a.level].xscl,o.yscl=a.stk[a.level].yscl,o.xmin=t.x,o.xmax=i.x,o.ymin=t.y,o.ymax=i.y,r.index&&(o.xmin=Math.min(o.xmin/r.xdelta),o.xmax=Math.min(o.xmax/r.xdelta)),n&&r.inContinuousZoom?a.stk[a.level]=o:(a.stk.push(o),a.level=a.stk.length-1),r.inContinuousZoom=n,this.inZoom=!0,t=document.createEvent("Event"),t.initEvent("zoom",!0,!0),t.level=a.level,t.inContinuousZoom=r.inContinuousZoom,t.xmin=a.stk[a.level].xmin,t.ymin=a.stk[a.level].ymin,t.xmax=a.stk[a.level].xmax,t.ymax=a.stk[a.level].ymax,e.dispatchEvent(a,t),this.inZoom=!1,this.refresh()}},unzoom:function(t){var i=this._Mx,n=this._Gx;if(0!==i.level){for(t||(t=i.stk.length);t>0&&0!==i.level;)i.stk.pop(),i.level=i.stk.length-1,t-=1;0===i.level&&this.rescale(),n.inContinuousZoom=!1,this.inZoom=!0,t=document.createEvent("Event"),t.initEvent("unzoom",!0,!0),t.level=i.level,t.xmin=i.stk[i.level].xmin,t.ymin=i.stk[i.level].ymin,t.xmax=i.stk[i.level].xmax,t.ymax=i.stk[i.level].ymax,e.dispatchEvent(i,t),this.inZoom=!1,this.refresh()}},mimic:function(t,e){var i=this;if(!e)throw"mimic must be called with at least one event mask";e.zoom?t.addListener("zoom",function(t){i.inZoom||i.zoom({x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymax},t.inContinuousZoom)}):e.xzoom?t.addListener("zoom",function(t){i.inZoom||i.zoom({x:t.xmin,y:void 0},{x:t.xmax,y:void 0},t.inContinuousZoom)}):e.yzoom&&t.addListener("zoom",function(t){i.inZoom||i.zoom({x:void 0,y:t.ymin},{x:void 0,y:t.ymax},t.inContinuousZoom)}),e.unzoom&&t.addListener("unzoom",function(t){i.inZoom||t.level<i._Mx.level&&i.unzoom(i._Mx.level-t.level)}),(e.pan||e.xpan)&&t.addListener("xpan",function(t){i.inPan||L(i,t.xmin,t.xmax,"X")}),(e.pan||e.ypan)&&t.addListener("ypan",function(t){i.inPan||L(i,t.ymin,t.ymax,"Y")})},redraw:function(){var t=this._Gx,e=this._Mx,i=e.canvas.getContext("2d");t.plotData.valid?(i.drawImage(t.plotData,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2),d(this),t.cross_xpos=void 0,t.cross_ypos=void 0,x(this),(t.always_show_marker||t.show_marker)&&f(this)):this.refresh()},refresh:function(){var t=this;e.render(this._Mx,function(){t._refresh()})},enable_listeners:function(){var t=this._Mx;e.addEventListener(t,"mousedown",this.onmousedown,!1),e.addEventListener(t,"mousemove",this.throttledOnMouseMove,!1),document.addEventListener("mouseup",this.docMouseUp,!1),e.addEventListener(t,"mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),window.addEventListener("wheel",this.wheelHandler,!1),window.addEventListener("mousewheel",this.wheelHandler,!1),window.addEventListener("DOMMouseScroll",this.wheelHandler,!1),window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var t=this._Mx;e.removeEventListener(t,"mousedown",this.onmousedown,!1),e.removeEventListener(t,"mousemove",this.throttledOnMouseMove,!1),document.removeEventListener("mouseup",this.docMouseUp,!1),e.removeEventListener(t,"mouseup",this.mouseup,!1),window.removeEventListener("mousedown",this.dragMouseDownHandler,!1),window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",this.dragMouseUpHandler,!1),window.removeEventListener("wheel",this.wheelHandler,!1),window.removeEventListener("mousewheel",this.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1),window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){e.checkresize(this._Mx)&&this.refresh()},_refresh:function(){var t=this._Mx,n=this._Gx;if(t.canvas.getContext("2d"),!n.hold){if(e.set_font(t,Math.min(8,t.width/64)),n.pthk=1.5*t.text_w,n.specs){var a=!1;4===n.ylab&&(a=!0),!0===n.show_y_axis?(t.l=6*t.text_w,a&&(31536e3<=Math.abs(t.stk[0].ymin)||31536e3<=Math.abs(t.stk[0].ymax))&&(t.l=11*t.text_w)):t.l=1,t.r=!0===n.pan?t.width-(n.pthk+2*t.text_w):t.width-2,n.show_readout?(t.t=2*t.text_h,t.b=n.show_x_axis?t.height-4*t.text_h:t.height-3*t.text_h):(t.t=n.pan?n.pthk+2*t.text_w:1,t.b=n.show_x_axis?t.height-3*t.text_h/2:t.height-2),n.pl=n.show_readout?50*t.text_w:35*t.text_w,n.pr=Math.max(n.pl+9*t.text_w,t.r),n.pt=n.show_readout?n.show_x_axis?t.b+t.text_h+(t.height-t.b-t.text_h-n.pthk)/2:t.b+(t.height-t.b-n.pthk)/2:(t.t-n.pthk)/2,n.lbtn=t.text_h+t.text_w+2}else n.pan?(t.t=n.pthk+2*t.text_w,t.r=t.width-(n.pthk+t.text_w)):(t.t=1,t.r=t.width-2),t.b=t.height-2,t.l=1,n.pl=t.l,n.pr=t.r,n.pt=(t.t-n.pthk)/2,n.lbtn=0;n.pyl=t.r+(t.width-t.r-n.pthk)/2+1,a=t.level,t.stk[a].x1=t.l,t.stk[a].y1=t.t,t.stk[a].x2=t.r,t.stk[a].y2=t.b,t.stk[a].xscl=(t.stk[a].xmax-t.stk[a].xmin)/(t.r-t.l),t.stk[a].yscl=(t.stk[a].ymax-t.stk[a].ymin)/(t.b-t.t),a=w(this,t.xpos,t.ypos),n.retx=a.x,n.rety=a.y,(0===n.panning||0!==n.panning)&&(n.plotData.valid=!1,e.clear_window(t));var a=n.xlab,r=n.ylab;if(void 0===a&&(a=30),n.index&&(a=0),void 0===r&&(r=0<n.lyr.length&&n.lyr[0].cx,1===n.cmode?r=28:2===n.cmode?r=n.plab:3===n.cmode&&r?r=21:4===n.cmode?r=22:5===n.cmode?(r=22,a=21):r=6===n.cmode?26:7===n.cmode?27:0),
n.specs){if(0===n.sections){var o={grid:n.grid};2===n.panning&&(o.noxtlab=!0),n.show_x_axis||(o.noxtics=!0,o.noxtlab=!0,o.noxplab=!0),n.show_y_axis||(o.noytics=!0,o.noytlab=!0,o.noyplab=!0),!n.specs||n.show_readout||n.pan||(o.noyplab=!0,o.noxplab=!0),n.gridBackground&&(o.fillStyle=n.gridBackground),n.gridStyle&&(o.gridStyle=n.gridStyle),n.xmult&&(o.xmult=n.xmult),n.ymult&&(o.ymult=n.ymult),e.drawaxis(t,n.xdiv,n.ydiv,a,r,o)}a=n.lbtn-2,n.show_readout&&n.pan?(n.legend?(n.legendBtnLocation={x:t.width-n.lbtn,y:2,width:a,height:a},e.shadowbox(t,t.width-n.lbtn,2,a,a,1,-2,"L")):(n.legendBtnLocation={x:t.width-n.lbtn,y:2,width:a,height:a},e.shadowbox(t,t.width-n.lbtn,2,a,a,1,2,"L")),b(this)):n.legendBtnLocation=null}else n.grid&&0<=n.sections&&(o={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},e.drawaxis(t,n.xdiv,n.ydiv,a,r,o));for(a=0;a<n.lyr.length;a++)u(this,a);if(a=this._Mx,r=this._Gx,r.show_readout&&!r.hide_note&&e.text(a,a.width-r.lbtn-(r.note.length+1)*a.text_w,a.text_h,r.note),p(this),r.legend){for(var a=this._Mx,r=this._Gx,o=a.canvas.getContext("2d"),s=0,l=0,h=0,c=0,m=0,y=0,g=0,_=s=0,v=0,c=a.text_w,g=23*c,s=(r.lyr.length+1)*a.text_h,m=a.r-g,y=a.t,l=m+2,h=y+2,_=g-5,v=s-5,M=0,s=g=0;s<r.lyr.length;s++){var k=o.measureText(r.lyr[s].name).width;k>M&&(M=k)}for(M>98&&(g=M-98,_+=g,l-=g),o.strokeStyle=a.fg,o.fillStyle=a.bg,o.fillRect(l,h,_,v),o.strokeRect(l,h,_,v),s=0;s<r.lyr.length;s++)l=m+4*c,h=y+s*a.text_h+a.text_h,s===r.modlayer&&e.text(a,m+c-g,h+Math.floor(a.text_w/2),"**"),r.lyr[s].display&&(v=r.lyr[s].color,0<r.lyr[s].line&&(_=i.sign(Math.min(c,Math.abs(r.lyr[s].thick)),r.lyr[s].thick),0>_||_===e.L_dashed?e.draw_line(a,v,l-g,h-3,l+2*c-g,h-3,Math.abs(_),{mode:"dashed",on:4,off:4}):e.draw_line(a,v,l-g,h-3,l+2*c-g,h-3,Math.abs(_))),0<r.lyr[s].symbol&&(_=0>r.lyr[s].radius?-i.trunc(.6*c):Math.min(r.lyr[s].radius,i.trunc(.6*c)),e.draw_symbol(a,v,l+c-g,h-3,r.lyr[s].symbol,_))),l+=3*c,h+=.3*a.text_h,e.text(a,l-g,h,r.lyr[s].name)}t.r>t.l&&t.b>t.t&&(n.plotData.width=t.canvas.width,n.plotData.height=t.canvas.height,n.plotData.getContext("2d").drawImage(t.canvas,0,0),n.plotData.valid=!0),d(this),n.cross_xpos=void 0,n.cross_ypos=void 0,x(this),(n.always_show_marker||n.show_marker)&&f(this)}}};var z={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},T="Ma Ph Re Im IR Lo L2".split(" "),P=["(absc)","(indx)","(1/ab)","(dydx)"]}(window.sigplot,window.mx,window.m);